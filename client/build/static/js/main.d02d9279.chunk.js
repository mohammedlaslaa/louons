(this.webpackJsonpnews=this.webpackJsonpnews||[]).push([[0],{33:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),l=(a(38),a(39),a(40),a(13)),s=a(14),o=a(20),m=a(19),u=a(21),d=r.a.createContext(),p=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={listCat:[]},a.componentDidMount=function(){fetch("https://louonsapptest.herokuapp.com/louons/api/v1/category/all",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){a.setState({listCat:e.data})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.listCat;return r.a.createElement(d.Provider,{value:{listCat:e}},this.props.children)}}]),t}(r.a.Component),f=(a(41),a(3));var b=function(e){return r.a.createElement("div",{className:e.specificclassname},r.a.createElement(f.b,{to:"/"},r.a.createElement("img",{src:"/assets/img/louons.png",alt:"logo_louons",className:"w-100 img-fluid logoimg mx-0 mx-sm-2 mx-md-0"})))},g=a(16),h=a(1),E=a(55),j=a(54);function v(e){return r.a.createElement(E.a,null,e.isShown&&r.a.createElement(j.a,{classNames:"searchanimation",timeout:1e3},r.a.createElement("div",{className:"".concat(e.specificclassname," my-2 mx-auto")},r.a.createElement("form",{action:"",className:"form-group has-search w-75 m-auto"},r.a.createElement("i",{className:"ri-search-line form-control-feedback"}),r.a.createElement("input",{className:"w-100 form-control",type:"text",placeholder:"Rechercher",name:"search"})))))}v.defaultProps={isShown:!0,specificclassname:""};var O=v,y=r.a.createContext();function x(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],i=a[1];return r.a.createElement(y.Provider,{value:{isToggle:c,setToggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!c;i(e)}}},e.children)}var N=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useContext)(y).setToggle,s=e.menuList.map((function(e,t){return"categories"===e.link?r.a.createElement("li",{key:t,className:"p-2 my-3 menuelement",onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)}},e.title,r.a.createElement(j.a,{classNames:"submenuelt",unmountOnExit:!0,timeout:600,in:c},r.a.createElement("ul",{className:"list-unstyled listcategory px-2"},r.a.createElement(d.Consumer,null,(function(e){return e.listCat.map((function(e){return r.a.createElement(f.b,{key:e._id,className:"submenuelement text-decoration-none",to:{pathname:"/categories/".concat(e.link),id:e._id,title:e.title,description:e.description}},r.a.createElement("li",{className:"p-1 my-3 font-italic submenuelement",onClick:function(){l(!1),i(!1)}},e.title))}))}))))):r.a.createElement(f.b,{key:t,className:"menuelement text-decoration-none",to:"/".concat(e.link.replace(/\s/gi,"_").normalize("NFC"))},r.a.createElement("li",{key:t,className:"p-2 my-3",onClick:function(){return l(!1)}},e.title))})),o=e.isShown&&"d-flex";return r.a.createElement(j.a,{classNames:"menuanimation",timeout:600,in:e.isShown},r.a.createElement("ul",{className:"my-auto ".concat(o," d-lg-flex flex-column flex-lg-row justify-content-lg-around list-unstyled listmenucontainer")},s,r.a.createElement(O,{isShown:!0,specificclassname:"d-md-none"})))},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={listOfMenu:[{link:"announces",title:"Annonces"},{link:"categories",title:"Cat\xe9gories"},{link:"post_announce",title:"D\xe9poser une annonce"}]},a.forceRender=a.forceRender.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"forceRender",value:function(){this.context.setToggle(!1)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.forceRender)}},{key:"render",value:function(){return r.a.createElement("div",{className:"p-0 h-100 navmenu d-block d-lg-flex align-items-center justify-content-lg-center"},r.a.createElement(N,{isShown:this.context.isToggle,menuList:this.state.listOfMenu}))}}]),t}(n.Component);S.contextType=y;var w=S;var k=function(){var e=Object(n.useContext)(y),t=e.isToggle,a=e.setToggle;return(r.a.createElement("div",{className:"barcontainer mx-1 mx-sm-3 d-flex flex-column d-lg-none align-items-end justify-content-center",onClick:function(e){return a()}},r.a.createElement(j.a,{classNames:"bar1",timeout:800,in:t},r.a.createElement("div",{className:"bar bar1"})),r.a.createElement(j.a,{classNames:"bar2",timeout:800,in:t},r.a.createElement("div",{className:"bar bar2"})),r.a.createElement(j.a,{classNames:"bar3",timeout:800,in:t},r.a.createElement("div",{className:"bar bar3"}))))},C=a(11),P=a.n(C),D=Object(n.createContext)(),T=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!0),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(P.a.get("x-auth-token")),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)({}),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1];return Object(n.useEffect)((function(){p&&y?fetch(y,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(i(!1),f("")):(i(!0),j(e.user)),m(!1)})):p||(i(!1),m(!1))}),[p,y]),r.a.createElement(D.Provider,{value:{isAuth:c,setIsAuth:i,cookieToken:p,isLoading:o,setIsLoading:m,setCookieToken:f,dataUser:E,setLinkAuth:x,linkAuth:y}},e.children)};var _=function(){var e=Object(n.useState)(!1),t=Object(h.a)(e,2),a=t[0],c=t[1],i=Object(n.useContext)(D).isAuth,l=function(){window.innerWidth<576&&c(!1)};return Object(n.useEffect)((function(){window.addEventListener("resize",l)}),[]),r.a.createElement("div",{className:"col-7 col-sm-6 col-lg-2 p-0 d-flex justify-content-end justify-content-lg-around"},r.a.createElement("i",{className:"ri-search-line mx-2 d-none d-sm-block icon-font22 color3c8ce4",onClick:function(){return c(!a)}}),r.a.createElement(f.b,{key:"rightside2",className:"text-decoration-none",to:"/message"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-mail-fill icon-font22 color3c8ce4"})),r.a.createElement(f.b,{key:"rightside1",className:"text-decoration-none",to:"/my_account"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-user-3-fill icon-font22 color3c8ce4"})),i&&r.a.createElement(f.b,{key:"rightside3",className:"text-decoration-none",to:"/logout"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-logout-circle-r-line icon-font22 text-danger"})),r.a.createElement(O,{specificclassname:"position-absolute searchbar",isShown:a}),r.a.createElement(k,null))};var A=function(){return r.a.createElement("header",{className:"headercontainer row m-0 d-flex justify-content-center align-items-center mx-auto p-2"},r.a.createElement(b,{specificclassname:"col-5 col-sm-6 col-lg-3 p-0 text-sm-left text-md-center logo"}),r.a.createElement(x,null,r.a.createElement(w,null),r.a.createElement(_,null)))};a(47);var M=function(e){var t=Object(n.useContext)(D).isAuth,a=e.dataToDisplay.map((function(a,n){return"login"===a.link&&t?r.a.createElement(f.b,{key:a._id||n,className:"text-white",to:{pathname:"".concat(e.pathlink,"/logout"),id:a._id||n}},r.a.createElement("li",{key:"title".concat(n),className:"footerli p-2",onClick:function(){return s(!1)}},"D\xe9connexion")):r.a.createElement(f.b,{key:a._id||n,className:"text-white",to:{pathname:"".concat(e.pathlink,"/").concat(a.link),id:a._id||n,title:a.title,description:a.description}},r.a.createElement("li",{key:"title".concat(n),className:"footerli p-2",onClick:function(){return s(!1)}},a.title))})),c=Object(n.useState)(!1),i=Object(h.a)(c,2),l=i[0],s=i[1],o=l?"d-block":"d-none d-md-block";return r.a.createElement("div",{className:"col-md-4 text-center my-2"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between justify-content-sm-around flex-row flex-md-column"},r.a.createElement("h4",{className:"text-white p-2 m-0 titlefooter"},e.title),r.a.createElement("i",{className:"ri-menu-4-fill text-white ri-2x d-md-none",onClick:function(){return s(!l)}})),r.a.createElement(j.a,{classNames:"listfooter",timeout:600,in:l},r.a.createElement("ul",{className:"".concat(o," list-unstyled text-white")},a)))};var F=function(){var e=Object(n.useState)([{link:"my_account",title:"Infos personnelles"},{link:"my_account/rentals",title:"Locations"},{link:"my_account/announces",title:"Mes annonces"},{link:"message",title:"Message"},{link:"login",title:"Connexion"}]),t=Object(h.a)(e,1)[0],a=Object(n.useState)([{link:"aboutus",title:"Qui sommes nous ?"},{link:"legalmention",title:"Mentions L\xe9gales"},{link:"cgv",title:"CGV"},{link:"contactus",title:"Nous contacter"}]),c=Object(h.a)(a,1)[0],i=Object(n.useContext)(d).listCat;return r.a.createElement("footer",{className:"bgcolor144c84 d-flex flex-column flex-md-row w-100"},r.a.createElement(M,{dataToDisplay:t,pathlink:"",title:"Mon compte"}),r.a.createElement(M,{dataToDisplay:i,pathlink:"/categories",title:"Cat\xe9gories"}),r.a.createElement(M,{dataToDisplay:c,pathlink:"",title:"Informations"}))},L=a(2),I=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,null,[{key:"endPoint",get:function(){return"https://louonsapptest.herokuapp.com/louons/api/v1"}},{key:"endPointImage",get:function(){return"https://louonsapptest.herokuapp.com/uploads/img"}}]),e}();function Y(e){var t=I.endPointImage;return r.a.createElement("div",{className:e.divClass},e.data.map((function(a,n){return r.a.createElement("div",{key:n,className:e.productClass},r.a.createElement("img",{src:"".concat(t,"/").concat(a.pictures[0].path_picture),alt:"",className:"w-100 img-fluid thumbnail-img mx-auto"}),r.a.createElement("div",{className:"d-flex flex-column flex-xl-row p-1 justify-content-center align-items-center text-center"},r.a.createElement("p",{className:"p-1 text-center titleannounce mx-md-3"},a.title.length>12?"".concat(a.title.slice(0,12),"..."):a.title),r.a.createElement("p",{className:"mb-1 m-sm-0 font-weight-bold mx-md-3"},a.price," \u20ac/jr")),r.a.createElement(f.b,{to:"/announce/".concat(a._id),className:"text-center"},r.a.createElement("button",{className:"btn btn-outline-dark p-1 listproduct-btn mx-auto"},"Voir l'article")))})))}Y.defaultProps={divClass:"row col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-lg-between",productClass:"col-8 col-sm-6 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end"};var U=Y;a(48);var z=function(){var e=I.endPoint,t=Object(n.useState)({data:[]}),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)([{message:"Publiez vos articles et recevez des offres de locations"},{message:"Louez aupr\xe8s de personnes \xe9valu\xe9s"},{message:"Donnez une seconde vie \xe0 vos articles et pensez \xe9colo"}]),s=Object(h.a)(l,1)[0];return Object(n.useEffect)((function(){fetch("".concat(e,"/article/lastactive"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i((function(t){return Object(L.a)({},t,{data:e.data})}))}))}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"color144c84 p-2 my-3 col-12 text-center"},"Bienvenue sur louons.fr"),r.a.createElement("div",{className:"row col-12 mx-0 my-2 my-md-5 p-0 d-flex mx-auto"},s.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-11 col-sm-8 col-md-5 col-lg-3 border border-white mx-auto hometext bgcolor9cd1ff text-white p-1 my-2 text-center"},0===t?r.a.createElement("i",{className:"ri-edit-line ri-3x"}):1===t?r.a.createElement("i",{className:"ri-service-line ri-3x"}):r.a.createElement("i",{className:"ri-time-line ri-3x"}),r.a.createElement("p",{className:"text-center m-0 mx-auto"},e.message))}))),r.a.createElement("h2",{className:"bgcolor144c84 p-2 my-3 col-12 col-lg-10 mx-auto text-center text-white font-italic"},"Derniers articles publi\xe9s"),r.a.createElement(U,{data:c.data}))},G=a(15);var R=function(){return r.a.createElement("div",{className:"imgnotfound mx-auto"},r.a.createElement("img",{alt:"404_not_found",className:"w-100",src:"/assets/img/404_notfound.jpg"}))},V=a(4),B=a.n(V);var W=function(e){return r.a.createElement("li",{className:"listcomplete p-2 ".concat(e.className),onClick:function(){e.setCurrLi(),e.setDateStart(),e.setDateEnd()}},"Du ".concat(B()(e.dateStart).format("DD/MM/YYYY")," au ").concat(B()(e.dateEnd).format("DD/MM/YYYY")))};var J=function(){var e=I.endPoint,t=I.endPointImage,a=Object(G.h)().id,c=Object(n.useContext)(D).isAuth,i=Object(n.useState)({mainpicture:"",data:{},isFetched:!1,error:!1,isShownButton:!0,prevNumberDay:0,numberDay:1,listDate:[],currDateLi:"",dateStart:"",dateEnd:""}),l=Object(h.a)(i,2),s=l[0],o=l[1];return Object(n.useEffect)((function(){s.isFetched||fetch("".concat(e,"/article/detail/").concat(a)).then((function(e){return e.json()})).then((function(e){!e.error&&e.data.isActive?o((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0,mainpicture:e.data.pictures[0].path_picture})})):o((function(e){return Object(L.a)({},e,{error:!0,isFetched:!0})}))}))}),[a,s,e]),s.error?r.a.createElement(R,null):r.a.createElement("div",{className:"col-12 col-sm-11 col-lg-10 col-xl-9 mx-auto product-detail-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-7 col-lg-8 picture-container"},s.isFetched&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-2 order-1 order-md-0 my-3"},r.a.createElement("div",{className:"row h-100 d-flex align-items-center justify-content-around"},s.data.pictures.map((function(e,a){return r.a.createElement("div",{key:a,className:"p-0 col-2 col-md-8 thumbnail-img-product"},r.a.createElement("img",{className:"img-fluid w-100",src:"".concat(t,"/").concat(e.path_picture),alt:"",onClick:function(){return o((function(t){return Object(L.a)({},t,{mainpicture:e.path_picture})}))}}))})))),r.a.createElement("div",{className:"col-12 col-md-10 main-picture-container d-flex align-items-center"},r.a.createElement("img",{className:"img-fluid main-picture mx-auto",src:"".concat(t,"/").concat(s.mainpicture),alt:""})))),r.a.createElement("div",{className:"col-12 col-md-5 col-lg-4 text-center d-flex flex-column justify-content-center"},r.a.createElement("h3",{className:"mt-3"},s.data.title),r.a.createElement("div",null,r.a.createElement("p",{className:"mt-2 mt-md-3 font-weight-bold"},"Description :"),r.a.createElement("p",{className:"my-3"},s.data.description),r.a.createElement("p",{className:"my-3 font-weight-bold"},"Prix de location :"),r.a.createElement("p",{className:"my-3"},s.data.price," \u20ac/jr"),c?s.isShownButton?r.a.createElement("button",{className:"btn btn-outline-dark my-3",onClick:function(){return o((function(e){return Object(L.a)({},e,{isShownButton:!1})}))}},"Disponibilit\xe9s"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Nbr de jour :"),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},r.a.createElement("i",{className:"ri-indeterminate-circle-line ri-2x",onClick:function(){return o((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay,numberDay:e.numberDay-1})}))}}),r.a.createElement("p",{className:"number-day mx-2 my-0"},s.numberDay),r.a.createElement("i",{className:"ri-add-circle-line ri-2x",onClick:function(){return o((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay,numberDay:e.numberDay+1})}))}}),r.a.createElement("button",{className:"btn btn-outline-primary ml-3",onClick:function(){o((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay})})),s.numberDay!==s.prevNumberDay&&s.numberDay>0&&fetch("".concat(e,"/rental/date/").concat(a,"/").concat(s.numberDay),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||o((function(t){return Object(L.a)({},t,{currDateLi:"",listDate:e.data})}))}))}},"Ok"),s.listDate.length>0&&r.a.createElement("button",{className:"btn btn-outline-danger mx-1",onClick:function(){return o((function(e){return Object(L.a)({},e,{listDate:[],currDateLi:"",dateStart:"",dateEnd:"",prevNumberDay:0,numberDay:1})}))}},"Reset")),s.listDate.length>0&&r.a.createElement("ul",{className:"list-unstyled my-3"},s.listDate.map((function(e,t){return r.a.createElement(W,{key:t,index:t,className:s.currDateLi===t?"p-1 list-date bg-secondary text-white":"p-1 list-date",setCurrLi:function(){return o((function(e){return Object(L.a)({},e,{currDateLi:t})}))},dateStart:e.dateStart,dateEnd:e.dateEnd,setDateStart:function(){return o((function(t){return Object(L.a)({},t,{dateStart:B()(e.dateStart).format("YYYY-MM-DD")})}))},setDateEnd:function(){return o((function(t){return Object(L.a)({},t,{dateEnd:B()(e.dateEnd).format("YYYY-MM-DD")})}))}})}))),s.dateStart&&r.a.createElement(f.b,{to:"/order"},r.a.createElement("button",{className:"btn btn-outline-primary m-3",onClick:function(){return P.a.set("article",{article:s.data,dateStart:s.dateStart,dateEnd:s.dateEnd,numberDay:s.numberDay})}},"R\xe9server \xe0 cette date"))):r.a.createElement("p",null,"Veuillez vous connecter pour voir les disponibilit\xe9s")))))};var Z=function(e){var t=Object(n.useState)({id:e.location.id,isFetched:!1,title:e.location.title,description:e.location.description,data:[],idLocationUndefined:!0,isNotFound:!1}),a=Object(h.a)(t,2),c=a[0],i=a[1],l=I.endPoint,s=Object(G.h)().title;return Object(n.useEffect)((function(){e.location.id!==c.id&&e.location.id&&i((function(t){return Object(L.a)({},t,{id:e.location.id,title:e.location.title,description:e.location.description,isFetched:!1})})),c.id||!c.idLocationUndefined||c.isNotFound||fetch("".concat(l,"/category/detail?title=").concat(s),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?i((function(e){return Object(L.a)({},e,{isNotFound:!0})})):i((function(t){return Object(L.a)({},t,{id:e.data[0]._id,title:e.data[0].title,description:e.data[0].description,idLocationUndefined:!1})}))})),c.isFetched||!c.id||c.isNotFound||fetch("".concat(l,"/article/searcharticle/").concat(c.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[c,e.location,s,l]),c.isNotFound?r.a.createElement(R,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 m-auto text-center category-title"},c.title),r.a.createElement("p",{className:"col-12 col-lg-10 m-0 m-auto mt-md-3 p-2 text-center text-white font-italic bgcolor3c8ce4"},c.description),r.a.createElement(U,{divClass:"col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-md-start",productClass:"col-6 col-sm-4 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end",data:c.data}))};var $=function(){var e=I.endPoint,t=Object(n.useState)({isFetched:!1,title:"Toutes les annonces",description:"Retrouvez ici toutes les annonces",data:[]}),a=Object(h.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){c.isFetched||fetch("".concat(e,"/article"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[c,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 m-auto text-center category-title"},c.title),r.a.createElement("p",{className:"col-12 col-lg-10 m-0 m-auto mt-md-3 p-2 text-center text-white font-italic bgcolor3c8ce4"},c.description),r.a.createElement(U,{divClass:"row col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-md-start",productClass:"col-6 col-sm-4 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end",data:c.data}))},q=a(17);var Q=function(e){var t=I.endPointImage;return r.a.createElement("div",{className:"table-responsive mt-5"},r.a.createElement("table",{className:"text-center table-rental w-100 border border-black"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{className:"p-3"},"Nom"),r.a.createElement("th",{className:"p-3"},"Description"))),r.a.createElement("tbody",null,e.data.map((function(a,n){return r.a.createElement("tr",{key:n,className:"border border-black"},r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex align-items-center h-100"},r.a.createElement("input",{type:"radio",name:"delivery",className:"mx-auto",value:a._id,checked:a._id===e.isChecked,onChange:function(t){var a=t.target.value;e.setRental((function(t){return Object(L.a)({},t,Object(q.a)({},e.propertyvalue,a))}))}}))),r.a.createElement("td",null,a.title,r.a.createElement("img",{className:"img-fluid thumbnail-delivery-payment",src:"".concat(t,"/").concat(a.path_picture),alt:"picture_delivery"})),r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex align-items-center justify-content-center h-100"},r.a.createElement("p",{className:"text-center"},a.description))))})))))};var H=function(e){var t=P.a.getJSON("article"),a=I.endPoint,c=I.endPointImage,i=Object(n.useState)({currentStep:1,selectedDelivery:"",selectedPayment:"",delivery:[],payment:[],registered:!1}),l=Object(h.a)(i,2),s=l[0],o=l[1];return Object(n.useEffect)((function(){2===s.currentStep&&0===s.delivery.length&&fetch("".concat(a,"/carrier/all")).then((function(e){return e.json()})).then((function(e){e.error||o((function(t){return Object(L.a)({},t,{delivery:e.data})}))})),3===s.currentStep&&0===s.payment.length&&fetch("".concat(a,"/payment/all")).then((function(e){return e.json()})).then((function(e){e.error||o((function(t){return Object(L.a)({},t,{payment:e.data})}))}))}),[s,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 text-center my-2 my-md-3"},"Tunnel de commande"),r.a.createElement("div",{className:"col-12 col-lg-10 mx-auto"},r.a.createElement("div",{className:"row d-flex justify-content-center col-12 col-md-10 col-lg-12 mx-auto"},r.a.createElement("div",{className:"col-12 col-md-4 ".concat(1===s.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"1/ R\xe9capitulatif")),r.a.createElement("div",{className:"col-12 col-md-4 ".concat(2===s.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"2/ Livraison")),r.a.createElement("div",{className:"col-12 col-md-4 ".concat(3===s.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"3/ Paiement")),r.a.createElement("div",{className:"col-12 content-rental p-0"},s.registered?r.a.createElement("p",{className:"text-white text-center bg-success p-3 mt-3"},"Location enregistr\xe9 avec succ\xe9s !"):1===s.currentStep?t&&t.article?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-wrap"},r.a.createElement("h5",{className:"col-12 font-weight-bold text-center my-3 title-part-rental-step"},"Article"),r.a.createElement("div",{className:"col-12 d-flex flex-wrap justify-content-center align-items-center"},r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Nom de l'article :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},t.article.title),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Prix :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},"".concat(t.article.price," \u20ac/jr"))),r.a.createElement("div",{className:"col-12 d-flex justify-content-center align-items-center"},r.a.createElement("img",{className:"img-fluid thumbnail-article-rental",src:"".concat(c,"/").concat(t.article.pictures[0].path_picture),alt:"main_picture_article"}))),r.a.createElement("div",{className:"d-flex flex-wrap"},r.a.createElement("h5",{className:"col-12 font-weight-bold text-center title-part-rental-step"},"R\xe9servation"),r.a.createElement("div",{className:"col-12 d-flex flex-wrap justify-content-center align-items-center"},r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Nombre de jour :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},t.numberDay),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Prix total :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},"".concat(t.numberDay*t.article.price," \u20ac")),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Date de d\xe9but :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},B()(t.dateStart).format("DD/MM/YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Date de fin :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},B()(t.dateEnd).format("DD/MM/YYYY"))))):r.a.createElement("p",{className:"text-center my-4"},"Aucun article choisi"):2===s.currentStep?r.a.createElement(Q,{setRental:o,data:s.delivery,propertyvalue:"selectedDelivery",isChecked:s.selectedDelivery}):3===s.currentStep?r.a.createElement(Q,{setRental:o,data:s.payment,propertyvalue:"selectedPayment",isChecked:s.selectedPayment}):r.a.createElement("p",null,"Page introuvable")),t&&t.article&&r.a.createElement("div",{className:"col-12 d-flex justify-content-center justify-content-md-end my-3"},s.currentStep>1&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){o((function(e){return Object(L.a)({},e,{currentStep:e.currentStep-1})}))}},2===s.currentStep?"<< R\xe9capitulatif":"<< Livraison"),s.currentStep<3&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){(1===s.currentStep||s.selectedDelivery)&&o((function(e){return Object(L.a)({},e,{currentStep:e.currentStep+1})}))}},1===s.currentStep?"Livraison >>":"Paiement >>"),3===s.currentStep&&s.selectedPayment&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){return function(){var n=JSON.stringify({id_payment:s.selectedPayment,id_carrier:s.selectedDelivery,id_article:t.article._id,id_user:t.id_user,total_price:t.numberDay*t.article.price,start_date:t.dateStart,end_date:t.dateEnd});fetch("".concat(a,"/rental"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(t){t.error||(P.a.remove("article"),o({currentStep:1,selectedDelivery:"",selectedPayment:"",delivery:[],payment:[],registered:!0}),setTimeout((function(){o((function(e){return Object(L.a)({},e,{registered:!1})})),e.history.push("/my_account/rentals")}),2500))}))}()}},"Valider")))))};var K=function(e){var t=e.linkapi,a=e.redirect,c=e.history,i=e.location,l=Object(n.useContext)(D),s=l.isAuth,o=l.setIsAuth,m=l.setIsLoading,u=l.cookieToken,d=l.setCookieToken,p=Object(n.useState)(!1),b=Object(h.a)(p,2),g=b[0],E=b[1],j=Object(n.useState)(),v=Object(h.a)(j,2),O=v[0],y=v[1],x=Object(n.useState)(),N=Object(h.a)(x,2),S=N[0],w=N[1];return Object(n.useEffect)((function(){(s||u)&&c.replace(a)})),r.a.createElement(r.a.Fragment,null,"/adminlogin"===i.pathname&&r.a.createElement("header",{className:"header row d-flex align-items-center"},r.a.createElement("div",{className:"col-12 col-md-6 text-center p-3 order-md-1"},r.a.createElement("img",{src:"../assets/img/louons.png",alt:"logo_louons",className:"img-fluid logoimg"})),r.a.createElement("div",{className:"col-12 col-md-6 text-center p-3"},r.a.createElement("h1",{className:"titlelogin color3c8ce4"},"Connexion au Panel Admin"))),r.a.createElement("main",{className:"row flex-grow-1"},r.a.createElement("form",{className:"mt-5 form-group mx-auto d-flex flex-column col-12 col-sm-6 col-md-5 col-lg-4 col-xl-3 align-items-center",onSubmit:function(e){e.preventDefault(),fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:O,password:S})}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&E(!0):(o(!0),m(!1),d(P.a.get("x-auth-token")),c.replace(a))}))}},g&&r.a.createElement("p",{className:"messagesize text-danger"},"Email ou mot de passe erron\xe9"),r.a.createElement("label",{className:"p-2 w-100"},"Email :",r.a.createElement("input",{className:"form-control mt-3",type:"email",onChange:function(e){y(e.target.value),E(!1)}})),r.a.createElement("label",{className:"p-2 w-100"},"Mot de passe :",r.a.createElement("input",{className:"form-control mt-3",type:"password",onChange:function(e){w(e.target.value),E(!1)}})),"/login"===i.pathname&&r.a.createElement(f.b,{to:"/inscription"},r.a.createElement("p",{className:"text-danger mb-2 notregistered-login"},"Pas encore de compte ? Inscrivez-vous"," ")),r.a.createElement("input",{className:"bgcolor3c8ce4 text-white btn btnlogin",type:"submit",value:"Connexion"}))))};var X=function(e){var t=Object(n.useContext)(D),a=t.setIsAuth,c=t.setCookieToken;return Object(n.useEffect)((function(){P.a.remove("x-auth-token"),c(""),a(!1)})),r.a.createElement(G.a,{to:e.redirect})},ee=a(24);function te(e){var t=e.linkAuth,a=e.component,c=Object(ee.a)(e,["linkAuth","component"]),i=Object(n.useContext)(D),l=i.isLoading,s=i.isAuth,o=i.setCookieToken,m=i.setLinkAuth;""===document.cookie&&o("");var u=Object(L.a)({},c).pageifnotauth;return Object(n.useEffect)((function(){m(t)}),[t,m]),l?r.a.createElement(G.b,Object.assign({},c,{render:function(){return r.a.createElement("p",{className:"text-white message-loading text-center bg-success p-3 w-100"},"Loading ...")}})):r.a.createElement(G.b,Object.assign({},c,{render:function(e){return s?r.a.createElement(a,Object.assign({},e,c)):r.a.createElement(G.a,{to:u})}}))}var ae=I.endPoint;te.defaultProps={linkAuth:"".concat(ae,"/authenticationadmin")};var ne=te;function re(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.containerClass},e.errorcondition&&r.a.createElement("span",{className:"text-danger w-100 errormessage text-center mx-auto p-2"},e.errormessage),r.a.createElement("label",{className:e.labelClass,htmlFor:e.name},e.label),r.a.createElement("input",{type:e.type,name:e.name,value:e.value,className:e.inputClass,onChange:e.change,id:e.name,disabled:e.disabled,min:e.min,max:e.max,autoComplete:e.autoComplete})))}re.defaultProps={containerClass:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto text-center",inputClass:"form-control col-9 col-sm-6 col-md-5",labelClass:"col-9 col-sm-6 mt-2",disabled:!1,htmlFor:"",min:"",max:"",errorCondition:!1,autoComplete:"on"};var ce=re;var ie=function(e){return!e.isMediumWindow&&r.a.createElement("h3",{className:"title-profil text-center mb-4"},e.title)};var le=function(e){var t=I.endPointImage,a=e.dataCurrentUser,n=a.data,c=a.isDisabledForm?"disabled":"";return a.isLoading?r.a.createElement("p",{className:"p-2 text-white bg-success"},"Chargement..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{isMediumWindow:e.isMediumWindow,title:"Mes Informations"}),e.dataCurrentUser.isSuccess?r.a.createElement("p",{className:"bg-success text-white text-center p-2 w-100"},"Information mis \xe0 jour avec succ\xe9s"):!e.dataCurrentUser.isFailed||r.a.createElement("p",{className:"bg-danger text-white text-center p-2 w-100"},"Mot de passe incorrect ou erreur formulaire"),r.a.createElement("form",{className:"row form-group mx-auto d-flex justify-content-center",autoComplete:"off",onSubmit:function(t){return e.handleSubmit(t)}},e.dataCurrentUser.errorPicture&&e.dataCurrentUser.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Seule une image sous le format png ou jpg/jpeg est accept\xe9"),r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto d-flex align-items-center"},r.a.createElement("img",{src:n.path_picture?"".concat(t,"/").concat(n.path_picture):"".concat(t,"/default-avatar.png"),className:"w-100 rounded-circle",alt:"avatar_image_profil"}),!c&&r.a.createElement("div",{className:"file-picture-profil"},r.a.createElement("i",{className:"ri-edit-line ri-2x text-white"}),r.a.createElement("span",{className:"input-profil"},r.a.createElement("input",{type:"file",name:"picture",multiple:!0,onChange:function(t){return e.handleChangeForm(t)}}))))),r.a.createElement("div",{className:"row my-3 col-12 col-sm-8 col-lg-7 d-flex justify-content-center"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2 text-center"},"Titre :"),r.a.createElement("label",{className:"col-5 col-sm-4 mt-2 text-center"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",disabled:c,className:"mx-1",checked:"mr"===n.gender,id:"mr",key:"mr",onChange:function(t){return e.handleChangeForm(t,"mr")}})),r.a.createElement("label",{className:"col-5 col-sm-4 mt-2 text-center"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",disabled:c,id:"mrs",key:"mrs",checked:"mrs"===n.gender,onChange:function(t){return e.handleChangeForm(t,"mrs")}}))),r.a.createElement(ce,{label:"Nom :",containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-7 text-center",name:"lastName",type:"text",errorcondition:e.dataCurrentUser.errorLastName,disabled:c,value:"lastName"in n&&n.lastName,change:function(t){e.handleChangeForm(t)},errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux et ne doit pas \xeatre vide"}),r.a.createElement(ce,{label:"Pr\xe9nom :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-7 text-center",name:"firstName",type:"text",errorcondition:e.dataCurrentUser.errorFirstName,disabled:c,value:"firstName"in n&&n.firstName,change:function(t){e.handleChangeForm(t)},errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux et ne doit pas \xeatre vide"}),r.a.createElement(ce,{label:"Email :",containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-9 text-center",name:"email",type:"text",disabled:c,errorcondition:e.dataCurrentUser.errorMail,value:"email"in n&&n.email,change:function(t){e.handleChangeForm(t)},errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ce,{label:"Date de naissance :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control date-size col-12 col-sm-6 p-0 col-md-5 text-center",name:"date_birth",type:"date",min:"1940-01-01",max:"2010-01-01",errormessage:"Date incorrect",errorcondition:e.dataCurrentUser.errorDate,disabled:c,value:n.date_birth&&B()(n.date_birth).format("YYYY-MM-DD"),change:function(t){e.handleChangeForm(t)}}),r.a.createElement("div",{className:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center"},r.a.createElement("label",{className:"text-center my-2 m-md-0"},"Newsletter :"),r.a.createElement("select",{name:"isSubscribe",id:"category",disabled:c,className:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",value:n.isSubscribe,onChange:function(t){return e.handleChangeForm(t)}},r.a.createElement("option",{value:"true"},"Oui"),r.a.createElement("option",{value:"false"},"Non"))),r.a.createElement(ce,{label:"Date d'inscription :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control date-size col-12 col-sm-6 p-0 col-md-5 text-center",name:"date_register",type:"date",disabled:"disabled",value:n.date_register&&B()(n.date_register).format("YYYY-MM-DD")}),c?r.a.createElement("button",{className:"mx-auto my-3 btn btn-info",onClick:function(){return e.setDataCurrentUser((function(e){return Object(L.a)({},e,{isDisabledForm:!1,method:"PUT"})}))}},"Modifier"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-secondary text-center p-2 w-100 mb-0"},"Pour toute modification, veuillez confirmer votre mot de passe."),r.a.createElement(ce,{containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Mot de passe Actuel :",name:"testPassword",type:"password",autoComplete:"new-password",value:n.testPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorTestPassword&&e.dataCurrentUser.isSubmit,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ce,{containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Confirmation :",name:"confirmationTestPassword",type:"password",value:n.confirmationTestPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorConfirmationTestPassword,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement(ce,{containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Nouveau mdp :",name:"newPassword",type:"password",autoComplete:"new-password",value:n.newPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorNewPassword&&e.dataCurrentUser.isSubmit,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ce,{containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Confirmation :",name:"confirmationNewPassword",type:"password",value:n.confirmationNewPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorConfirmationNewPassword,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement("input",{type:"submit",className:"mx-auto my-3 btn btn-info",value:"Envoyer"}))))};var se=function(e){var t=I.endPoint,a=Object(n.useState)({method:"GET",data:{date_birth:"",picture:[],testPassword:"",confirmationTestPassword:"",newPassword:"",confirmationNewPassword:""},isFetched:!1,isLoading:!0,isSubmit:!1,isDisabledForm:!0,numberErrorForm:0,errorForm:!1,errorPicture:!1,errorDate:!1,errorLastName:!1,errorFirstName:!1,errorMail:!1,errorTestPassword:!1,errorConfirmationTestPassword:!1,errorNewPassword:!1,errorConfirmationNewPassword:!1,isSuccess:!1,isFailed:!1}),c=Object(h.a)(a,2),i=c[0],l=c[1],s=new FormData,o=i.data,m=o.lastName,u=o.firstName,d=o.date_birth,p=o.gender,f=o.email,b=o.isSubscribe,g=o.picture,E=o.testPassword,j=o.confirmationTestPassword,v=o.newPassword,O=o.confirmationNewPassword,y=i.method,x=i.isFetched,N=i.errorForm,S=i.errorPicture,w=i.errorDate,k=i.errorLastName,C=i.errorFirstName,P=i.errorMail,D=i.errorTestPassword,T=i.errorConfirmationTestPassword,_=i.errorNewPassword,A=i.errorConfirmationNewPassword,M=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),F=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),Y=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);return Object(n.useEffect)((function(){if(x||fetch("".concat(t,"/user/me"),{method:y,credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{data:Object(L.a)({},t.data,{},e.data),isFetched:!0,isLoading:!1})}))})),x&&"PUT"===y){if(1===Object.keys(g).length)for(var e=0;e<g.length;e++)"image/png"===g[e].type||"image/jpeg"===g[e].type||S?"image/png"!==g[e].type&&"image/jpeg"!==g[e].type||(S&&l((function(e){return Object(L.a)({},e,{errorPicture:!1})})),s.append("file".concat(e),g[e])):l((function(e){return Object(L.a)({},e,{errorPicture:!0})}));else Object.keys(g).length>1&&!S&&l((function(e){return Object(L.a)({},e,{errorPicture:!0})}));(new Date(d).getFullYear()<1940||new Date(d).getFullYear()>2010)&&!w?l((function(e){return Object(L.a)({},e,{errorDate:!0})})):new Date(d).getFullYear()>1940&&new Date(d).getFullYear()<2010&&w&&l((function(e){return Object(L.a)({},e,{errorDate:!1})})),M.test(m)&&""!==m&&k?l((function(e){return Object(L.a)({},e,{errorLastName:!1})})):M.test(m)&&""!==m||k||l((function(e){return Object(L.a)({},e,{errorLastName:!0})})),M.test(u)&&""!==u&&C?l((function(e){return Object(L.a)({},e,{errorFirstName:!1})})):M.test(u)||C||l((function(e){return Object(L.a)({},e,{errorFirstName:!0})})),F.test(f)&&""!==f&&P?l((function(e){return Object(L.a)({},e,{errorMail:!1})})):F.test(f)||P||l((function(e){return Object(L.a)({},e,{errorMail:!0})})),Y.test(E)&&""!==E&&D?l((function(e){return Object(L.a)({},e,{errorTestPassword:!1})})):Y.test(E)&&""!==E||D||l((function(e){return Object(L.a)({},e,{errorTestPassword:!0})})),E===j&&T?l((function(e){return Object(L.a)({},e,{errorConfirmationTestPassword:!1})})):E===j||T||l((function(e){return Object(L.a)({},e,{errorConfirmationTestPassword:!0})})),(""===v||Y.test(v))&&_?l((function(e){return Object(L.a)({},e,{errorNewPassword:!1})})):""===v||Y.test(v)||_||l((function(e){return Object(L.a)({},e,{errorNewPassword:!0})})),v===O&&A?l((function(e){return Object(L.a)({},e,{errorConfirmationNewPassword:!1})})):v===O||A||l((function(e){return Object(L.a)({},e,{errorConfirmationNewPassword:!0})})),(S||w||k||C||P||D||T||_||A)&&!N?l((function(e){return Object(L.a)({},e,{errorForm:!0})})):!N||S||w||k||C||P||D||T||_||A||l((function(e){return Object(L.a)({},e,{errorForm:!1})}))}}),[y,x,F,M,Y,s,m,u,d,f,g,E,j,N,S,w,k,C,P,D,T,v,O,_,A,t]),r.a.createElement(le,{dataCurrentUser:i,setDataCurrentUser:l,handleChangeForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.target,n=a.value,r=a.name,c=a.files,i=""===t?n:t;i="true"===i||"false"===i?JSON.parse(i):i,l((function(e){return"picture"===r?Object(L.a)({},e,{data:Object(L.a)({},e.data,Object(q.a)({},r,c))}):Object(L.a)({},e,{data:Object(L.a)({},e.data,Object(q.a)({},r,i))})}))},handleSubmit:function(e){e.preventDefault(),l((function(e){return Object(L.a)({},e,{isSubmit:!0})})),s.append("lastName",m),s.append("firstName",u),s.append("date_birth",d),s.append("gender",p),s.append("email",f),s.append("isSubscribe",b),s.append("testPassword",E),""!==v&&s.append("password",v),N||fetch("".concat(t,"/user/me"),{method:y,credentials:"include",body:s}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(l((function(e){return Object(L.a)({},e,{isFailed:!0})})),setTimeout((function(){l((function(e){return Object(L.a)({},e,{isFailed:!1})}))}),1e3)):(l((function(t){return e.picture?Object(L.a)({},t,{isSuccess:!0,isSubmit:!1,isDisabledForm:!0,data:Object(L.a)({},t.data,{path_picture:e.picture})}):Object(L.a)({},t,{isSuccess:!0,isSubmit:!1,isDisabledForm:!0})})),setTimeout((function(){l((function(e){return Object(L.a)({},e,{isSuccess:!1,data:Object(L.a)({},e.data,{testPassword:"",confirmationTestPassword:"",newPassword:"",confirmationNewPassword:""})})}))}),1e3))}))},isMediumWindow:e.isMediumWindow})};var oe=function(e){return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped table-announce"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.values(e.datatodisplay).map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,e.data.map((function(t,a){return r.a.createElement("tr",{key:a},Object.keys(e.datatodisplay).map((function(a,n){return t[a]?"date_register"===a?r.a.createElement("td",{key:n},B()(t[a]).format("DD/MM/YYYY")):"price"===a?r.a.createElement("td",{key:n},"".concat(t[a],"\u20ac/jr")):"total_price"===a?r.a.createElement("td",{key:n},"".concat(t[a],"\u20ac")):"id_article"===a||"id_carrier"===a||"id_payment"===a?r.a.createElement("td",{key:n},t[a].title):r.a.createElement("td",{key:n},t[a]):"seemore"===a?r.a.createElement("td",{key:n},r.a.createElement(f.b,{to:"".concat(e.linkdetail,"/").concat(t._id),onClick:function(){return e.handleIdParams&&e.handleIdParams(t._id)}},r.a.createElement("i",{className:"ri-eye-line"}))):"delete"!==a||r.a.createElement("td",{key:n},r.a.createElement("i",{className:"ri-delete-bin-6-fill",onClick:function(){return a=t._id,void fetch("".concat(e.linkapi,"/").concat(a),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.error||e.setAddresses((function(e){return Object(L.a)({},e,{isFetched:!1})}))}));var a}}))})))})))))};var me=function(e){var t=Object(n.useState)({data:[],isFetched:!1}),a=Object(h.a)(t,2),c=a[0],i=a[1],l=I.endPoint;return Object(n.useEffect)((function(){c.isFetched||fetch("".concat(l,"/article/owner"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?e.error:i((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[c,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{isMediumWindow:e.isMediumWindow,title:"Mes Annonces"}),c.data.length>0?r.a.createElement(oe,{data:c.data,linkdetail:"/announce",datatodisplay:{title:"Titre",date_register:"Date d'enregistrement",price:"Tarif",seemore:"Voir"}}):r.a.createElement("p",null,"Vous n'avez pas encore d'annonces publi\xe9s"))};function ue(e){return r.a.createElement("div",{className:e.divClass},r.a.createElement("input",{type:"submit",value:"Envoyer",className:e.inputClass}))}ue.defaultProps={divClass:"col-12 form-group my-3",inputClass:"btn text-white bgcolor3c8ce4"};var de=ue;function pe(e){return r.a.createElement("form",{className:e.class,onSubmit:e.handleSubmit,autoComplete:"off"},e.titlepage&&r.a.createElement("h4",{className:"titlepage col-12"},e.titlepage),e.isSuccess?r.a.createElement("p",{className:"bg-success text-white text-center p-2 w-100"},e.successMessage):!e.isFailed||r.a.createElement("p",{className:"bg-danger text-white text-center p-2 w-100"},e.failMessage),e.children,r.a.createElement(de,null))}pe.defaultProps={class:"row mx-auto text-center widthform py-md-2"};var fe=pe,be=a(8),ge=a.n(be);function he(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(h.a)(l,2),o=s[0],m=s[1];return r.a.createElement("div",{className:e.divclass},e.errorGrasp&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Veuillez saisir votre recherche en un mot en toute lettre puis s\xe9lectionner une proposition sur la liste d\xe9roulante"),r.a.createElement("div",{className:"position-relative"},e.idParams?r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},e.titleLabel," :"),r.a.createElement("p",{className:"col-9 col-sm-6 col-md-5 m-0"},e.grasp)):r.a.createElement(ce,{label:"".concat(e.titleLabel," :"),name:"owner",type:"text",labelClass:e.labelClass,inputClass:"form-control col-9 col-sm-6 col-md-5",value:e.grasp,change:function(t){var a;e.setGrasp(t.target.value),a=t.target.value,fetch("".concat(e.link,"/").concat(a),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i(e.data)})),m(!0),e.setId(""),e.setErrorGrasp(!0),e.setSpec&&e.setSpec()}}),o&&""!==e.grasp&&r.a.createElement("ul",{className:"list-unstyled bg-secondary text-white autocomplete"},c.map((function(t){return t.clientId?r.a.createElement("li",{className:"p-1 border-black listcomplete",key:t._id,onClick:function(){e.setGrasp("".concat(t.lastName," ").concat(t.firstName)),m(!1),e.setId(t._id),e.setErrorGrasp(!1)}},"".concat(t.clientId," ").concat(t.lastName," ").concat(t.firstName)):!t.articleId||r.a.createElement("li",{className:"p-1 border-black listcomplete",key:t._id,onClick:function(){e.setGrasp("".concat(t.title)),m(!1),e.setId(t._id),e.setErrorGrasp(!1)}},"".concat(t.articleId," ").concat(t.title))})))))}he.defaultProps={divclass:"col-12"};var Ee=he;var je=function(e){var t=Object(n.useContext)(D).dataUser,a=I.endPoint;return Object(n.useEffect)((function(){t.adminLevel||(e.setErrorGrasp(!1),e.setOwner(t.id))}),[t,e]),r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:e.titlepage&&"".concat(e.titlepage," une adresse"),isFailed:e.form.isFailed,isSuccess:e.form.isSuccess,successMessage:"Adresse ".concat(e.form.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},e.history&&r.a.createElement("i",{className:"ri-arrow-go-back-line go-back-my-account ri-lg position-absolute",onClick:function(){return e.history.goBack()}}),t.adminLevel&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-4 mt-2"},"Etat :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),r.a.createElement(Ee,{errorGrasp:e.errorGrasp,idParams:e.idParams,grasp:e.grasp,titleLabel:"Propri\xe9taire",setGrasp:e.setGrasp,setId:e.setOwner,setErrorGrasp:e.setErrorGrasp,link:"".concat(a,"/user/all")})),r.a.createElement(ce,{label:"Titre de l'adresse :",name:"title",type:"text",containerClass:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto mt-5",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 5 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(ce,{label:"Adresse :",name:"address",type:"text",value:e.address,change:function(t){e.setAddress(t.target.value)},errorcondition:e.errorAddress&&e.isSubmit,errormessage:"Ce champ doit contenir entre 10 et 80 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(ce,{label:"Code postal :",name:"zipcode",type:"number",value:e.zipCode,change:function(t){e.setZipCode(t.target.value)},errorcondition:e.errorZipCode&&e.isSubmit,errormessage:"Ce champ doit contenir entre 4 et 5 caract\xe8res num\xe9riques"}),r.a.createElement(ce,{label:"Ville :",name:"city",type:"text",value:e.city.value,change:function(t){e.setCity({value:t.target.value})},errorcondition:e.city.error&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 50 caract\xe8res, et sans caract\xe8res sp\xe9ciaux ni chiffre"}),r.a.createElement(ce,{label:"Pays :",name:"country",type:"text",value:e.country,change:function(t){e.setCountry(t.target.value)},errorcondition:e.errorCountry&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 20 caract\xe8res, et sans caract\xe8res sp\xe9ciaux ni chiffre"}))};var ve=function(e){var t=I.endPoint,a=Object(n.useState)("enregistr\xe9e"),c=Object(h.a)(a,2),i=c[0],l=c[1],s=Object(n.useState)(!1),o=Object(h.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(0),p=Object(h.a)(d,2),f=p[0],b=p[1],g=Object(n.useState)(!1),E=Object(h.a)(g,2),j=E[0],v=E[1],O=Object(n.useState)({isSuccess:!1,isFailed:!1,error:!1,statusMessageForm:"enregistr\xe9e",numberError:0}),y=Object(h.a)(O,2),x=y[0],N=y[1],S=Object(n.useState)(""),w=Object(h.a)(S,2),k=w[0],C=w[1],P=Object(n.useState)(""),D=Object(h.a)(P,2),T=D[0],_=D[1],A=Object(n.useState)(!1),M=Object(h.a)(A,2),F=M[0],Y=M[1],U=Object(n.useState)(""),z=Object(h.a)(U,2),R=z[0],V=z[1],B=Object(n.useState)(!1),W=Object(h.a)(B,2),J=W[0],Z=W[1],$=Object(n.useState)(""),q=Object(h.a)($,2),Q=q[0],H=q[1],K=Object(n.useState)(!1),X=Object(h.a)(K,2),ee=X[0],te=X[1],ae=Object(n.useState)({value:"",error:!1}),ne=Object(h.a)(ae,2),re=ne[0],ce=ne[1],ie=Object(n.useState)(""),le=Object(h.a)(ie,2),se=le[0],oe=le[1],me=Object(n.useState)(!1),ue=Object(h.a)(me,2),de=ue[0],pe=ue[1],fe=Object(n.useState)(!1),be=Object(h.a)(fe,2),ge=be[0],he=be[1],Ee=Object(n.useState)(!0),ve=Object(h.a)(Ee,2),Oe=ve[0],ye=ve[1],xe=Object(n.useState)(!0),Ne=Object(h.a)(xe,2),Se=Ne[0],we=Ne[1],ke=Object(n.useState)(!1),Ce=Object(h.a)(ke,2),Pe=Ce[0],De=Ce[1],Te=Object(n.useState)(""),_e=Object(h.a)(Te,2),Ae=_e[0],Me=_e[1],Fe=Object(n.useState)("POST"),Le=Object(h.a)(Fe,2),Ie=Le[0],Ye=Le[1],Ue=Object(n.useState)(Object(G.h)().id),ze=Object(h.a)(Ue,1)[0],Ge=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/),Re=new RegExp(/^[a-zA-Z\s-\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/),Ve=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(Ve.current=!1,b(0),(!x.error||!m)&&Pe){var a=JSON.stringify({isActive:Se,id_user:k,title:T,address:R,zipcode:Q,city:re.value,country:se}),n="POST"===Ie?"".concat(t,"/address"):"".concat(t,"/address/").concat(ze);fetch(n,{method:Ie,headers:{"Content-Type":"application/json"},credentials:"include",body:a}).then((function(e){return e.json()})).then((function(t){De(!1),t.error?(N((function(e){return Object(L.a)({},e,{isFailed:!0})})),setTimeout((function(){!Ve.current&&N((function(e){return Object(L.a)({},e,{isFailed:!1})}))}),800)):(N((function(e){return Object(L.a)({},e,{isSuccess:!0})})),setTimeout((function(){!Ve.current&&N((function(e){return Object(L.a)({},e,{isSuccess:!1})}))}),800),"POST"===Ie&&(_(""),V(""),H(""),ce({value:""}),oe(""),Me("")),e.setAddresses&&e.setAddresses((function(e){return Object(L.a)({},e,{isFetched:!1})})))}))}return ze&&!j&&"add"!==ze&&(Ye("PUT"),l("modifi\xe9e"),fetch("".concat(t,"/address/detail/").concat(ze),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error&&e.history)return e.history.push("/admin/addresses")}else v(!0),ye(!1),Me("".concat(t.data.id_user.firstName," ").concat(t.data.id_user.lastName)),V(t.data.address),_(t.data.title),H(t.data.zipcode),ce({value:t.data.city}),oe(t.data.country),we(t.data.isActive),C(t.data.id_user._id)}))),Oe&&b((function(e){return e+1})),!Ge.test(T)||""===T||T.length<5||T.length>30?(Y(!0),b((function(e){return e+1}))):Y(!1),!Ge.test(R)||""===R||R.length<10||R.length>80?(Z(!0),b((function(e){return e+1}))):Z(!1),!Re.test(re.value)||""===re.value||re.value.length<3||re.value.length>50?(re.error||ce((function(e){return Object(L.a)({},e,{error:!0})})),b((function(e){return e+1}))):re.error&&ce((function(e){return Object(L.a)({},e,{error:!1})})),!Re.test(se)||""===se||se.length<3||se.length>20?(pe(!0),b((function(e){return e+1}))):pe(!1),0===Q||""===Q||typeof Q===String||Q>99999||Q<0||Q.length<4||Q.length>5?(te(!0),b((function(e){return e+1}))):te(!1),f>0?(x.error||N((function(e){return Object(L.a)({},e,{error:!0})})),u(!0)):(x.error&&N((function(e){return Object(L.a)({},e,{error:!1})})),u(!1)),function(){Ve.current=!0}}),[ze,f,Ge,Re,T,R,re,se,Q,Oe,j,x,e.history,k,m,Se,Pe,Ie,e,t]),r.a.createElement(je,{history:e.history,form:x,titlepage:e.title,errorGrasp:Oe,isActive:Se,isShow:ge,setIsShow:he,setIsActive:we,handleSubmit:function(e){e.preventDefault(),De(!0)},isSubmit:Pe,idParams:ze,statusMessageForm:i,grasp:Ae,setGrasp:Me,setOwner:C,setErrorGrasp:ye,title:T,setTitle:_,errorTitle:F,address:R,setAddress:V,errorAddress:J,zipCode:Q,setZipCode:H,errorZipCode:ee,city:re,setCity:ce,country:se,setCountry:oe,errorCountry:de})};var Oe=function(e){var t=Object(G.h)().id,a=Object(n.useState)({data:[],isFetched:!1,id:t}),c=Object(h.a)(a,2),i=c[0],l=c[1],s=I.endPoint;return Object(n.useEffect)((function(){i.isFetched||fetch("".concat(s,"/address/allself"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))})),t!==i.id&&l((function(e){return Object(L.a)({},e,{id:t})}))}),[i,t,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{isMediumWindow:e.isMediumWindow,title:"Mes Adresses"}),i.id?r.a.createElement(ve,{setAddresses:l,history:e.history}):r.a.createElement(r.a.Fragment,null,i.data.length>0?r.a.createElement(oe,{data:i.data,linkdetail:"/my_account/addresses",handleIdParams:function(e){l((function(t){return Object(L.a)({},t,{id:e})}))},linkapi:"".concat(s,"/address"),setAddresses:l,datatodisplay:{title:"Titre",address:"Adresse",zipcode:"Code postal",city:"Ville",date_register:"Date d'enregistrement",seemore:"Voir",delete:"Supprimer"}}):r.a.createElement("p",null,"Vous n'avez pas encore d'adresses publi\xe9s"),r.a.createElement(f.b,{to:"addresses/add"},r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4"},"Ajouter une adresse"))))};var ye=function(e){var t=e.datarental,a=t.rentalId,n=t.date_register,c=t.start_date,i=t.end_date,l=t.id_carrier,s=t.id_payment,o=t.id_article,m=t.isActive,u=t.total_price;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"subtitle-profil text-left mb-4 color3c8ce4 mt-5"},"Location N\xb0 ",a),r.a.createElement("i",{className:"ri-arrow-go-back-line go-back-my-account ri-lg position-absolute",onClick:function(){return e.history.goBack()}}),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de commande : ",B()(n).format("DD-MM-YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6"},"Prix total : ",u," \u20ac")),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Article : ",o&&o.title),r.a.createElement("p",{className:"col-12 col-sm-6"},"Etat : ",m?"Active":"Annul\xe9e")),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de d\xe9but : ",B()(c).format("DD-MM-YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de fin : ",B()(i).format("DD-MM-YYYY"))),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Livraison : ",l&&l.title),r.a.createElement("p",{className:"col-12 col-sm-6"},"Paiement : ",s&&s.title)))};var xe=function(e){var t=Object(G.h)().id,a=I.endPoint,c=Object(n.useState)({data:[],isFetched:!1,id:t,dataRental:{}}),i=Object(h.a)(c,2),l=i[0],s=i[1];return Object(n.useEffect)((function(){l.isFetched||fetch("".concat(a,"/rental/self"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||s((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))})),l.id&&0===Object.keys(l.dataRental).length&&fetch("".concat(a,"/rental/detail/").concat(l.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||s((function(t){return Object(L.a)({},t,{dataRental:e.data})}))})),t!==l.id&&s((function(e){return Object(L.a)({},e,{id:t,dataRental:{}})}))}),[l,t,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{isMediumWindow:e.isMediumWindow,title:"Mes Locations"}),l.data.length>0&&!l.id?r.a.createElement(oe,{data:l.data,linkdetail:"/my_account/rentals",handleIdParams:function(e){s((function(t){return Object(L.a)({},t,{id:e})}))},datatodisplay:{rentalId:"N\xb0 de location",id_article:"Article",id_payment:"Paiement",id_carrier:"Livraison",date_register:"Date de commande",total_price:"Prix total",seemore:"Voir"}}):l.id?r.a.createElement(ye,{datarental:l.dataRental,history:e.history}):r.a.createElement("p",null,"Vous n'avez pas encore de location"))};var Ne=function(){var e=Object(n.useState)(),t=Object(h.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),l=Object(h.a)(i,2),s=l[0],o=l[1],m=Object(G.g)(),u=Object(n.useRef)(null),d=I.endPoint,p=function(){u.current||(window.innerWidth<768?c(!0):c(!1))};function f(e){o(e),"logout"===e?m.push("/".concat(e)):m.push("/my_account/".concat(e))}return Object(n.useEffect)((function(){return u.current=!1,u.current||p(),"/my_account/rentals"===m.location.pathname?o("rentals"):"/my_account/announces"===m.location.pathname?o("announces"):"/my_account/addresses"===m.location.pathname?o("addresses"):"/my_account"===m.location.pathname&&o(""),function(){u.current=!0}}),[a,m]),window.addEventListener("resize",p),r.a.createElement("div",{className:"col-12 col-lg-10 mx-auto"},r.a.createElement("div",{className:"row mx-auto d-flex justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4 col-lg-3 text-center"},a?r.a.createElement("select",{className:"custom-select w-75 mx-auto",value:s,onChange:function(e){return f(e.target.value)}},r.a.createElement("option",{value:""},"Informations"),r.a.createElement("option",{value:"announces"},"Mes Annonces"),r.a.createElement("option",{value:"addresses"},"Mes Adresses"),r.a.createElement("option",{value:"rentals"},"Mes locations")):r.a.createElement("ul",{className:"list-unstyled mt-5"},r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return f("")}},"Informations"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return f("announces")}},"Mes Annonces"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return f("addresses")}},"Mes Adresses"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return f("rentals")}},"Mes locations"),r.a.createElement("li",{className:"p-2 text-center text-danger menu-link-account",onClick:function(){return f("logout")}},"D\xe9connexion"))),r.a.createElement("div",{className:"col-12 col-md-8 col-lg-9 container-myaccount p-0 position-relative"},r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/my_account"},r.a.createElement(ne,{isMediumWindow:a,component:se,pageifnotauth:"/login",linkAuth:"".concat(d,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/my_account/announces"},r.a.createElement(ne,{isMediumWindow:a,component:me,pageifnotauth:"/login",linkAuth:"".concat(d,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/my_account/addresses/:id?"},r.a.createElement(ne,{isMediumWindow:a,component:Oe,pageifnotauth:"/login",linkAuth:"".concat(d,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/my_account/rentals/:id?"},r.a.createElement(ne,{isMediumWindow:a,component:xe,pageifnotauth:"/login",linkAuth:"".concat(d,"/authenticationuser")}))))))};function Se(e){return r.a.createElement(r.a.Fragment,null,e.errorFile>0&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},e.errorMessage),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},e.label," :"),r.a.createElement("input",{type:"file",name:e.name,reset:e.reset,multiple:e.isMultiple,className:"form-control-file col-9 col-sm-6 col-md-5",onChange:e.setPicture})))}Se.defaultProps={label:"Images",anme:"file"};var we=Se;function ke(e){var t=I.endPointImage;return r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:e.titlepage?"".concat(e.titlepage," utilisateur"):"Inscription",isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Utilisateur enregistr\xe9 avec succ\xe9s",failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},"/inscription"!==e.pathname&&(""!==e.pictureDisplay&&void 0!==e.pictureDisplay?r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/").concat(e.pictureDisplay),className:"w-100 rounded-circle",alt:"avatar_image_profil"}))):r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/default-avatar.png"),className:"w-100 rounded-circle",alt:"avatar_image_profil"})))),r.a.createElement(we,{errorPicture:e.errorPicture,isSubmit:e.isSubmit,reset:e.picture,setPicture:function(t){e.setPicture(t.target.files)},label:"Photo de profil",errorMessage:"Seule une image sous le format png ou jpg/jpeg est accept\xe9",isMultiple:!0}),r.a.createElement("div",{className:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto text-center"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Titre :"),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-5"},r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-2",checked:"mr"===e.gender,id:"mr",key:"mr",onChange:function(){return e.setGender("mr")}})),r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-2",id:"mrs",key:"mrs",checked:"mrs"===e.gender,onChange:function(){return e.setGender("mrs")}})))),r.a.createElement(ce,{label:"Nom :",name:"lastname",type:"text",value:e.lastName,change:function(t){e.handleName(t)},errorcondition:e.errorLastName&&e.isSubmit,errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement(ce,{label:"Pr\xe9nom :",name:"firstname",type:"text",value:e.firstName,change:function(t){e.handleName(t)},errorcondition:e.errorFirstName&&e.isSubmit,errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),e.errorDateBirth&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100 p-2"},"Veuillez s\xe9lectionner une date"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Date de naissance :"),r.a.createElement("input",{type:"date",name:"datebirth",min:"1940-01-01",max:"2010-01-01",value:e.dateBirth&&B()(e.dateBirth).format("YYYY-MM-DD"),className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){""===t.target.value?e.setDateBirth():e.setDateBirth(t.target.value)}})),r.a.createElement(ce,{label:"Email :",name:"email",type:"email",value:e.email,change:function(t){e.setEmail(t.target.value)},errorcondition:e.errorMail&&e.isSubmit,errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ce,{label:"Mot de passe :",name:"password",type:"password",value:e.password,change:function(t){e.setPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorPassword&&e.isSubmit:e.errorPassword,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ce,{label:"Confirmation :",name:"passwordconf",type:"password",value:e.confirmationPassword,change:function(t){e.setConfirmationPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorConfirmation&&e.isSubmit:e.errorConfirmation,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Inscription \xe0 la newsletter :"),r.a.createElement("div",{className:"col-6 col-md-5"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Oui"),r.a.createElement("input",{type:"radio",name:"issubscribe",checked:e.isSubscribe,id:"subscribe",key:"subscribe",onChange:function(){return e.setIsSubscribe(!0)}}),r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Non"),r.a.createElement("input",{type:"radio",name:"issubscribe",id:"notsubscribe",key:"notsubscribe",checked:!e.isSubscribe,onChange:function(){return e.setIsSubscribe(!1)}}))))}ke.defaultProps={dateBirth:""};var Ce=ke;var Pe=function(e){var t=Object(n.useState)("POST"),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)("mr"),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(""),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(),S=Object(h.a)(N,2),w=S[0],k=S[1],C=Object(n.useState)(!1),P=Object(h.a)(C,2),D=P[0],T=P[1],_=Object(n.useState)(""),A=Object(h.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),Y=Object(h.a)(L,2),U=Y[0],z=Y[1],R=Object(n.useState)(""),V=Object(h.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(!1),Z=Object(h.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(""),H=Object(h.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)(""),te=Object(h.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(h.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(0),oe=Object(h.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(!1),pe=Object(h.a)(de,2),fe=pe[0],be=pe[1],ge=Object(n.useState)(!1),he=Object(h.a)(ge,2),Ee=he[0],je=he[1],ve=Object(n.useState)(!1),Oe=Object(h.a)(ve,2),ye=Oe[0],xe=Oe[1],Ne=Object(n.useState)(!1),Se=Object(h.a)(Ne,2),we=Se[0],ke=Se[1],Pe=Object(n.useState)(!1),De=Object(h.a)(Pe,2),Te=De[0],_e=De[1],Ae=Object(n.useState)(!1),Me=Object(h.a)(Ae,2),Fe=Me[0],Le=Me[1],Ie=Object(n.useState)(!1),Ye=Object(h.a)(Ie,2),Ue=Ye[0],ze=Ye[1],Ge=Object(n.useState)(!1),Re=Object(h.a)(Ge,2),Ve=Re[0],Be=Re[1],We=Object(n.useState)(Object(G.h)().id),Je=Object(h.a)(We,1)[0],Ze=new FormData,$e=I.endPoint;return Object(n.useEffect)((function(){le(!1),Je&&"PUT"!==c&&(i("PUT"),fetch("".concat($e,"/user/").concat(Je),{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/users")}else m(t.gender.toLowerCase()),j(t.lastName),x(t.firstName),k(t.date_birth),F(t.email),f(t.isSubscribe),W(t.path_picture)}))),ue(0);var t=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),a=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),n=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);if(1===Object.keys(U).length)for(var r=0;r<U.length;r++)"image/png"!==U[r].type&&"image/jpeg"!==U[r].type?(q(!0),ue((function(e){return e+1}))):(q(!1),Ze.append("file".concat(r),U[r]));else Object.keys(U).length>1&&(q(!0),ue((function(e){return e+1})));t.test(E)&&""!==E?be(!1):(be(!0),ue((function(e){return e+1}))),t.test(y)&&""!==y?je(!1):(je(!0),ue((function(e){return e+1}))),w||"POST"!==c?T(!1):(T(!0),ue((function(e){return e+1}))),a.test(M)&&""!==M?xe(!1):(xe(!0),ue((function(e){return e+1}))),!n.test(K)&&""!==K||""===K&&"POST"===c?(ke(!0),ue((function(e){return e+1}))):ke(!1),ae!==K||""===ae&&"POST"===c?(_e(!0),ue((function(e){return e+1}))):_e(!1),le(me>0)}),[me,E,y,M,K,ae,Je,c,Ze,w,U,e.history,$e]),r.a.createElement(Ce,{isSuccess:Ue,isFailed:Ve,handleSubmit:function(t){t.preventDefault(t),Le(!0),Ze.append("gender",o),Ze.append("lastName",E),Ze.append("firstName",y),Ze.append("date_birth",w),Ze.append("email",M),Ze.append("isSubscribe",p),""!==K&&Ze.append("password",K);var a="POST"===c?"".concat($e,"/user"):"".concat($e,"/user/").concat(Je);ie||fetch(a,{method:c,credentials:"include",body:Ze}).then((function(e){return e.json()})).then((function(t){t.error?t.error&&(Be(!0),setTimeout((function(){Be(!1)}),1500)):(ze(!0),setTimeout((function(){ze(!1)}),1500),"/inscription"===e.location.pathname&&setTimeout((function(){return e.history.push("/login")}),2e3),"POST"===c?(m(""),j(""),x(""),k(""),F(""),X(""),ne(""),z(""),f(!1)):(W(t.picture),X(""),ne("")),Le(!1))}))},gender:o,lastName:E,firstName:y,dateBirth:w,email:M,password:K,confirmationPassword:ae,setDateBirth:k,setEmail:F,setPassword:X,setConfirmationPassword:ne,setGender:m,handleName:function(e){"lastname"===e.target.name?j(e.target.value):x(e.target.value)},errorLastName:fe,errorFirstName:Ee,errorMail:ye,errorPassword:we,errorConfirmation:Te,isSubscribe:p,setIsSubscribe:f,titlepage:e.title,isSubmit:Fe,method:c,picture:U,setPicture:z,errorPicture:$,pictureDisplay:B,setPictureDisplay:W,pathname:e.location.pathname,errorDateBirth:D})};function De(e){return r.a.createElement(r.a.Fragment,null,e.errorDescription&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},e.errorMessage),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:e.labelClass},e.label),r.a.createElement("textarea",{type:"text",name:"description",rows:"5",value:e.description,className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){e.setDescription(t.target.value)}})))}De.defaultProps={labelClass:"col-9 col-sm-4 mt-2"};var Te=De;var _e=function(e){var t=Object(n.useContext)(D).dataUser,a=I.endPoint,c=I.endPointImage;return Object(n.useEffect)((function(){t.adminLevel||(e.setErrorGrasp(!1),e.setOwner(t.id))}),[t,e]),r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une annonce"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Article ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},t.adminLevel&&r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),e.pictureDisplay&&e.pictureDisplay.length>0&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},e.pictureDisplay.map((function(e){return r.a.createElement("div",{className:"col-4 col-sm-4 p-2 col-md-3 mx-auto",key:e.title},r.a.createElement("img",{src:"".concat(c,"/").concat(e.path_picture),className:"w-100",alt:""}))}))),e.errorCategory&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Veuillez s\xe9lectionner une cat\xe9gorie"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Cat\xe9gorie :"),r.a.createElement("select",{name:"id_category",id:"category",className:"form-control col-9 col-sm-6 col-md-5",value:e.idCategory,onChange:function(t){return e.setIdCategory(t.target.value)}},r.a.createElement("option",{value:""},"--Veuillez choisir une cat\xe9gorie--"),e.category.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))),t.adminLevel&&r.a.createElement(Ee,{errorGrasp:e.errorGrasp,idParams:e.idParams,labelClass:"col-9 col-sm-4 mt-2",grasp:e.grasp,titleLabel:"Propri\xe9taire",setGrasp:e.setGrasp,setId:e.setOwner,setErrorGrasp:e.setErrorGrasp,link:"".concat(a,"/user/all")}),r.a.createElement(ce,{label:"Titre :",name:"title",labelClass:"col-9 col-sm-4 mt-2",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res"}),r.a.createElement(Te,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 250 caract\xe8res",label:"Description :"}),e.errorPrice&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Veuillez saisir un prix valide compris entre 0 et 2000"),r.a.createElement(ce,{label:"Tarif \u20ac/jr :",name:"price",labelClass:"col-9 col-sm-4 mt-2",type:"number",value:e.price,change:function(t){e.setPrice(t.target.value)}}),r.a.createElement(we,{errorFile:e.errorFile,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"L'article doit contenir 3 images sous le format png ou jpg/jpeg",isMultiple:!0}))};var Ae=function(e){var t=I.endPoint,a=Object(n.useState)("POST"),c=Object(h.a)(a,2),i=c[0],l=c[1],s=Object(n.useState)(!1),o=Object(h.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(h.a)(d,2),f=p[0],b=p[1],g=Object(n.useState)(!1),E=Object(h.a)(g,2),j=E[0],v=E[1],O=Object(n.useState)(!1),y=Object(h.a)(O,2),x=y[0],N=y[1],S=Object(n.useState)(!1),w=Object(h.a)(S,2),k=w[0],C=w[1],P=Object(n.useState)([]),D=Object(h.a)(P,2),T=D[0],_=D[1],A=Object(n.useState)(""),M=Object(h.a)(A,2),F=M[0],L=M[1],Y=Object(n.useState)(0),U=Object(h.a)(Y,2),z=U[0],R=U[1],V=Object(n.useState)(""),B=Object(h.a)(V,2),W=B[0],J=B[1],Z=Object(n.useState)(""),$=Object(h.a)(Z,2),q=$[0],Q=$[1],H=Object(n.useState)(""),K=Object(h.a)(H,2),X=K[0],ee=K[1],te=Object(n.useState)(""),ae=Object(h.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(""),ie=Object(h.a)(ce,2),le=ie[0],se=ie[1],oe=Object(n.useState)(0),me=Object(h.a)(oe,2),ue=me[0],de=me[1],pe=Object(n.useState)([]),fe=Object(h.a)(pe,2),be=fe[0],ge=fe[1],he=Object(n.useState)(""),Ee=Object(h.a)(he,2),je=Ee[0],ve=Ee[1],Oe=Object(n.useState)(!1),ye=Object(h.a)(Oe,2),xe=ye[0],Ne=ye[1],Se=Object(n.useState)(!1),we=Object(h.a)(Se,2),ke=we[0],Ce=we[1],Pe=Object(n.useState)(!1),De=Object(h.a)(Pe,2),Te=De[0],Ae=De[1],Me=Object(n.useState)(!1),Fe=Object(h.a)(Me,2),Le=Fe[0],Ie=Fe[1],Ye=Object(n.useState)(!1),Ue=Object(h.a)(Ye,2),ze=Ue[0],Ge=Ue[1],Re=Object(n.useState)(!1),Ve=Object(h.a)(Re,2),Be=Ve[0],We=Ve[1],Je=Object(n.useState)(!0),Ze=Object(h.a)(Je,2),$e=Ze[0],qe=Ze[1],Qe=Object(n.useState)("enregistr\xe9"),He=Object(h.a)(Qe,2),Ke=He[0],Xe=He[1],et=new FormData,tt=Object(n.useState)(Object(G.h)().id),at=Object(h.a)(tt,1)[0];return Object(n.useEffect)((function(){if(R(0),at&&!f&&(l("PUT"),Xe("modifi\xe9"),fetch("".concat(t,"/article/detail/").concat(at),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/articles")}else b(!0),L(t.data.id_category._id),de(t.data.price),ee(t.data.title),re(t.data.description),J("".concat(t.data.id_user.lastName," ").concat(t.data.id_user.firstName)),ge(t.data.pictures),C(t.data.isActive),qe(!1)}))),("POST"===i&&!m&&!at||"PUT"===i&&f&&!m)&&fetch("https://louonsapptest.herokuapp.com/louons/api/v1/category/all/activecategory",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(_(e.data),u(!0))})),X.length<3||X.length>30?(Ae(!0),R((function(e){return e+1}))):Ae(!1),3===Object.keys(je).length){for(var a=0,n=0;n<je.length;n++)"image/png"!==je[n].type&&"image/jpeg"!==je[n].type?(a++,R((function(e){return e+1}))):et.append("file".concat(n),je[n]);We(a>0)}else"POST"!==i||at||(We(!0),R((function(e){return e+1})));$e&&R((function(e){return e+1})),""===F?(Ce(!0),R((function(e){return e+1}))):Ce(!1),0===ue||""===ue||typeof ue===String||ue>2e3||ue<0?(Ie(!0),R((function(e){return e+1}))):Ie(!1),ne.length<10||ne.length>150?(Ge(!0),R((function(e){return e+1}))):Ge(!1),Ne(z>0)}),[X,ne,F,z,m,ue,W,le,$e,je,et,at,f,Be,i,e.history,t]),r.a.createElement(_e,{titlepage:e.title||"Proposer",isSuccess:j,isFailed:x,isActive:k,setIsActive:C,grasp:W,setGrasp:J,owner:q,setOwner:Q,title:X,setTitle:ee,description:ne,setDescription:re,errorDescription:ze,idCategory:F,setIdCategory:L,price:ue,category:T,setPrice:de,handleSubmit:function(e){e.preventDefault();var a="POST"===i?"".concat(t,"/article"):"".concat(t,"/article/").concat(at);se(!0),et.append("title",X),et.append("description",ne),et.append("price",ue),et.append("isActive",k),"POST"===i&&et.append("id_user",q),et.append("id_category",F),xe||fetch(a,{method:i,credentials:"include",body:et}).then((function(e){return e.json()})).then((function(e){e.error?(N(!0),setTimeout((function(){return N(!1)}),2e3),'"id_user" is not allowed to be empty'===e.message&&qe(!0)):(v(!0),setTimeout((function(){v(!1)}),2e3),"POST"===i?(J(""),ee(""),re(""),de(0),Q(""),ve(""),L(""),se(!1)):e.pictures&&ge(e.pictures))}))},errorTitle:Te,errorCategory:ke,errorFile:Be,errorGrasp:$e,setErrorGrasp:qe,errorPrice:Le,setPicture:ve,isSubmit:le,pictureDisplay:be,idParams:at,statusMessageForm:Ke})};a(50);var Me=function(){var e=Object(n.useContext)(D).setLinkAuth,t=I.endPoint;return Object(n.useEffect)((function(){e("".concat(t,"/authenticationuser"))}),[e,t]),r.a.createElement(p,null,r.a.createElement(A,null),r.a.createElement("main",{className:"row widthmain mx-auto"},r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/"},r.a.createElement(z,null)),r.a.createElement(G.b,{exact:!0,path:"/announces",render:function(){return r.a.createElement($,null)}}),r.a.createElement(G.b,{exact:!0,path:"/announce/:id",render:function(){return r.a.createElement(J,null)}}),r.a.createElement(G.b,{exact:!0,path:"/categories/:title",render:function(e){return r.a.createElement(Z,e)}}),r.a.createElement(G.b,{path:"/my_account"},r.a.createElement(ne,{component:Ne,pageifnotauth:"/login",linkAuth:"".concat(t,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/post_announce"},r.a.createElement(ne,{component:Ae,pageifnotauth:"/login",linkAuth:"".concat(t,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/inscription",render:function(e){return r.a.createElement(Pe,e)}}),r.a.createElement(G.b,{exact:!0,path:"/order"},r.a.createElement(ne,{component:H,pageifnotauth:"/login",linkAuth:"".concat(t,"/authenticationuser")})),r.a.createElement(G.b,{exact:!0,path:"/logout",render:function(e){return r.a.createElement(X,Object.assign({},e,{redirect:"/"}))}}),r.a.createElement(G.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(K,Object.assign({linkapi:"".concat(t,"/authenticationuser"),redirect:"/my_account"},e))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))),r.a.createElement("div",{className:"fill"}),r.a.createElement(F,null))};var Fe=function(){var e=Object(n.useContext)(D).dataUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"titlepage"},"Bienvenue sur le panel de louons.fr"," ","".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/assets/img/welcome.jpg",className:"imagehome",alt:"welcome_panel"})))};var Le=function(e){var t=Object(n.useState)(e.isActive),a=Object(h.a)(t,2),c=a[0],i=a[1];return r.a.createElement(ge.a,{checked:c,onlabel:e.onlabel,offlabel:e.offlabel,size:"xs",width:"70",onChange:function(){e.change(),i(!c)}})},Ie=r.a.createContext();function Ye(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],i=a[1];return r.a.createElement(Ie.Provider,{value:{isToggle:c,setToggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!c;i(e)}}},e.children)}var Ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getList=function(){fetch(a.props.linkapi,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){a._isMounted&&(e.error?a.setState({isLoading:!1}):a.setState({listOfData:e.data,adminLevel:e.adminLevel,isLoading:!1}))}))},a.handleRequestFetch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a.setState({isLoadingUpdate:!0});var r=a.props.linkputapi||a.props.linkapi;fetch("".concat(r,"/").concat(e),{method:t,credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(e){e.error?"Not authorized admin level"===e.message&&(a.setState({isLoadingUpdate:!1,errorMessageAdminLevel:!0}),setTimeout((function(){a.setState({errorMessageAdminLevel:!1})}),1500)):a.setState({isLoadingUpdate:!1}),"DELETE"===t&&a.getList()}))},a.state={isLoading:!1,isLoadingUpdate:!1,errorMessageAdminLevel:!1,listOfTh:e.th,listOfData:[],adminLevel:""},a._isMounted=!1,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setState({isLoading:!0}),this.getList(),this.context&&this.context.setToggle(!1)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.listOfData,n=t.listOfTh,c=t.isLoading,i=t.isLoadingUpdate,l=t.adminLevel,s=t.errorMessageAdminLevel;return c?r.a.createElement("p",{className:"bg-success text-white p-2"},"Loading...."):r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("p",{className:"bg-danger text-white p-2"},"Vous n'avez pas les droits n\xe9cessaires pour effectuer cette action...."),r.a.createElement("h4",{className:"titlepage"},this.props.titlepage),i&&r.a.createElement("p",{className:"bg-success text-white p-2"},"Loading...."),r.a.createElement("div",{className:"text-right p-3"},this.props.titlebutton&&this.props.linkbutton?r.a.createElement(f.b,{to:"".concat(this.props.link,"/add")},r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4"},this.props.titlebutton)):r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4",onClick:function(){return e.context.setToggle(!e.context.isToggle)}},this.props.titlebutton)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,n.map((function(e,t){return e.delete&&"superadmin"===l?r.a.createElement("th",{className:"text-center",key:t},Object.values(e)):!!e.delete||r.a.createElement("th",{className:"text-center",key:t},Object.values(e))})))),r.a.createElement("tbody",null,a.map((function(t,a){return r.a.createElement("tr",{key:a},n.map((function(n){return Object.keys(n).map((function(n){return"seeMore"===n?r.a.createElement("td",{className:"text-center",key:"seemore".concat(a)},r.a.createElement(f.b,{key:"link".concat(a),to:"".concat(e.props.link,"/").concat(t._id)},"Voir")):"delete"===n&&"superadmin"===l?r.a.createElement("td",{className:"text-center",key:"delete".concat(a)},r.a.createElement("i",{className:"ri-delete-bin-6-fill ri-xl",onClick:function(){return e.handleRequestFetch(t._id,"DELETE")}})):"category"===n?r.a.createElement("td",{className:"text-center",key:"category".concat(a)},t.id_category.title):"price"===n?r.a.createElement("td",{className:"text-center",key:"price".concat(a)},"".concat(t.price," \u20ac")):"article"===n?r.a.createElement("td",{className:"text-center",key:"article".concat(a)},t.id_article.title):"user"===n?r.a.createElement("td",{className:"text-center",key:"user".concat(a)},"".concat(t.id_user.lastName," ").concat(t.id_user.firstName)):"address"===n?r.a.createElement("td",{className:"text-center",key:"user".concat(a)},"".concat(t.address," ").concat(t.zipcode," ").concat(t.city)):Object.keys(t).map((function(c){return n!==c||r.a.createElement("td",{key:a,className:"text-center"},"isSubscribe"===n?t[c]?"Oui":"Non":"isActive"===n?r.a.createElement(Le,{onlabel:"Actif",offlabel:"Inactif",isActive:t.isActive,id:t._id,change:function(){e.handleRequestFetch(t._id,"PUT",JSON.stringify({isActive:!t.isActive}))},handleIsActive:e.handleRequestFetch}):"isTop"===n?r.a.createElement(Le,{onlabel:"Top",offlabel:"Non",isActive:t.isTop,id:t._id,change:function(){e.handleRequestFetch(t._id,"PUT",JSON.stringify({isTop:!t.isTop}))},handleIsActive:e.handleRequestFetch}):"description"===n?"".concat(t.description.slice(0,30),"..."):"date_register"===n||"start_date"===n||"end_date"===n?B()(t[c]).format("DD/MM/YYYY"):t[c])}))}))})))}))))))}}]),t}(n.Component);Ue.contextType=Ie;var ze=Ue;var Ge=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des utilisateurs",linkapi:"".concat(e,"/user/all"),linkputapi:"".concat(e,"/user"),th:[{clientId:"ID"},{gender:"Titre"},{lastName:"Nom"},{firstName:"Pr\xe9nom"},{date_register:"Date d'inscription"},{isActive:"Activer"},{isSubscribe:"Newsletter"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un utilisateur",link:"users",linkbutton:!0})};var Re=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/users"},r.a.createElement(Ge,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/users/add",render:function(e){return r.a.createElement(Pe,Object.assign({},e,{title:"Ajouter un"}))}}),r.a.createElement(G.b,{exact:!0,path:"/admin/users/:id",render:function(e){return r.a.createElement(Pe,Object.assign({},e,{title:"Modifier un"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var Ve=function(e){var t=e.isToggle?"d-block":"d-none",a=Object(n.useContext)(Ie);return r.a.createElement("div",{className:"".concat(t," addpopupcontainer bgcolor9cd1ff")},r.a.createElement("div",{className:"d-flex justify-content-end p-2"},r.a.createElement("i",{className:"ri-close-circle-line ri-2x",onClick:function(){return a.setToggle(!a.isToggle)}})),e.render)};var Be=function(e){var t=Object(n.useContext)(Ie);return e.redirect&&window.location.reload(!1),r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:t.isToggle?"Ajouter une cat\xe9gorie":"Modifier une cat\xe9gorie",isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Article ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},!t.isToggle&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Active :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.handleFetchPut("isActive")}})),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Date de cr\xe9ation :"),r.a.createElement("p",{className:"m-0"},B()(e.dateRegister).format("DD-MM-YYYY")))),r.a.createElement(ce,{label:"Titre :",name:"title",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ ne peut pas contenir de chiffre ou \xeatre vide"}),r.a.createElement(ce,{label:"Lien :",value:e.link,name:"link",type:"text",change:function(t){e.setLink(t.target.value)},errorcondition:e.errorLink&&e.isSubmit,errormessage:"Ce champ ne peut pas contenir d'espace ou de chiffre ou \xeatre vide"}),e.errorDescription&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Ce champ doit contenir entre 10 et 150 caract\xe8res"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Description :"),r.a.createElement("textarea",{type:"text",name:"description",value:e.description,className:"form-control col-9 col-sm-6",onChange:function(t){e.setDescription(t.target.value)}})))};var We=function(e){var t=Object(n.useState)("GET"),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(""),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)("enregistr\xe9"),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(h.a)(N,2),w=S[0],k=S[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),D=P[0],T=P[1],_=Object(n.useState)(!1),A=Object(h.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),Y=Object(h.a)(L,2),U=Y[0],z=Y[1],R=Object(n.useState)(!1),V=Object(h.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(!1),Z=Object(h.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(0),H=Object(h.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)(!1),te=Object(h.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(h.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(!1),oe=Object(h.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(!1),pe=Object(h.a)(de,2),fe=pe[0],be=pe[1],ge=Object(G.h)().id,he=new RegExp(/[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),Ee=new RegExp(/^[a-zA-Z-]+$/),je=Object(n.useContext)(Ie),ve=I.endPoint;Object(n.useEffect)((function(){i("PUT"),X(0),"GET"===c&&ge&&(j("modifi\xe9"),fetch("".concat(ve,"/category/detail/").concat(ge),{method:c,credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/categories")}else x(t.data.title),T(t.data.link),z(t.data.description),m(t.data.isActive),f(t.data.date_register)}))),he.test(y)&&""!==y?k(!1):(k(!0),X((function(e){return e+1}))),Ee.test(D)&&""!==D?F(!1):(F(!0),X((function(e){return e+1}))),""===U||U.length<10||U.length>150?(W(!0),X((function(e){return e+1}))):W(!1),q(K>0)}),[ge,y,D,U,c,he,Ee,K,e.history,ve]);var Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";be(!0);var t="isActive"===e?JSON.stringify({isActive:!o}):JSON.stringify({title:y,description:U,link:D});!$||"isActive"===e&&ge?fetch("".concat(ve,"/category/").concat(ge),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:t}).then((function(e){return e.json()})).then((function(t){t.error?(le(!0),setTimeout((function(){le(!1)}),1500)):(ne(!0),setTimeout((function(){ne(!1)}),1500),"isActive"===e&&m(!o),be(!1))})):"isActive"!==e||ge||m(!o)},ye=function(){be(!0);var e=JSON.stringify({title:y,description:U,link:D,isActive:o});$||fetch("".concat(ve,"/category"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:e}).then((function(e){return e.json()})).then((function(e){e.error?(le(!0),setTimeout((function(){le(!1)}),1500)):(ne(!0),setTimeout((function(){ne(!1)}),1500),x(""),T(""),z(""),je.setToggle(!1),ue(!0),be(!1))}))};return r.a.createElement(Be,{description:U,setDescription:z,title:y,setTitle:x,handleSubmit:function(e){e.preventDefault(),je.isToggle?ye():Oe()},handleFetchPut:Oe,link:D,setLink:T,isActive:o,setIsActive:m,dateRegister:p,idParams:ge,isSuccess:ae,isFailed:ie,errorTitle:w,errorLink:M,errorDescription:B,redirect:me,isSubmit:fe,statusMessageForm:E})};var Je=function(){var e=Object(n.useContext)(Ie);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{isToggle:e.isToggle,render:r.a.createElement(We,{title:"Ajouter"})}),r.a.createElement(ze,{titlepage:"Liste des cat\xe9gories",linkapi:"https://louonsapptest.herokuapp.com/louons/api/v1/category/all",linkputapi:"https://louonsapptest.herokuapp.com/louons/api/v1/category",th:[{categoryId:"ID"},{title:"Titre"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une cat\xe9gorie",link:"categories"}))};var Ze=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/categories"},r.a.createElement(Je,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/categories/:id",render:function(e){return r.a.createElement(We,e)}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var $e=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des Articles",linkapi:"".concat(e,"/article"),th:[{articleId:"ID"},{title:"Titre"},{description:"Description"},{category:"Cat\xe9gorie"},{price:"Prix"},{isActive:"Etat"},{isTop:"Au top"},{seeMore:"Voir"},{date_register:"Date d'ajout"},{delete:"Supprimer"}],titlebutton:"Ajouter un article",link:"articles",linkbutton:!0})};var qe=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/articles"},r.a.createElement($e,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/articles/add"},r.a.createElement(Ae,{title:"Ajouter"})),r.a.createElement(G.b,{exact:!0,path:"/admin/articles/:id",render:function(e){return r.a.createElement(Ae,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var Qe=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des utilisateurs",linkapi:"".concat(e,"/rental"),th:[{rentalId:"ID"},{article:"Article"},{user:"Locataire"},{start_date:"Date de d\xe9but"},{end_date:"Date de fin"},{seeMore:"Voir"}],titlebutton:"Ajouter une location",link:"rentals",linkbutton:!0})};var He=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],i=a[1],l=I.endPoint;return Object(n.useEffect)((function(){e.idArticle||i("")}),[e.idArticle]),r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," location"),isFailed:e.isFailed,class:"row m-0 mx-auto col-12 col-xl-10 text-center py-md-2",isSuccess:e.isSuccess,successMessage:"Location ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},e.idParams&&r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement(Ee,{errorGrasp:e.errorGraspArticle&&e.isSubmit,idParams:e.idParams,grasp:e.graspArticle,titleLabel:"Article",divclass:"col-12 col-sm-8 col-lg-6 mx-auto",setGrasp:e.setGraspArticle,setId:e.setIdArticle,setErrorGrasp:e.setErrorGraspArticle,setSpec:e.reset,link:"".concat(l,"/article")}),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Prix /jr :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0 text-danger"},"".concat(e.pricePerDay," \u20ac"))),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0 "},"Prix Total :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0 text-danger font-weight-bold"},"".concat(e.totalPrice," \u20ac")))),e.idParams?r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Date de d\xe9but :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0"},B()(e.dateStart).format("DD-MM-YYYY"))),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Date de fin :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0"},B()(e.dateEnd).format("DD-MM-YYYY")))):r.a.createElement(ce,{label:"Nombre de jour de location :",name:"numberday",type:"number",value:e.numberListDate,change:function(t){e.setNumberListDate(t.target.value),0!==parseInt(t.target.value)&&""!==t.target.value||e.reset()},errorcondition:e.errorNumberListDate&&e.isSubmit,errormessage:"Le nombre de jour doit \xeatre sup\xe9rieur \xe0 0",inputClass:"form-control col-9 col-sm-3 col-md-1",labelClass:"col-9 col-sm-7"}),!e.errorNumberListDate&&!e.errorGraspArticle&&e.errorDate&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100 p-2"},"Veuillez s\xe9lectionner une date"),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement("ul",{className:"list-unstyled mx-auto"},e.listDate.length>0&&e.listDate.map((function(t,a){return r.a.createElement(W,{key:a,index:a,className:c===a?"bg-secondary text-white":"",setCurrLi:function(){return i(a)},dateStart:t.dateStart,dateEnd:t.dateEnd,setDateStart:function(){return e.setDateStart(B()(t.dateStart).format("YYYY-MM-DD"))},setDateEnd:function(){return e.setDateEnd(B()(t.dateEnd).format("YYYY-MM-DD"))}})})))),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},e.errorSameUser&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Erreur le propri\xe9taire de l'article ne peut pas \xeatre le locataire"),r.a.createElement("div",{className:"row m-0 col-12 col-md-6 align-items-center"},r.a.createElement("label",{className:"mx-auto col-9 col-sm-6"},"Propri\xe9taire :"),r.a.createElement("p",{className:"mx-auto col-9 col-sm-6 col-md-5 m-0"},e.owner)),r.a.createElement(Ee,{errorGrasp:e.errorGraspTenant&&e.isSubmit,idParams:e.idParams,grasp:e.graspTenant,titleLabel:"Locataire",divclass:"col-12 col-md-6",setGrasp:e.setGraspTenant,setId:e.setIdTenant,setErrorGrasp:e.setErrorGraspTenant,link:"".concat(l,"/user/all")})),e.errorDelivery&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Veuillez s\xe9lectionner un moyen de transport"),r.a.createElement("div",{className:"row m-0 form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Transport :"),r.a.createElement("select",{name:"id_delivery",id:"delivery",className:"p-1 col-9 col-sm-6 col-md-5",value:e.idDelivery,onChange:function(t){return e.setIdDelivery(t.target.value)}},r.a.createElement("option",{value:""},"--Transport--"),e.deliveries.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))),e.errorPayment&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Veuillez s\xe9lectionner un paiement"),r.a.createElement("div",{className:"row m-0 form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Paiement :"),r.a.createElement("select",{name:"id_payment",id:"payment",className:"p-1 col-9 col-sm-6 col-md-5",value:e.idPayment,onChange:function(t){return e.setIdPayment(t.target.value)}},r.a.createElement("option",{value:""},"--Paiement--"),e.payments.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))))};var Ke=function(e){var t=I.endPoint,a=Object(n.useState)("POST"),c=Object(h.a)(a,2),i=c[0],l=c[1],s=Object(n.useState)(!1),o=Object(h.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(h.a)(d,2),f=p[0],b=p[1],g=Object(n.useState)(!1),E=Object(h.a)(g,2),j=E[0],v=E[1],O=Object(n.useState)([]),y=Object(h.a)(O,2),x=y[0],N=y[1],S=Object(n.useState)(0),w=Object(h.a)(S,2),k=w[0],C=w[1],P=Object(n.useState)("enregistr\xe9"),D=Object(h.a)(P,2),T=D[0],_=D[1],A=Object(n.useState)(""),M=Object(h.a)(A,2),F=M[0],L=M[1],Y=Object(n.useState)(""),U=Object(h.a)(Y,2),z=U[0],R=U[1],V=Object(n.useState)(""),B=Object(h.a)(V,2),W=B[0],J=B[1],Z=Object(n.useState)(""),$=Object(h.a)(Z,2),q=$[0],Q=$[1],H=Object(n.useState)(""),K=Object(h.a)(H,2),X=K[0],ee=K[1],te=Object(n.useState)(0),ae=Object(h.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(0),ie=Object(h.a)(ce,2),le=ie[0],se=ie[1],oe=Object(n.useState)([]),me=Object(h.a)(oe,2),ue=me[0],de=me[1],pe=Object(n.useState)([]),fe=Object(h.a)(pe,2),be=fe[0],ge=fe[1],he=Object(n.useState)(""),Ee=Object(h.a)(he,2),je=Ee[0],ve=Ee[1],Oe=Object(n.useState)(""),ye=Object(h.a)(Oe,2),xe=ye[0],Ne=ye[1],Se=Object(n.useState)(""),we=Object(h.a)(Se,2),ke=we[0],Ce=we[1],Pe=Object(n.useState)(""),De=Object(h.a)(Pe,2),Te=De[0],_e=De[1],Ae=Object(n.useState)(""),Me=Object(h.a)(Ae,2),Fe=Me[0],Le=Me[1],Ie=Object(n.useState)(!1),Ye=Object(h.a)(Ie,2),Ue=Ye[0],ze=Ye[1],Ge=Object(n.useState)(!1),Re=Object(h.a)(Ge,2),Ve=Re[0],Be=Re[1],We=Object(n.useState)(!1),Je=Object(h.a)(We,2),Ze=Je[0],$e=Je[1],qe=Object(n.useState)(!1),Qe=Object(h.a)(qe,2),Ke=Qe[0],Xe=Qe[1],et=Object(n.useState)(!1),tt=Object(h.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)(!1),ct=Object(h.a)(rt,2),it=ct[0],lt=ct[1],st=Object(n.useState)(!1),ot=Object(h.a)(st,2),mt=ot[0],ut=ot[1],dt=Object(n.useState)(!1),pt=Object(h.a)(dt,2),ft=pt[0],bt=pt[1],gt=Object(n.useState)(!1),ht=Object(h.a)(gt,2),Et=ht[0],jt=ht[1],vt=Object(n.useState)(!1),Ot=Object(h.a)(vt,2),yt=Ot[0],xt=Ot[1],Nt=Object(n.useState)(0),St=Object(h.a)(Nt,2),wt=St[0],kt=St[1],Ct=Object(n.useState)(!1),Pt=Object(h.a)(Ct,2),Dt=Pt[0],Tt=Pt[1],_t=Object(n.useState)(!1),At=Object(h.a)(_t,2),Mt=At[0],Ft=At[1],Lt=Object(n.useState)(!1),It=Object(h.a)(Lt,2),Yt=It[0],Ut=It[1],zt=Object(G.h)().id;return Object(n.useEffect)((function(){wt>0&&kt(0),"POST"===i&&zt&&(l("PUT"),_("modifi\xe9")),zt||xt(!0),je&&yt&&fetch("".concat(t,"/article/detail/").concat(je),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(re(e.data.price),Q(e.data.id_user._id),ee("".concat(e.data.id_user.lastName," ").concat(e.data.id_user.firstName)))})),je&&k>0&&"POST"===i&&yt&&fetch("".concat(t,"/rental/date/").concat(je,"/").concat(k),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||N(e.data)})).catch((function(e){return console.log(e)})),!Dt&&yt&&fetch("".concat(t,"/carrier/all/activecarrier"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(de(e.data),Tt(!0))})),!Mt&&yt&&fetch("".concat(t,"/payment/all/activepayment"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(ge(e.data),Ft(!0))})),zt&&!Yt&&(l("PUT"),fetch("".concat(t,"/rental/detail/").concat(zt),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/rentals")}else Ut(!0),ve(t.data.id_article._id),J(t.data.id_user._id),R("".concat(t.data.id_user.clientId," ").concat(t.data.id_user.lastName," ").concat(t.data.id_user.firstName)),re(t.data.id_article.price),se(t.data.total_price),Ne(t.data.id_carrier._id),Ce(t.data.id_payment._id),L(t.data.id_article.title),u(t.data.isActive),_e(t.data.start_date),Le(t.data.end_date),xt(!0)}))),""===F&&ee(""),q===W&&""!==q?($e(!0),kt((function(e){return e+1}))):$e(!1),""===xe?(lt(!0),kt((function(e){return e+1}))):lt(!1),""===ke?(ut(!0),kt((function(e){return e+1}))):ut(!1),""===F||""===je?(Xe(!0),kt((function(e){return e+1}))):Xe(!1),""===z||""===W?(nt(!0),kt((function(e){return e+1}))):nt(!1),""!==Te&&""!==Fe||"POST"!==i?ze(!1):(ze(!0),kt((function(e){return e+1}))),(0===k||""===k||typeof k===String||k<0)&&!zt?(N([]),se(0),jt(!0),kt((function(e){return e+1}))):k&&F?(se(ne*k),jt(!1)):jt(!1),bt(wt>0)}),[je,yt,Dt,Mt,xe,k,q,W,ke,Te,Fe,wt,z,F,zt,i,Yt,ne,e.history,t]),r.a.createElement(He,{titlepage:e.title,isFailed:j,isSuccess:f,statusMessageForm:T,errorGraspArticle:Ke,errorGraspTenant:at,errorDelivery:it,errorPayment:mt,idParams:zt,graspArticle:F,graspTenant:z,setGraspArticle:L,setGraspTenant:R,setIdArticle:ve,setIdTenant:J,setErrorGraspArticle:Xe,setErrorGraspTenant:nt,totalPrice:le,owner:X,deliveries:ue,payments:be,idDelivery:xe,idPayment:ke,setIdDelivery:Ne,setIdPayment:Ce,isSubmit:Ve,handleSubmit:function(e){e.preventDefault(),Be(!0);var a="POST"===i?"".concat(t,"/rental"):"".concat(t,"/rental/").concat(zt),n="PUT"===i?JSON.stringify({id_payment:ke,id_carrier:xe,total_price:le,isActive:m}):JSON.stringify({id_payment:ke,id_carrier:xe,id_article:je,id_user:W,total_price:le,start_date:Te,end_date:Fe});ft||fetch(a,{method:i,credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(e){e.error?(v(!0),setTimeout((function(){v(!1)}),1500)):(b(!0),setTimeout((function(){b(!1)}),1500),"POST"===i&&(N([]),ve(""),Be(!1),L(""),R(""),J(""),Q(""),ee(""),Ne(""),Ce(""),_e(""),Le(""),re(0),se(0),C(0)))}))},errorSameUser:Ze,setDateStart:_e,setDateEnd:Le,listDate:x,reset:function(){Le(""),_e(""),N([])},setNumberListDate:C,numberListDate:k,errorNumberListDate:Et,errorDate:Ue,pricePerDay:ne,isActive:m,setIsActive:u,dateStart:Te,dateEnd:Fe})};var Xe=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/rentals"},r.a.createElement(Qe,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/rentals/add"},r.a.createElement(Ke,{title:"Cr\xe9er une"})),r.a.createElement(G.b,{exact:!0,path:"/admin/rentals/:id",render:function(e){return r.a.createElement(Ke,Object.assign({},e,{title:"Modifier une"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var et=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des adresses",linkapi:"".concat(e,"/address"),th:[{addressId:"ID"},{title:"Titre de l'adresse"},{user:"Utilisateur"},{address:"Adresse"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une adresse",link:"addresses",linkbutton:!0})};var tt=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/addresses"},r.a.createElement(et,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/addresses/add",render:function(e){return r.a.createElement(ve,Object.assign({},e,{title:"Ajouter"}))}}),r.a.createElement(G.b,{exact:!0,path:"/admin/addresses/:id",render:function(e){return r.a.createElement(ve,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var at=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des paiements",linkapi:"".concat(e,"/payment/all"),linkputapi:"".concat(e,"/payment"),th:[{paymentId:"ID"},{title:"Titre"},{description:"Description"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un paiement",link:"payments",linkbutton:!0})};var nt=function(e){var t=I.endPointImage;return r.a.createElement(fe,{successMessage:"Paiement ".concat(e.statusMessageForm," avec succ\xe9s"),handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une paiement"),isFailed:e.isFailed,isSuccess:e.isSuccess,failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),""!==e.pictureDisplay&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-6 col-sm-4 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/").concat(e.pictureDisplay),className:"w-100",alt:""}))),r.a.createElement(ce,{label:"Titre :",name:"title",type:"text",labelClass:"col-9 col-sm-4 mt-2",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(Te,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 200 caract\xe8res",label:"Description :"}),r.a.createElement(we,{errorFile:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"Un paiement doit contenir au moins une image sous le format png ou jpg/jpeg",isMultiple:!1}))};var rt=function(e){var t=Object(n.useState)("enregistr\xe9"),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(h.a)(N,2),w=S[0],k=S[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),D=P[0],T=P[1],_=Object(n.useState)(!1),A=Object(h.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),Y=Object(h.a)(L,2),U=Y[0],z=Y[1],R=Object(n.useState)(""),V=Object(h.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(""),Z=Object(h.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(0),H=Object(h.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)(!1),te=Object(h.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(h.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(!1),oe=Object(h.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)("POST"),pe=Object(h.a)(de,2),fe=pe[0],be=pe[1],ge=new FormData,he=Object(n.useState)(Object(G.h)().id),Ee=Object(h.a)(he,1)[0],je=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/),ve=I.endPoint;return Object(n.useEffect)((function(){if(X(0),Ee&&!E&&(be("PUT"),i("modifi\xe9"),fetch("".concat(ve,"/payment/detail/").concat(Ee),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/payments")}else j(!0),T(t.data.description),x(t.data.title),le(t.data.isActive),q(t.data.path_picture)}))),!je.test(y)||""===y||y.length<3||y.length>30?(k(!0),X((function(e){return e+1}))):k(!1),!je.test(D)||""===D||D.length<10||D.length>200?(F(!0),X((function(e){return e+1}))):F(!1),1===Object.keys(U).length)for(var t=0;t<U.length;t++)"image/png"!==U[t].type&&"image/jpeg"!==U[t].type?(W(!0),X((function(e){return e+1}))):(W(!1),ge.append("file".concat(t),U[t]));else"POST"!==fe||Ee||(W(!0),X((function(e){return e+1})));ne(K>0)}),[Ee,K,je,y,D,E,ge,fe,U,e.history,ve]),r.a.createElement(nt,{titlepage:e.title,isFailed:p,isSuccess:o,statusMessageForm:c,handleSubmit:function(e){e.preventDefault(),ue(!0),ge.append("title",y),ge.append("description",D),ge.append("isActive",ie);var t="POST"===fe?"".concat(ve,"/payment"):"".concat(ve,"/payment/").concat(Ee);ae||fetch(t,{method:fe,credentials:"include",body:ge}).then((function(e){return e.json()})).then((function(e){e.error?(f(!0),setTimeout((function(){f(!1)}),1500)):(m(!0),setTimeout((function(){m(!1)}),1500),z(""),"POST"===fe?(x(""),T(""),ue(!1),le(!1)):e.picture&&q(e.picture))}))},isActive:ie,setIsActive:le,title:y,setTitle:x,errorTitle:w,isSubmit:me,errorDescription:M,description:D,setDescription:T,errorPicture:B,picture:U,setPicture:z,pictureDisplay:$})};var ct=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/payments"},r.a.createElement(at,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/payments/add"},r.a.createElement(rt,{title:"Ajouter"})),r.a.createElement(G.b,{exact:!0,path:"/admin/payments/:id",render:function(e){return r.a.createElement(rt,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var it=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des livraisons",linkapi:"".concat(e,"/carrier/all"),linkputapi:"".concat(e,"/carrier"),th:[{carrierId:"ID"},{title:"Nom"},{description:"Description"},{delay_delivery:"D\xe9lai de livraison"},{price:"Prix"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une livraison",link:"deliveries",linkbutton:!0})};var lt=function(e){var t=I.endPointImage;return r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une livraison"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Livraison ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(ge.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),""!==e.pictureDisplay&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-6 col-sm-4 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/").concat(e.pictureDisplay),className:"w-100",alt:""}))),r.a.createElement(ce,{label:"Titre :",name:"title",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(Te,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,labelClass:"col-9 col-sm-6 mt-2",description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 200 caract\xe8res",label:"Description :"}),r.a.createElement(ce,{label:"Prix :",name:"price",type:"number",value:e.price,change:function(t){e.setPrice(t.target.value)},errorcondition:e.errorPrice&&e.isSubmit,errormessage:"Le prix doit \xeatre sup\xe9rieur \xe0 0 et ne peut pas exc\xe9der 500\u20ac"}),r.a.createElement(ce,{label:"D\xe9lai de livraison :",name:"delay",type:"number",value:e.delay,change:function(t){e.setDelay(t.target.value)},errorcondition:e.errorDelay&&e.isSubmit,errormessage:"Le d\xe9lai de livraison doit \xeatre compris entre 0 et 10"}),r.a.createElement(we,{errorFile:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"Une livraison doit contenir au moins une image sous le format png ou jpg/jpeg",isMultiple:!1}))};var st=function(e){var t=Object(n.useState)("enregistr\xe9"),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(h.a)(N,2),w=S[0],k=S[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),D=P[0],T=P[1],_=Object(n.useState)(!1),A=Object(h.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(0),Y=Object(h.a)(L,2),U=Y[0],z=Y[1],R=Object(n.useState)(!1),V=Object(h.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(0),Z=Object(h.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(!1),H=Object(h.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)(""),te=Object(h.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),ce=Object(h.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(""),oe=Object(h.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(0),pe=Object(h.a)(de,2),fe=pe[0],be=pe[1],ge=Object(n.useState)(!1),he=Object(h.a)(ge,2),Ee=he[0],je=he[1],ve=Object(n.useState)(!1),Oe=Object(h.a)(ve,2),ye=Oe[0],xe=Oe[1],Ne=Object(n.useState)(!1),Se=Object(h.a)(Ne,2),we=Se[0],ke=Se[1],Ce=Object(n.useState)("POST"),Pe=Object(h.a)(Ce,2),De=Pe[0],Te=Pe[1],_e=new FormData,Ae=Object(n.useState)(Object(G.h)().id),Me=Object(h.a)(Ae,1)[0],Fe=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6/-_]*$/),Le=I.endPoint;return Object(n.useEffect)((function(){if(be(0),Me&&!E&&(Te("PUT"),i("modifi\xe9"),fetch("".concat(Le,"/carrier/detail/").concat(Me),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/deliveries")}else j(!0),T(t.data.description),x(t.data.title),z(t.data.price),q(t.data.delay_delivery),xe(t.data.isActive),ue(t.data.path_picture)}))),!Fe.test(y)||""===y||y.length<3||y.length>30?(k(!0),be((function(e){return e+1}))):k(!1),!Fe.test(D)||""===D||D.length<10||D.length>200?(F(!0),be((function(e){return e+1}))):F(!1),""===U||typeof U===String||U>500||U<0?(W(!0),be((function(e){return e+1}))):W(!1),0===$||""===$||typeof $===String||$>10||$<0?(X(!0),be((function(e){return e+1}))):X(!1),1===Object.keys(ae).length)for(var t=0;t<ae.length;t++)"image/png"!==ae[t].type&&"image/jpeg"!==ae[t].type?(le(!0),be((function(e){return e+1}))):(le(!1),_e.append("file".concat(t),ae[t]));else"POST"!==De||Me||(le(!0),be((function(e){return e+1})));je(fe>0)}),[Me,fe,Fe,y,D,E,_e,De,ae,$,U,e.history,Le]),r.a.createElement(lt,{titlepage:e.title,isFailed:p,isSuccess:o,statusMessageForm:c,handleSubmit:function(e){e.preventDefault(),ke(!0),_e.append("title",y),_e.append("description",D),_e.append("price",U),_e.append("delay_delivery",$),_e.append("isActive",ye);var t="POST"===De?"".concat(Le,"/carrier"):"".concat(Le,"/carrier/").concat(Me);Ee||fetch(t,{method:De,credentials:"include",body:_e}).then((function(e){return e.json()})).then((function(e){e.error?(f(!0),setTimeout((function(){f(!1)}),1500)):(m(!0),setTimeout((function(){m(!1)}),1500),ne(""),"POST"===De?(x(""),T(""),z(0),q(0),ke(!1),xe(!1)):e.picture&&ue(e.picture))}))},isActive:ye,setIsActive:xe,title:y,setTitle:x,errorTitle:w,isSubmit:we,errorDescription:M,description:D,setDescription:T,errorPicture:ie,picture:ae,setPicture:ne,pictureDisplay:me,price:U,setPrice:z,errorPrice:B,delay:$,setDelay:q,errorDelay:K})};var ot=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/deliveries"},r.a.createElement(it,null)),r.a.createElement(G.b,{exact:!0,path:"/admin/deliveries/add"},r.a.createElement(st,{title:"Ajouter"})),r.a.createElement(G.b,{exact:!0,path:"/admin/deliveries/:id",render:function(e){return r.a.createElement(st,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var mt=function(){var e=I.endPoint;return r.a.createElement(ze,{titlepage:"Liste des Administrateurs",linkapi:"".concat(e,"/admin"),th:[{adminId:"ID"},{lastName:"Nom"},{firstName:"Pr\xe9nom"},{adminLevel:"Role"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un Admin",link:"admins",linkbutton:!0})};var ut=function(e){var t=e.component,a=Object(ee.a)(e,["component"]),c=Object(n.useContext)(D).dataUser;return r.a.createElement(G.b,Object.assign({},a,{render:function(e){return"superadmin"===c.adminLevel?r.a.createElement(t,e):r.a.createElement("p",{className:"bg-danger text-white p-2"},"Non Autoris\xe9")}}))};function dt(e){var t=I.endPointImage;return r.a.createElement(fe,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," admin"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Utilisateur enregistr\xe9 avec succ\xe9s",failMessage:"Erreur de duplication utilisateur ou champs vide, veuillez v\xe9rifier votre formulaire"},""!==e.pictureDisplay&&void 0!==e.pictureDisplay?r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/").concat(e.pictureDisplay),className:"w-100 rounded-circle",alt:"avatar_image_profil"}))):r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"".concat(t,"/default-avatar.png"),className:"w-100 rounded-circle",alt:"avatar_image_profil"}))),r.a.createElement(we,{errorPicture:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},label:"Photo de profil",errorMessage:"Seule une image sous le format png ou jpg/jpeg est accept\xe9",isMultiple:!0}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Titre :"),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-5"},r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",checked:"mr"===e.gender,id:"mr",key:"mr",onChange:function(){return e.setGender("mr")}})),r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",id:"mrs",key:"mrs",checked:"mrs"===e.gender,onChange:function(){return e.setGender("mrs")}})))),"/admin/my_profil"!==e.location&&r.a.createElement(r.a.Fragment,null,e.errorAdminLevel&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Veuillez s\xe9lectionner un r\xf4le"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"R\xf4le :"),r.a.createElement("select",{name:"adminlevel",id:"adminlevel",className:"p-1 col-9 col-sm-6 col-md-5",value:e.adminLevel,onChange:function(t){e.setAdminLevel(t.target.value)}},r.a.createElement("option",{value:""},"--R\xf4le admin--"),r.a.createElement("option",{value:"superadmin"},"superadmin"),r.a.createElement("option",{value:"admin"},"admin")))),r.a.createElement(ce,{label:"Nom :",name:"lastname",type:"text",value:e.lastName,change:function(t){e.handleName(t)},errorcondition:e.errorLastName&&e.isSubmit,errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement(ce,{label:"Pr\xe9nom :",name:"firstname",type:"text",value:e.firstName,change:function(t){e.handleName(t)},errorcondition:e.errorFirstName&&e.isSubmit,errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Date de naissance :"),r.a.createElement("input",{type:"date",name:"datebirth",min:"1940-01-01",max:"2010-01-01",value:e.dateBirth&&B()(e.dateBirth).format("YYYY-MM-DD"),className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){""===t.target.value?e.setDateBirth():e.setDateBirth(t.target.value)}})),r.a.createElement(ce,{label:"Email :",name:"email",type:"email",value:e.email,change:function(t){e.setEmail(t.target.value)},errorcondition:e.errorMail&&e.isSubmit,errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ce,{label:"Mot de passe :",name:"password",type:"password",value:e.password,change:function(t){e.setPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorPassword&&e.isSubmit:e.errorPassword,errormessage:"Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ce,{label:"Confirmation :",name:"passwordconf",type:"password",value:e.confirmationPassword,change:function(t){e.setConfirmationPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorConfirmation&&e.isSubmit:e.errorConfirmation,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}))}dt.defaultProps={dateBirth:""};var pt=dt;var ft=function(e){var t=Object(n.useState)("POST"),a=Object(h.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),s=Object(h.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)("mr"),d=Object(h.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(""),g=Object(h.a)(b,2),E=g[0],j=g[1],v=Object(n.useState)(""),O=Object(h.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(),S=Object(h.a)(N,2),w=S[0],k=S[1],C=Object(n.useState)(""),P=Object(h.a)(C,2),T=P[0],_=P[1],A=Object(n.useState)(""),M=Object(h.a)(A,2),F=M[0],L=M[1],Y=Object(n.useState)(""),U=Object(h.a)(Y,2),z=U[0],R=U[1],V=Object(n.useState)(""),B=Object(h.a)(V,2),W=B[0],J=B[1],Z=Object(n.useState)(""),$=Object(h.a)(Z,2),q=$[0],Q=$[1],H=Object(n.useState)(!1),K=Object(h.a)(H,2),X=K[0],ee=K[1],te=Object(n.useState)(0),ae=Object(h.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),ie=Object(h.a)(ce,2),le=ie[0],se=ie[1],oe=Object(n.useState)(!1),me=Object(h.a)(oe,2),ue=me[0],de=me[1],pe=Object(n.useState)(!1),fe=Object(h.a)(pe,2),be=fe[0],ge=fe[1],he=Object(n.useState)(!1),Ee=Object(h.a)(he,2),je=Ee[0],ve=Ee[1],Oe=Object(n.useState)(!1),ye=Object(h.a)(Oe,2),xe=ye[0],Ne=ye[1],Se=Object(n.useState)(!1),we=Object(h.a)(Se,2),ke=we[0],Ce=we[1],Pe=Object(n.useState)(!1),De=Object(h.a)(Pe,2),Te=De[0],_e=De[1],Ae=Object(n.useState)(!1),Me=Object(h.a)(Ae,2),Fe=Me[0],Le=Me[1],Ie=Object(n.useState)(!1),Ye=Object(h.a)(Ie,2),Ue=Ye[0],ze=Ye[1],Ge=Object(n.useState)(!1),Re=Object(h.a)(Ge,2),Ve=Re[0],Be=Re[1],We=Object(n.useContext)(D).dataUser,Je=Object(G.h)().id||We._id,Ze=new FormData,$e=I.endPoint;return Object(n.useEffect)((function(){if(ee(!1),Je&&"PUT"!==c){var t="/admin/my_profil"===e.location.pathname?"".concat($e,"/admin/me"):"".concat($e,"/admin/").concat(Je);i("PUT"),fetch(t,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/admins")}else f(t.gender.toLowerCase()),R(t.adminLevel),j(t.lastName),x(t.firstName),_(t.email),k(t.dateBirth),Q(t.path_picture)}))}re(0);var a=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),n=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),r=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);if(a.test(E)&&""!==E?se(!1):(se(!0),re((function(e){return e+1}))),a.test(y)&&""!==y?de(!1):(de(!0),re((function(e){return e+1}))),n.test(T)&&""!==T?ge(!1):(ge(!0),re((function(e){return e+1}))),!r.test(F)&&""!==F||""===F&&"POST"===c?(ve(!0),re((function(e){return e+1}))):ve(!1),W!==F||""===W&&"POST"===c?(Ne(!0),re((function(e){return e+1}))):Ne(!1),"superadmin"!==z&&"admin"!==z?(Ce(!0),re((function(e){return e+1}))):Ce(!1),1===Object.keys(o).length)for(var l=0;l<o.length;l++)"image/png"!==o[l].type&&"image/jpeg"!==o[l].type?(_e(!0),re((function(e){return e+1}))):(_e(!1),Ze.append("file".concat(l),o[l]));else Object.keys(o).length>1&&(_e(!0),re((function(e){return e+1})));ee(ne>0)}),[ne,E,y,T,F,W,Je,c,z,ke,Ze,o,q,e,$e]),r.a.createElement(pt,{isSuccess:Ue,isFailed:Ve,handleSubmit:function(e){e.preventDefault(e),Le(!0),Ze.append("gender",p),Ze.append("lastName",E),Ze.append("firstName",y),Ze.append("date_birth",w),Ze.append("adminLevel",z),Ze.append("email",T),""!==F&&Ze.append("password",F);var t="POST"===c?"".concat($e,"/admin"):"".concat($e,"/admin/").concat(Je);X||fetch(t,{method:c,credentials:"include",body:Ze}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(Be(!0),setTimeout((function(){Be(!1)}),1500)):(ze(!0),setTimeout((function(){ze(!1)}),1500),"POST"===c?(j(""),x(""),k(""),_(""),L(""),J(""),R("")):(console.log(e),Q(e.picture),L(""),J("")),Le(!1))}))},gender:p,lastName:E,firstName:y,dateBirth:w,email:T,password:F,confirmationPassword:W,setDateBirth:k,setEmail:_,setPassword:L,setConfirmationPassword:J,setGender:f,handleName:function(e){"lastname"===e.target.name?j(e.target.value):x(e.target.value)},errorLastName:le,errorFirstName:ue,errorMail:be,errorPassword:je,errorConfirmation:xe,titlepage:e.title,isSubmit:Fe,method:c,adminLevel:z,errorAdminLevel:ke,setAdminLevel:R,setPicture:m,errorPicture:Te,pictureDisplay:q,setPictureDisplay:Q,location:e.location.pathname})};var bt=function(){return r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin/admins"},r.a.createElement(ut,{component:mt})),r.a.createElement(G.b,{exact:!0,path:"/admin/admins/add"},r.a.createElement(ut,{title:"Ajouter un",component:ft})),r.a.createElement(G.b,{exact:!0,path:"/admin/admins/:id"},r.a.createElement(ut,{title:"Modifier un",component:ft})),r.a.createElement(G.b,null,r.a.createElement(R,null)))};var gt=function(){var e=Object(n.useContext)(D).dataUser;return r.a.createElement("div",{className:"col-6 col-md-3 d-flex align-items-center justify-content-center"},r.a.createElement(f.b,{className:"text-decoration-none",to:"/admin/my_profile"},(e.adminLevel,r.a.createElement("i",{className:"ri-shield-user-line mx-1 mx-sm-2 icon-font22 color3c8ce4"}))),r.a.createElement("i",{className:"ri-mail-fill mx-1 mx-sm-2 icon-font22 color3c8ce4"}),r.a.createElement(f.b,{className:"text-decoration-none",to:"/adminlogout"},r.a.createElement("i",{className:"ri-logout-circle-r-line mx-1 mx-sm-2 icon-font22 text-danger"})),r.a.createElement(k,null))};var ht=function(){return r.a.createElement("header",{className:"row adminheader d-flex justify-content-around align-items-center"},r.a.createElement("div",{className:"d-none d-lg-flex col-md-4 col-lg-2"}),r.a.createElement("div",{className:"d-none d-lg-flex col-md-3 col-xl-2 align-items-center"},r.a.createElement(O,null)),r.a.createElement(b,{specificclassname:"col-6 col-md-4 col-xl-5 text-center d-flex justify-content-center align-items-center p-3 logo"}),r.a.createElement(gt,null))};var Et=function(){var e=Object(n.useState)([{link:"",title:"Accueil"},{link:"users",title:"Utilisateurs"},{link:"categories",title:"Cat\xe9gories"},{link:"articles",title:"Article"},{link:"rentals",title:"Location"},{link:"addresses",title:"Adresse"},{link:"payments",title:"Paiement"},{link:"deliveries",title:"Livraison"},{link:"admins",title:"Administrateurs"},{link:"adminlogout",title:"Deconnexion"}]),t=Object(h.a)(e,1)[0],a=Object(n.useContext)(y),c=a.isToggle,i=a.setToggle,l=c&&"d-flex",s=t.map((function(e,t){return r.a.createElement(f.b,{key:t,className:"text-decoration-none",to:"Deconnexion"===e.title?"/".concat(e.link):"/admin/".concat(e.link)},r.a.createElement("li",{key:t,className:"py-2 text-white text-center border-bottom listmenuadmin",onClick:function(){return i(!1)}},e.title))}));return r.a.createElement(j.a,{classNames:"menuadmin",timeout:600,in:c},r.a.createElement("div",{className:"".concat(l," menuadmincontainer d-lg-flex col-6 col-md-4 col-lg-2 bgcolor9cd1ff")},r.a.createElement("nav",{className:"navadmin bg d-flex w-100"},r.a.createElement("ul",{className:"list-unstyled w-100 d-flex flex-column justify-content-center justify-content-lg-start"},s))))};var jt=function(){return r.a.createElement("footer",{className:"row footeradmin p-2 bgcolor3c8ce4 d-flex justify-content-center align-items-center"},r.a.createElement("p",{className:"text-white text-center mb-0"},"@copyright - louons.fr - Tous droits r\xe9serv\xe9"))};var vt=function(e){var t=Object(n.useContext)(D).dataUser;return r.a.createElement(ft,Object.assign({},e,{id:t._id,title:"Mon profil"}))};a(51),a(52);var Ot=function(){return r.a.createElement(x,null,r.a.createElement(Ye,null,r.a.createElement(ht,null),r.a.createElement("main",{className:"row fill"},r.a.createElement(Et,null),r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/admin"},r.a.createElement(ne,{component:Fe,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/users"},r.a.createElement(ne,{component:Re,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/categories"},r.a.createElement(ne,{component:Ze,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/articles"},r.a.createElement(ne,{component:qe,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/rentals"},r.a.createElement(ne,{component:Xe,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/addresses"},r.a.createElement(ne,{component:tt,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/payments"},r.a.createElement(ne,{component:ct,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/deliveries"},r.a.createElement(ne,{component:ot,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/admins"},r.a.createElement(ne,{component:bt,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/admin/my_profile"},r.a.createElement(ne,{component:vt,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,null,r.a.createElement(R,null))))),r.a.createElement(jt,null)))};var yt=function(){var e=I.endPoint;return(r.a.createElement(f.a,null,r.a.createElement(T,null,r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/adminlogin",render:function(t){return r.a.createElement(K,Object.assign({linkapi:"".concat(e,"/authenticationadmin"),redirect:"/admin"},t))}}),r.a.createElement(G.b,{exact:!0,path:"/adminlogout",render:function(e){return r.a.createElement(X,Object.assign({},e,{redirect:"/adminlogin"}))}}),r.a.createElement(G.b,{path:"/admin"},r.a.createElement(ne,{component:Ot,pageifnotauth:"/adminlogin"})),r.a.createElement(G.b,{path:"/"},r.a.createElement(Me,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(yt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d02d9279.chunk.js.map