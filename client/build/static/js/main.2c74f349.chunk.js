(this.webpackJsonpnews=this.webpackJsonpnews||[]).push([[0],{33:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),l=(a(38),a(39),a(40),a(17)),s=a(18),o=a(20),m=a(19),u=a(21),d=r.a.createContext(),p=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={listCat:[]},a.componentDidMount=function(){fetch("http://localhost:5000/louons/api/v1/category/all",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){a.setState({listCat:e.data})}))},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.listCat;return r.a.createElement(d.Provider,{value:{listCat:e}},this.props.children)}}]),t}(r.a.Component),f=(a(41),a(3));var b=function(e){return r.a.createElement("div",{className:e.specificclassname},r.a.createElement(f.b,{to:"/"},r.a.createElement("img",{src:"/assets/img/louons.png",alt:"logo_louons",className:"w-100 img-fluid logoimg mx-0 mx-sm-2 mx-md-0"})))},h=a(14),g=a(1),E=a(55),j=a(54);function v(e){return r.a.createElement(E.a,null,e.isShown&&r.a.createElement(j.a,{classNames:"searchanimation",timeout:1e3},r.a.createElement("div",{className:"".concat(e.specificclassname," my-2 mx-auto")},r.a.createElement("form",{action:"",className:"form-group has-search w-75 m-auto"},r.a.createElement("i",{className:"ri-search-line form-control-feedback"}),r.a.createElement("input",{className:"w-100 form-control",type:"text",placeholder:"Rechercher",name:"search"})))))}v.defaultProps={isShown:!0,specificclassname:""};var O=v,y=r.a.createContext();function x(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),c=a[0],i=a[1];return r.a.createElement(y.Provider,{value:{isToggle:c,setToggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!c;i(e)}}},e.children)}var N=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useContext)(y).setToggle,s=e.menuList.map((function(e,t){return"categories"===e.link?r.a.createElement("li",{key:t,className:"p-2 my-3 menuelement",onMouseEnter:function(){i(!0)},onMouseLeave:function(){i(!1)}},e.title,r.a.createElement(j.a,{classNames:"submenuelt",unmountOnExit:!0,timeout:600,in:c},r.a.createElement("ul",{className:"list-unstyled listcategory px-2"},r.a.createElement(d.Consumer,null,(function(e){return e.listCat.map((function(e){return r.a.createElement(f.b,{key:e._id,className:"submenuelement text-decoration-none",to:{pathname:"/categories/".concat(e.link),id:e._id,title:e.title,description:e.description}},r.a.createElement("li",{className:"p-1 my-3 font-italic submenuelement",onClick:function(){l(!1),i(!1)}},e.title))}))}))))):r.a.createElement(f.b,{key:t,className:"menuelement text-decoration-none",to:"/".concat(e.link.replace(/\s/gi,"_").normalize("NFC"))},r.a.createElement("li",{key:t,className:"p-2 my-3",onClick:function(){return l(!1)}},e.title))})),o=e.isShown&&"d-flex";return r.a.createElement(j.a,{classNames:"menuanimation",timeout:600,in:e.isShown},r.a.createElement("ul",{className:"my-auto ".concat(o," d-lg-flex flex-column flex-lg-row justify-content-lg-around list-unstyled listmenucontainer")},s,r.a.createElement(O,{isShown:!0,specificclassname:"d-md-none"})))},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={listOfMenu:[{link:"announces",title:"Annonces"},{link:"categories",title:"Cat\xe9gories"},{link:"post_announce",title:"D\xe9poser une annonce"}]},a.forceRender=a.forceRender.bind(Object(h.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"forceRender",value:function(){this.context.setToggle(!1)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.forceRender)}},{key:"render",value:function(){return r.a.createElement("div",{className:"p-0 h-100 navmenu d-block d-lg-flex align-items-center justify-content-lg-center"},r.a.createElement(N,{isShown:this.context.isToggle,menuList:this.state.listOfMenu}))}}]),t}(n.Component);S.contextType=y;var w=S;var C=function(){var e=Object(n.useContext)(y),t=e.isToggle,a=e.setToggle;return(r.a.createElement("div",{className:"barcontainer mx-1 mx-sm-3 d-flex flex-column d-lg-none align-items-end justify-content-center",onClick:function(e){return a()}},r.a.createElement(j.a,{classNames:"bar1",timeout:800,in:t},r.a.createElement("div",{className:"bar bar1"})),r.a.createElement(j.a,{classNames:"bar2",timeout:800,in:t},r.a.createElement("div",{className:"bar bar2"})),r.a.createElement(j.a,{classNames:"bar3",timeout:800,in:t},r.a.createElement("div",{className:"bar bar3"}))))},k=a(11),D=a.n(k),P=Object(n.createContext)(),T=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!0),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(D.a.get("x-auth-token")),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)({}),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1];return Object(n.useEffect)((function(){p&&y?fetch(y,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(i(!1),f("")):(i(!0),j(e.user)),m(!1)})):p||(i(!1),m(!1))}),[p,y]),r.a.createElement(P.Provider,{value:{isAuth:c,setIsAuth:i,cookieToken:p,isLoading:o,setIsLoading:m,setCookieToken:f,dataUser:E,setLinkAuth:x,linkAuth:y}},e.children)};var _=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],c=t[1],i=Object(n.useContext)(P).isAuth,l=function(){window.innerWidth<576&&c(!1)};return Object(n.useEffect)((function(){window.addEventListener("resize",l)}),[]),r.a.createElement("div",{className:"col-7 col-sm-6 col-lg-2 p-0 d-flex justify-content-end justify-content-lg-around"},r.a.createElement("i",{className:"ri-search-line mx-2 d-none d-sm-block icon-font22 color3c8ce4",onClick:function(){return c(!a)}}),r.a.createElement(f.b,{key:"rightside2",className:"text-decoration-none",to:"/message"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-mail-fill icon-font22 color3c8ce4"})),r.a.createElement(f.b,{key:"rightside1",className:"text-decoration-none",to:"/my_account"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-user-3-fill icon-font22 color3c8ce4"})),i&&r.a.createElement(f.b,{key:"rightside3",className:"text-decoration-none",to:"/logout"},r.a.createElement("i",{className:"mx-1 mx-sm-2 ri-logout-circle-r-line icon-font22 text-danger"})),r.a.createElement(O,{specificclassname:"position-absolute searchbar",isShown:a}),r.a.createElement(C,null))};var A=function(){return r.a.createElement("header",{className:"headercontainer row m-0 d-flex justify-content-center align-items-center mx-auto p-2"},r.a.createElement(b,{specificclassname:"col-5 col-sm-6 col-lg-3 p-0 text-sm-left text-md-center logo"}),r.a.createElement(x,null,r.a.createElement(w,null),r.a.createElement(_,null)))};a(47);var M=function(e){var t=Object(n.useContext)(P).isAuth,a=e.dataToDisplay.map((function(a,n){return"login"===a.link&&t?r.a.createElement(f.b,{key:a._id||n,className:"text-white",to:{pathname:"".concat(e.pathlink,"/logout"),id:a._id||n}},r.a.createElement("li",{key:"title".concat(n),className:"footerli p-2",onClick:function(){return s(!1)}},"D\xe9connexion")):r.a.createElement(f.b,{key:a._id||n,className:"text-white",to:{pathname:"".concat(e.pathlink,"/").concat(a.link),id:a._id||n,title:a.title,description:a.description}},r.a.createElement("li",{key:"title".concat(n),className:"footerli p-2",onClick:function(){return s(!1)}},a.title))})),c=Object(n.useState)(!1),i=Object(g.a)(c,2),l=i[0],s=i[1],o=l?"d-block":"d-none d-md-block";return r.a.createElement("div",{className:"col-md-4 text-center my-2"},r.a.createElement("div",{className:"d-flex align-items-center justify-content-between justify-content-sm-around flex-row flex-md-column"},r.a.createElement("h4",{className:"text-white p-2 m-0 titlefooter"},e.title),r.a.createElement("i",{className:"ri-menu-4-fill text-white ri-2x d-md-none",onClick:function(){return s(!l)}})),r.a.createElement(j.a,{classNames:"listfooter",timeout:600,in:l},r.a.createElement("ul",{className:"".concat(o," list-unstyled text-white")},a)))};var F=function(){var e=Object(n.useState)([{link:"my_account",title:"Infos personnelles"},{link:"my_account/rentals",title:"Locations"},{link:"my_account/announces",title:"Mes annonces"},{link:"message",title:"Message"},{link:"login",title:"Connexion"}]),t=Object(g.a)(e,1)[0],a=Object(n.useState)([{link:"aboutus",title:"Qui sommes nous ?"},{link:"legalmention",title:"Mentions L\xe9gales"},{link:"cgv",title:"CGV"},{link:"contactus",title:"Nous contacter"}]),c=Object(g.a)(a,1)[0],i=Object(n.useContext)(d).listCat;return r.a.createElement("footer",{className:"bgcolor144c84 d-flex flex-column flex-md-row w-100"},r.a.createElement(M,{dataToDisplay:t,pathlink:"",title:"Mon compte"}),r.a.createElement(M,{dataToDisplay:i,pathlink:"/categories",title:"Cat\xe9gories"}),r.a.createElement(M,{dataToDisplay:c,pathlink:"",title:"Informations"}))},L=a(2);function I(e){return r.a.createElement("div",{className:e.divClass},e.data.map((function(t,a){return r.a.createElement("div",{key:a,className:e.productClass},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(t.pictures[0].path_picture),alt:"",className:"w-100 img-fluid thumbnail-img mx-auto"}),r.a.createElement("div",{className:"d-flex flex-column flex-xl-row p-1 justify-content-center align-items-center text-center"},r.a.createElement("p",{className:"p-1 text-center titleannounce mx-md-3"},t.title.length>12?"".concat(t.title.slice(0,12),"..."):t.title),r.a.createElement("p",{className:"mb-1 m-sm-0 font-weight-bold mx-md-3"},t.price," \u20ac/jr")),r.a.createElement(f.b,{to:"/announce/".concat(t._id),className:"text-center"},r.a.createElement("button",{className:"btn btn-outline-dark p-1 listproduct-btn mx-auto"},"Voir l'article")))})))}I.defaultProps={divClass:"row col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-lg-between",productClass:"col-8 col-sm-6 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end"};var Y=I;a(48);var U=function(){var e=Object(n.useState)({data:[]}),t=Object(g.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([{message:"Publiez vos articles et recevez des offres de locations"},{message:"Louez aupr\xe8s de personnes \xe9valu\xe9s"},{message:"Donnez une seconde vie \xe0 vos articles et pensez \xe9colo"}]),l=Object(g.a)(i,1)[0];return Object(n.useEffect)((function(){fetch("http://localhost:5000/louons/api/v1/article/lastactive",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||c((function(t){return Object(L.a)({},t,{data:e.data})}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"color144c84 p-2 my-3 col-12 text-center"},"Bienvenue sur louons.fr"),r.a.createElement("div",{className:"row col-12 mx-0 my-2 my-md-5 p-0 d-flex mx-auto"},l.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-11 col-sm-8 col-md-5 col-lg-3 border border-white mx-auto hometext bgcolor9cd1ff text-white p-1 my-2 text-center"},0===t?r.a.createElement("i",{className:"ri-edit-line ri-3x"}):1===t?r.a.createElement("i",{className:"ri-service-line ri-3x"}):r.a.createElement("i",{className:"ri-time-line ri-3x"}),r.a.createElement("p",{className:"text-center m-0 mx-auto"},e.message))}))),r.a.createElement("h2",{className:"bgcolor144c84 p-2 my-3 col-12 col-lg-10 mx-auto text-center text-white font-italic"},"Derniers articles publi\xe9s"),r.a.createElement(Y,{data:a.data}))},z=a(13);var G=function(){return r.a.createElement("div",{className:"imgnotfound mx-auto"},r.a.createElement("img",{alt:"404_not_found",className:"w-100",src:"/assets/img/404_notfound.jpg"}))},R=a(4),V=a.n(R);var B=function(e){return r.a.createElement("li",{className:"listcomplete p-2 ".concat(e.className),onClick:function(){e.setCurrLi(),e.setDateStart(),e.setDateEnd()}},"Du ".concat(V()(e.dateStart).format("DD/MM/YYYY")," au ").concat(V()(e.dateEnd).format("DD/MM/YYYY")))};var W=function(){var e=Object(z.h)().id,t=Object(n.useContext)(P).isAuth,a=Object(n.useState)({mainpicture:"",data:{},isFetched:!1,error:!1,isShownButton:!0,prevNumberDay:0,numberDay:1,listDate:[],currDateLi:"",dateStart:"",dateEnd:""}),c=Object(g.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){i.isFetched||fetch("http://localhost:5000/louons/api/v1/article/detail/".concat(e)).then((function(e){return e.json()})).then((function(e){!e.error&&e.data.isActive?l((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0,mainpicture:e.data.pictures[0].path_picture})})):l((function(e){return Object(L.a)({},e,{error:!0,isFetched:!0})}))}))}),[e,i]),i.error?r.a.createElement(G,null):r.a.createElement("div",{className:"col-12 col-sm-11 col-lg-10 col-xl-9 mx-auto product-detail-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-7 col-lg-8 picture-container"},i.isFetched&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-2 order-1 order-md-0 my-3"},r.a.createElement("div",{className:"row h-100 d-flex align-items-center justify-content-around"},i.data.pictures.map((function(e,t){return r.a.createElement("div",{key:t,className:"p-0 col-2 col-md-8 thumbnail-img-product"},r.a.createElement("img",{className:"img-fluid w-100",src:"http://localhost:5000/uploads/img/".concat(e.path_picture),alt:"",onClick:function(){return l((function(t){return Object(L.a)({},t,{mainpicture:e.path_picture})}))}}))})))),r.a.createElement("div",{className:"col-12 col-md-10 main-picture-container d-flex align-items-center"},r.a.createElement("img",{className:"img-fluid main-picture mx-auto",src:"http://localhost:5000/uploads/img/".concat(i.mainpicture),alt:""})))),r.a.createElement("div",{className:"col-12 col-md-5 col-lg-4 text-center d-flex flex-column justify-content-center"},r.a.createElement("h3",{className:"mt-3"},i.data.title),r.a.createElement("div",null,r.a.createElement("p",{className:"mt-2 mt-md-3 font-weight-bold"},"Description :"),r.a.createElement("p",{className:"my-3"},i.data.description),r.a.createElement("p",{className:"my-3 font-weight-bold"},"Prix de location :"),r.a.createElement("p",{className:"my-3"},i.data.price," \u20ac/jr"),t?i.isShownButton?r.a.createElement("button",{className:"btn btn-outline-dark my-3",onClick:function(){return l((function(e){return Object(L.a)({},e,{isShownButton:!1})}))}},"Disponibilit\xe9s"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Nbr de jour :"),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},r.a.createElement("i",{className:"ri-indeterminate-circle-line ri-2x",onClick:function(){return l((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay,numberDay:e.numberDay-1})}))}}),r.a.createElement("p",{className:"number-day mx-2 my-0"},i.numberDay),r.a.createElement("i",{className:"ri-add-circle-line ri-2x",onClick:function(){return l((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay,numberDay:e.numberDay+1})}))}}),r.a.createElement("button",{className:"btn btn-outline-primary ml-3",onClick:function(){l((function(e){return Object(L.a)({},e,{prevNumberDay:e.numberDay})})),i.numberDay!==i.prevNumberDay&&i.numberDay>0&&fetch("http://localhost:5000/louons/api/v1/rental/date/".concat(e,"/").concat(i.numberDay),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{currDateLi:"",listDate:e.data})}))}))}},"Ok"),i.listDate.length>0&&r.a.createElement("button",{className:"btn btn-outline-danger mx-1",onClick:function(){return l((function(e){return Object(L.a)({},e,{listDate:[],currDateLi:"",dateStart:"",dateEnd:"",prevNumberDay:0,numberDay:1})}))}},"Reset")),i.listDate.length>0&&r.a.createElement("ul",{className:"list-unstyled my-3"},i.listDate.map((function(e,t){return r.a.createElement(B,{key:t,index:t,className:i.currDateLi===t?"p-1 list-date bg-secondary text-white":"p-1 list-date",setCurrLi:function(){return l((function(e){return Object(L.a)({},e,{currDateLi:t})}))},dateStart:e.dateStart,dateEnd:e.dateEnd,setDateStart:function(){return l((function(t){return Object(L.a)({},t,{dateStart:V()(e.dateStart).format("YYYY-MM-DD")})}))},setDateEnd:function(){return l((function(t){return Object(L.a)({},t,{dateEnd:V()(e.dateEnd).format("YYYY-MM-DD")})}))}})}))),i.dateStart&&r.a.createElement(f.b,{to:"/order"},r.a.createElement("button",{className:"btn btn-outline-primary m-3",onClick:function(){return D.a.set("article",{article:i.data,dateStart:i.dateStart,dateEnd:i.dateEnd,numberDay:i.numberDay})}},"R\xe9server \xe0 cette date"))):r.a.createElement("p",null,"Veuillez vous connecter pour voir les disponibilit\xe9s")))))};var J=function(e){var t=Object(n.useState)({id:e.location.id,isFetched:!1,title:e.location.title,description:e.location.description,data:[],idLocationUndefined:!0,isNotFound:!1}),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(z.h)().title;return Object(n.useEffect)((function(){e.location.id!==c.id&&e.location.id&&i((function(t){return Object(L.a)({},t,{id:e.location.id,title:e.location.title,description:e.location.description,isFetched:!1})})),c.id||!c.idLocationUndefined||c.isNotFound||fetch("http://localhost:5000/louons/api/v1/category/detail?title=".concat(l),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?i((function(e){return Object(L.a)({},e,{isNotFound:!0})})):i((function(t){return Object(L.a)({},t,{id:e.data[0]._id,title:e.data[0].title,description:e.data[0].description,idLocationUndefined:!1})}))})),c.isFetched||!c.id||c.isNotFound||fetch("http://localhost:5000/louons/api/v1/article/searcharticle/".concat(c.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[c,e.location,l]),c.isNotFound?r.a.createElement(G,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 m-auto text-center category-title"},c.title),r.a.createElement("p",{className:"col-12 col-lg-10 m-0 m-auto mt-md-3 p-2 text-center text-white font-italic bgcolor3c8ce4"},c.description),r.a.createElement(Y,{divClass:"col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-md-start",productClass:"col-6 col-sm-4 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end",data:c.data}))};var Z=function(){var e=Object(n.useState)({isFetched:!1,title:"Toutes les annonces",description:"Retrouvez ici toutes les annonces",data:[]}),t=Object(g.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){a.isFetched||fetch("http://localhost:5000/louons/api/v1/article",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||c((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 m-auto text-center category-title"},a.title),r.a.createElement("p",{className:"col-12 col-lg-10 m-0 m-auto mt-md-3 p-2 text-center text-white font-italic bgcolor3c8ce4"},a.description),r.a.createElement(Y,{divClass:"row col-12 col-lg-10 mx-auto m-0 p-0 d-flex justify-content-center justify-content-md-start",productClass:"col-6 col-sm-4 col-lg-3 p-2 my-2 my-lg-4 product-container d-flex flex-column justify-content-end",data:a.data}))},$=a(15);var q=function(e){return r.a.createElement("div",{className:"table-responsive mt-5"},r.a.createElement("table",{className:"text-center table-rental w-100 border border-black"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{className:"p-3"},"Nom"),r.a.createElement("th",{className:"p-3"},"Description"))),r.a.createElement("tbody",null,e.data.map((function(t,a){return r.a.createElement("tr",{key:a,className:"border border-black"},r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex align-items-center h-100"},r.a.createElement("input",{type:"radio",name:"delivery",className:"mx-auto",value:t._id,checked:t._id===e.isChecked,onChange:function(t){var a=t.target.value;e.setRental((function(t){return Object(L.a)({},t,Object($.a)({},e.propertyvalue,a))}))}}))),r.a.createElement("td",null,t.title,r.a.createElement("img",{className:"img-fluid thumbnail-delivery-payment",src:"http://localhost:5000/uploads/img/".concat(t.path_picture),alt:"picture_delivery"})),r.a.createElement("td",null,r.a.createElement("div",{className:"d-flex align-items-center justify-content-center h-100"},r.a.createElement("p",{className:"text-center"},t.description))))})))))};var Q=function(e){var t=D.a.getJSON("article"),a=Object(n.useState)({currentStep:1,selectedDelivery:"",selectedPayment:"",delivery:[],payment:[],registered:!1}),c=Object(g.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){2===i.currentStep&&0===i.delivery.length&&fetch("http://localhost:5000/louons/api/v1/carrier/all").then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{delivery:e.data})}))})),3===i.currentStep&&0===i.payment.length&&fetch("http://localhost:5000/louons/api/v1/payment/all").then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{payment:e.data})}))}))}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"col-12 text-center my-2 my-md-3"},"Tunnel de commande"),r.a.createElement("div",{className:"col-12 col-lg-10 mx-auto"},r.a.createElement("div",{className:"row d-flex justify-content-center col-12 col-md-10 col-lg-12 mx-auto"},r.a.createElement("div",{className:"col-12 col-md-4 ".concat(1===i.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"1/ R\xe9capitulatif")),r.a.createElement("div",{className:"col-12 col-md-4 ".concat(2===i.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"2/ Livraison")),r.a.createElement("div",{className:"col-12 col-md-4 ".concat(3===i.currentStep&&"bgcolor144c84 text-white")},r.a.createElement("p",{className:"step-title text-center m-0 p-2"},"3/ Paiement")),r.a.createElement("div",{className:"col-12 content-rental p-0"},i.registered?r.a.createElement("p",{className:"text-white text-center bg-success p-3 mt-3"},"Location enregistr\xe9 avec succ\xe9s !"):1===i.currentStep?t&&t.article?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-wrap"},r.a.createElement("h5",{className:"col-12 font-weight-bold text-center my-3 title-part-rental-step"},"Article"),r.a.createElement("div",{className:"col-12 d-flex flex-wrap justify-content-center align-items-center"},r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Nom de l'article :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},t.article.title),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Prix :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},"".concat(t.article.price," \u20ac/jr"))),r.a.createElement("div",{className:"col-12 d-flex justify-content-center align-items-center"},r.a.createElement("img",{className:"img-fluid thumbnail-article-rental",src:"http://localhost:5000/uploads/img/".concat(t.article.pictures[0].path_picture),alt:"main_picture_article"}))),r.a.createElement("div",{className:"d-flex flex-wrap"},r.a.createElement("h5",{className:"col-12 font-weight-bold text-center title-part-rental-step"},"R\xe9servation"),r.a.createElement("div",{className:"col-12 d-flex flex-wrap justify-content-center align-items-center"},r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Nombre de jour :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},t.numberDay),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Prix total :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},"".concat(t.numberDay*t.article.price," \u20ac")),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Date de d\xe9but :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},V()(t.dateStart).format("DD/MM/YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-right"},"Date de fin :"),r.a.createElement("p",{className:"col-12 col-sm-6 col-md-5 col-lg-3 text-center text-lg-left"},V()(t.dateEnd).format("DD/MM/YYYY"))))):r.a.createElement("p",{className:"text-center my-4"},"Aucun article choisi"):2===i.currentStep?r.a.createElement(q,{setRental:l,data:i.delivery,propertyvalue:"selectedDelivery",isChecked:i.selectedDelivery}):3===i.currentStep?r.a.createElement(q,{setRental:l,data:i.payment,propertyvalue:"selectedPayment",isChecked:i.selectedPayment}):r.a.createElement("p",null,"Page introuvable")),t&&t.article&&r.a.createElement("div",{className:"col-12 d-flex justify-content-center justify-content-md-end my-3"},i.currentStep>1&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){l((function(e){return Object(L.a)({},e,{currentStep:e.currentStep-1})}))}},2===i.currentStep?"<< R\xe9capitulatif":"<< Livraison"),i.currentStep<3&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){(1===i.currentStep||i.selectedDelivery)&&l((function(e){return Object(L.a)({},e,{currentStep:e.currentStep+1})}))}},1===i.currentStep?"Livraison >>":"Paiement >>"),3===i.currentStep&&i.selectedPayment&&r.a.createElement("button",{className:"btn bgcolor144c84 text-white mx-3",onClick:function(){return function(){var a=JSON.stringify({id_payment:i.selectedPayment,id_carrier:i.selectedDelivery,id_article:t.article._id,id_user:t.id_user,total_price:t.numberDay*t.article.price,start_date:t.dateStart,end_date:t.dateEnd});fetch("http://localhost:5000/louons/api/v1/rental",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:a}).then((function(e){return e.json()})).then((function(t){t.error||(D.a.remove("article"),l({currentStep:1,selectedDelivery:"",selectedPayment:"",delivery:[],payment:[],registered:!0}),setTimeout((function(){l((function(e){return Object(L.a)({},e,{registered:!1})})),e.history.push("/my_account/rentals")}),2500))}))}()}},"Valider")))))};var H=function(e){var t=e.linkapi,a=e.redirect,c=e.history,i=e.location,l=Object(n.useContext)(P),s=l.isAuth,o=l.setIsAuth,m=l.setIsLoading,u=l.cookieToken,d=l.setCookieToken,p=Object(n.useState)(!1),b=Object(g.a)(p,2),h=b[0],E=b[1],j=Object(n.useState)(),v=Object(g.a)(j,2),O=v[0],y=v[1],x=Object(n.useState)(),N=Object(g.a)(x,2),S=N[0],w=N[1];return Object(n.useEffect)((function(){(s||u)&&c.replace(a)})),r.a.createElement(r.a.Fragment,null,"/adminlogin"===i.pathname&&r.a.createElement("header",{className:"header row d-flex align-items-center"},r.a.createElement("div",{className:"col-12 col-md-6 text-center p-3 order-md-1"},r.a.createElement("img",{src:"../assets/img/louons.png",alt:"logo_louons",className:"img-fluid logoimg"})),r.a.createElement("div",{className:"col-12 col-md-6 text-center p-3"},r.a.createElement("h1",{className:"titlelogin color3c8ce4"},"Connexion au Panel Admin"))),r.a.createElement("main",{className:"row flex-grow-1"},r.a.createElement("form",{className:"mt-5 form-group mx-auto d-flex flex-column col-12 col-sm-6 col-md-5 col-lg-4 col-xl-3 align-items-center",onSubmit:function(e){e.preventDefault(),fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:O,password:S})}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&E(!0):(o(!0),m(!1),d(D.a.get("x-auth-token")),c.replace(a))}))}},h&&r.a.createElement("p",{className:"messagesize text-danger"},"Email ou mot de passe erron\xe9"),r.a.createElement("label",{className:"p-2 w-100"},"Email :",r.a.createElement("input",{className:"form-control mt-3",type:"email",onChange:function(e){y(e.target.value),E(!1)}})),r.a.createElement("label",{className:"p-2 w-100"},"Mot de passe :",r.a.createElement("input",{className:"form-control mt-3",type:"password",onChange:function(e){w(e.target.value),E(!1)}})),"/login"===i.pathname&&r.a.createElement(f.b,{to:"/inscription"},r.a.createElement("p",{className:"text-danger mb-2 notregistered-login"},"Pas encore de compte ? Inscrivez-vous"," ")),r.a.createElement("input",{className:"bgcolor3c8ce4 text-white btn btnlogin",type:"submit",value:"Connexion"}))))};var K=function(e){var t=Object(n.useContext)(P),a=t.setIsAuth,c=t.setCookieToken;return Object(n.useEffect)((function(){D.a.remove("x-auth-token"),c(""),a(!1)})),r.a.createElement(z.a,{to:e.redirect})},X=a(24);function ee(e){var t=e.linkAuth,a=e.component,c=Object(X.a)(e,["linkAuth","component"]),i=Object(n.useContext)(P),l=i.isLoading,s=i.isAuth,o=i.setCookieToken,m=i.setLinkAuth;""===document.cookie&&o("");var u=Object(L.a)({},c).pageifnotauth;return Object(n.useEffect)((function(){m(t)}),[t,m]),l?r.a.createElement(z.b,Object.assign({},c,{render:function(){return r.a.createElement("p",{className:"text-white message-loading text-center bg-success p-3 w-100"},"Loading ...")}})):r.a.createElement(z.b,Object.assign({},c,{render:function(e){return s?r.a.createElement(a,Object.assign({},e,c)):r.a.createElement(z.a,{to:u})}}))}ee.defaultProps={linkAuth:"http://localhost:5000/louons/api/v1/authenticationadmin"};var te=ee;function ae(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.containerClass},e.errorcondition&&r.a.createElement("span",{className:"text-danger w-100 errormessage text-center mx-auto p-2"},e.errormessage),r.a.createElement("label",{className:e.labelClass,htmlFor:e.name},e.label),r.a.createElement("input",{type:e.type,name:e.name,value:e.value,className:e.inputClass,onChange:e.change,id:e.name,disabled:e.disabled,min:e.min,max:e.max,autoComplete:e.autoComplete})))}ae.defaultProps={containerClass:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto text-center",inputClass:"form-control col-9 col-sm-6 col-md-5",labelClass:"col-9 col-sm-6 mt-2",disabled:!1,htmlFor:"",min:"",max:"",errorCondition:!1,autoComplete:"on"};var ne=ae;var re=function(e){return!e.isMediumWindow&&r.a.createElement("h3",{className:"title-profil text-center mb-4"},e.title)};var ce=function(e){var t=e.dataCurrentUser,a=t.data,n=t.isDisabledForm?"disabled":"";return t.isLoading?r.a.createElement("p",{className:"p-2 text-white bg-success"},"Chargement..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isMediumWindow:e.isMediumWindow,title:"Mes Informations"}),e.dataCurrentUser.isSuccess?r.a.createElement("p",{className:"bg-success text-white text-center p-2 w-100"},"Information mis \xe0 jour avec succ\xe9s"):!e.dataCurrentUser.isFailed||r.a.createElement("p",{className:"bg-danger text-white text-center p-2 w-100"},"Mot de passe incorrect ou erreur formulaire"),r.a.createElement("form",{className:"row form-group mx-auto d-flex justify-content-center",autoComplete:"off",onSubmit:function(t){return e.handleSubmit(t)}},e.dataCurrentUser.errorPicture&&e.dataCurrentUser.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Seule une image sous le format png ou jpg/jpeg est accept\xe9"),r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto d-flex align-items-center"},r.a.createElement("img",{src:a.path_picture?"http://localhost:5000/uploads/img/".concat(a.path_picture):"http://localhost:5000/uploads/img/default-avatar.png",className:"w-100 rounded-circle",alt:"avatar_image_profil"}),!n&&r.a.createElement("div",{className:"file-picture-profil"},r.a.createElement("i",{className:"ri-edit-line ri-2x text-white"}),r.a.createElement("span",{className:"input-profil"},r.a.createElement("input",{type:"file",name:"picture",multiple:!0,onChange:function(t){return e.handleChangeForm(t)}}))))),r.a.createElement("div",{className:"row my-3 col-12 col-sm-8 col-lg-7 d-flex justify-content-center"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2 text-center"},"Titre :"),r.a.createElement("label",{className:"col-5 col-sm-4 mt-2 text-center"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",disabled:n,className:"mx-1",checked:"mr"===a.gender,id:"mr",key:"mr",onChange:function(t){return e.handleChangeForm(t,"mr")}})),r.a.createElement("label",{className:"col-5 col-sm-4 mt-2 text-center"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",disabled:n,id:"mrs",key:"mrs",checked:"mrs"===a.gender,onChange:function(t){return e.handleChangeForm(t,"mrs")}}))),r.a.createElement(ne,{label:"Nom :",containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-7 text-center",name:"lastName",type:"text",errorcondition:e.dataCurrentUser.errorLastName,disabled:n,value:"lastName"in a&&a.lastName,change:function(t){e.handleChangeForm(t)},errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux et ne doit pas \xeatre vide"}),r.a.createElement(ne,{label:"Pr\xe9nom :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-7 text-center",name:"firstName",type:"text",errorcondition:e.dataCurrentUser.errorFirstName,disabled:n,value:"firstName"in a&&a.firstName,change:function(t){e.handleChangeForm(t)},errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux et ne doit pas \xeatre vide"}),r.a.createElement(ne,{label:"Email :",containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 col-md-9 text-center",name:"email",type:"text",disabled:n,errorcondition:e.dataCurrentUser.errorMail,value:"email"in a&&a.email,change:function(t){e.handleChangeForm(t)},errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ne,{label:"Date de naissance :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control date-size col-12 col-sm-6 p-0 col-md-5 text-center",name:"date_birth",type:"date",min:"1940-01-01",max:"2010-01-01",errormessage:"Date incorrect",errorcondition:e.dataCurrentUser.errorDate,disabled:n,value:a.date_birth&&V()(a.date_birth).format("YYYY-MM-DD"),change:function(t){e.handleChangeForm(t)}}),r.a.createElement("div",{className:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center"},r.a.createElement("label",{className:"text-center my-2 m-md-0"},"Newsletter :"),r.a.createElement("select",{name:"isSubscribe",id:"category",disabled:n,className:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",value:a.isSubscribe,onChange:function(t){return e.handleChangeForm(t)}},r.a.createElement("option",{value:"true"},"Oui"),r.a.createElement("option",{value:"false"},"Non"))),r.a.createElement(ne,{label:"Date d'inscription :",containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control date-size col-12 col-sm-6 p-0 col-md-5 text-center",name:"date_register",type:"date",disabled:"disabled",value:a.date_register&&V()(a.date_register).format("YYYY-MM-DD")}),n?r.a.createElement("button",{className:"mx-auto my-3 btn btn-info",onClick:function(){return e.setDataCurrentUser((function(e){return Object(L.a)({},e,{isDisabledForm:!1,method:"PUT"})}))}},"Modifier"):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"text-secondary text-center p-2 w-100 mb-0"},"Pour toute modification, veuillez confirmer votre mot de passe."),r.a.createElement(ne,{containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Mot de passe Actuel :",name:"testPassword",type:"password",autoComplete:"new-password",value:a.testPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorTestPassword&&e.dataCurrentUser.isSubmit,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ne,{containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Confirmation :",name:"confirmationTestPassword",type:"password",value:a.confirmationTestPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorConfirmationTestPassword,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement(ne,{containerClass:"row mr-xl-2 col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Nouveau mdp :",name:"newPassword",type:"password",autoComplete:"new-password",value:a.newPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorNewPassword&&e.dataCurrentUser.isSubmit,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ne,{containerClass:"row col-12 col-xl-6 my-2 d-flex flex-row justify-content-center justify-content-sm-between align-items-center",labelClass:"text-center my-2 m-md-0",inputClass:"form-control col-12 col-sm-6 p-0 col-md-5 text-center",label:"Confirmation :",name:"confirmationNewPassword",type:"password",value:a.confirmationNewPassword,change:function(t){e.handleChangeForm(t)},errorcondition:e.dataCurrentUser.errorConfirmationNewPassword,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement("input",{type:"submit",className:"mx-auto my-3 btn btn-info",value:"Envoyer"}))))};var ie=function(e){var t=Object(n.useState)({method:"GET",data:{date_birth:"",picture:[],testPassword:"",confirmationTestPassword:"",newPassword:"",confirmationNewPassword:""},isFetched:!1,isLoading:!0,isSubmit:!1,isDisabledForm:!0,numberErrorForm:0,errorForm:!1,errorPicture:!1,errorDate:!1,errorLastName:!1,errorFirstName:!1,errorMail:!1,errorTestPassword:!1,errorConfirmationTestPassword:!1,errorNewPassword:!1,errorConfirmationNewPassword:!1,isSuccess:!1,isFailed:!1}),a=Object(g.a)(t,2),c=a[0],i=a[1],l=new FormData,s=c.data,o=s.lastName,m=s.firstName,u=s.date_birth,d=s.gender,p=s.email,f=s.isSubscribe,b=s.picture,h=s.testPassword,E=s.confirmationTestPassword,j=s.newPassword,v=s.confirmationNewPassword,O=c.method,y=c.isFetched,x=c.errorForm,N=c.errorPicture,S=c.errorDate,w=c.errorLastName,C=c.errorFirstName,k=c.errorMail,D=c.errorTestPassword,P=c.errorConfirmationTestPassword,T=c.errorNewPassword,_=c.errorConfirmationNewPassword,A=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),M=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),F=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);return Object(n.useEffect)((function(){if(y||fetch("http://localhost:5000/louons/api/v1/user/me",{method:O,credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.error||i((function(t){return Object(L.a)({},t,{data:Object(L.a)({},t.data,{},e.data),isFetched:!0,isLoading:!1})}))})),y&&"PUT"===O){if(1===Object.keys(b).length)for(var e=0;e<b.length;e++)"image/png"===b[e].type||"image/jpeg"===b[e].type||N?"image/png"!==b[e].type&&"image/jpeg"!==b[e].type||(N&&i((function(e){return Object(L.a)({},e,{errorPicture:!1})})),l.append("file".concat(e),b[e])):i((function(e){return Object(L.a)({},e,{errorPicture:!0})}));else Object.keys(b).length>1&&!N&&i((function(e){return Object(L.a)({},e,{errorPicture:!0})}));(new Date(u).getFullYear()<1940||new Date(u).getFullYear()>2010)&&!S?i((function(e){return Object(L.a)({},e,{errorDate:!0})})):new Date(u).getFullYear()>1940&&new Date(u).getFullYear()<2010&&S&&i((function(e){return Object(L.a)({},e,{errorDate:!1})})),A.test(o)&&""!==o&&w?i((function(e){return Object(L.a)({},e,{errorLastName:!1})})):A.test(o)&&""!==o||w||i((function(e){return Object(L.a)({},e,{errorLastName:!0})})),A.test(m)&&""!==m&&C?i((function(e){return Object(L.a)({},e,{errorFirstName:!1})})):A.test(m)||C||i((function(e){return Object(L.a)({},e,{errorFirstName:!0})})),M.test(p)&&""!==p&&k?i((function(e){return Object(L.a)({},e,{errorMail:!1})})):M.test(p)||k||i((function(e){return Object(L.a)({},e,{errorMail:!0})})),F.test(h)&&""!==h&&D?i((function(e){return Object(L.a)({},e,{errorTestPassword:!1})})):F.test(h)&&""!==h||D||i((function(e){return Object(L.a)({},e,{errorTestPassword:!0})})),h===E&&P?i((function(e){return Object(L.a)({},e,{errorConfirmationTestPassword:!1})})):h===E||P||i((function(e){return Object(L.a)({},e,{errorConfirmationTestPassword:!0})})),(""===j||F.test(j))&&T?i((function(e){return Object(L.a)({},e,{errorNewPassword:!1})})):""===j||F.test(j)||T||i((function(e){return Object(L.a)({},e,{errorNewPassword:!0})})),j===v&&_?i((function(e){return Object(L.a)({},e,{errorConfirmationNewPassword:!1})})):j===v||_||i((function(e){return Object(L.a)({},e,{errorConfirmationNewPassword:!0})})),(N||S||w||C||k||D||P||T||_)&&!x?i((function(e){return Object(L.a)({},e,{errorForm:!0})})):!x||N||S||w||C||k||D||P||T||_||i((function(e){return Object(L.a)({},e,{errorForm:!1})}))}}),[O,y,M,A,F,l,o,m,u,p,b,h,E,x,N,S,w,C,k,D,P,j,v,T,_]),r.a.createElement(ce,{dataCurrentUser:c,setDataCurrentUser:i,handleChangeForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.target,n=a.value,r=a.name,c=a.files,l=""===t?n:t;l="true"===l||"false"===l?JSON.parse(l):l,i((function(e){return"picture"===r?Object(L.a)({},e,{data:Object(L.a)({},e.data,Object($.a)({},r,c))}):Object(L.a)({},e,{data:Object(L.a)({},e.data,Object($.a)({},r,l))})}))},handleSubmit:function(e){e.preventDefault(),i((function(e){return Object(L.a)({},e,{isSubmit:!0})})),l.append("lastName",o),l.append("firstName",m),l.append("date_birth",u),l.append("gender",d),l.append("email",p),l.append("isSubscribe",f),l.append("testPassword",h),""!==j&&l.append("password",j),x||fetch("http://localhost:5000/louons/api/v1/user/me",{method:O,credentials:"include",body:l}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(i((function(e){return Object(L.a)({},e,{isFailed:!0})})),setTimeout((function(){i((function(e){return Object(L.a)({},e,{isFailed:!1})}))}),1e3)):(i((function(t){return e.picture?Object(L.a)({},t,{isSuccess:!0,isSubmit:!1,isDisabledForm:!0,data:Object(L.a)({},t.data,{path_picture:e.picture})}):Object(L.a)({},t,{isSuccess:!0,isSubmit:!1,isDisabledForm:!0})})),setTimeout((function(){i((function(e){return Object(L.a)({},e,{isSuccess:!1,data:Object(L.a)({},e.data,{testPassword:"",confirmationTestPassword:"",newPassword:"",confirmationNewPassword:""})})}))}),1e3))}))},isMediumWindow:e.isMediumWindow})};var le=function(e){return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped table-announce"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.values(e.datatodisplay).map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,e.data.map((function(t,a){return r.a.createElement("tr",{key:a},Object.keys(e.datatodisplay).map((function(a,n){return t[a]?"date_register"===a?r.a.createElement("td",{key:n},V()(t[a]).format("DD/MM/YYYY")):"price"===a?r.a.createElement("td",{key:n},"".concat(t[a],"\u20ac/jr")):"total_price"===a?r.a.createElement("td",{key:n},"".concat(t[a],"\u20ac")):"id_article"===a||"id_carrier"===a||"id_payment"===a?r.a.createElement("td",{key:n},t[a].title):r.a.createElement("td",{key:n},t[a]):"seemore"===a?r.a.createElement("td",{key:n},r.a.createElement(f.b,{to:"".concat(e.linkdetail,"/").concat(t._id),onClick:function(){return e.handleIdParams&&e.handleIdParams(t._id)}},r.a.createElement("i",{className:"ri-eye-line"}))):"delete"!==a||r.a.createElement("td",{key:n},r.a.createElement("i",{className:"ri-delete-bin-6-fill",onClick:function(){return a=t._id,void fetch("".concat(e.linkapi,"/").concat(a),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(t){t.error||e.setAddresses((function(e){return Object(L.a)({},e,{isFetched:!1})}))}));var a}}))})))})))))};var se=function(e){var t=Object(n.useState)({data:[],isFetched:!1}),a=Object(g.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){c.isFetched||fetch("http://localhost:5000/louons/api/v1/article/owner",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error?e.error:i((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))}))}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isMediumWindow:e.isMediumWindow,title:"Mes Annonces"}),c.data.length>0?r.a.createElement(le,{data:c.data,linkdetail:"/announce",datatodisplay:{title:"Titre",date_register:"Date d'enregistrement",price:"Tarif",seemore:"Voir"}}):r.a.createElement("p",null,"Vous n'avez pas encore d'annonces publi\xe9s"))};function oe(e){return r.a.createElement("div",{className:e.divClass},r.a.createElement("input",{type:"submit",value:"Envoyer",className:e.inputClass}))}oe.defaultProps={divClass:"col-12 form-group my-3",inputClass:"btn text-white bgcolor3c8ce4"};var me=oe;function ue(e){return r.a.createElement("form",{className:e.class,onSubmit:e.handleSubmit,autoComplete:"off"},e.titlepage&&r.a.createElement("h4",{className:"titlepage col-12"},e.titlepage),e.isSuccess?r.a.createElement("p",{className:"bg-success text-white text-center p-2 w-100"},e.successMessage):!e.isFailed||r.a.createElement("p",{className:"bg-danger text-white text-center p-2 w-100"},e.failMessage),e.children,r.a.createElement(me,null))}ue.defaultProps={class:"row mx-auto text-center widthform py-md-2"};var de=ue,pe=a(8),fe=a.n(pe);function be(e){var t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1];return r.a.createElement("div",{className:e.divclass},e.errorGrasp&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Veuillez saisir votre recherche en un mot en toute lettre puis s\xe9lectionner une proposition sur la liste d\xe9roulante"),r.a.createElement("div",{className:"position-relative"},e.idParams?r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},e.titleLabel," :"),r.a.createElement("p",{className:"col-9 col-sm-6 col-md-5 m-0"},e.grasp)):r.a.createElement(ne,{label:"".concat(e.titleLabel," :"),name:"owner",type:"text",labelClass:e.labelClass,inputClass:"form-control col-9 col-sm-6 col-md-5",value:e.grasp,change:function(t){var a;e.setGrasp(t.target.value),a=t.target.value,fetch("".concat(e.link,"/").concat(a),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i(e.data)})),m(!0),e.setId(""),e.setErrorGrasp(!0),e.setSpec&&e.setSpec()}}),o&&""!==e.grasp&&r.a.createElement("ul",{className:"list-unstyled bg-secondary text-white autocomplete"},c.map((function(t){return t.clientId?r.a.createElement("li",{className:"p-1 border-black listcomplete",key:t._id,onClick:function(){e.setGrasp("".concat(t.lastName," ").concat(t.firstName)),m(!1),e.setId(t._id),e.setErrorGrasp(!1)}},"".concat(t.clientId," ").concat(t.lastName," ").concat(t.firstName)):!t.articleId||r.a.createElement("li",{className:"p-1 border-black listcomplete",key:t._id,onClick:function(){e.setGrasp("".concat(t.title)),m(!1),e.setId(t._id),e.setErrorGrasp(!1)}},"".concat(t.articleId," ").concat(t.title))})))))}be.defaultProps={divclass:"col-12"};var he=be;var ge=function(e){var t=Object(n.useContext)(P).dataUser;return Object(n.useEffect)((function(){t.adminLevel||(e.setErrorGrasp(!1),e.setOwner(t.id))}),[t,e]),r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:e.titlepage&&"".concat(e.titlepage," une adresse"),isFailed:e.form.isFailed,isSuccess:e.form.isSuccess,successMessage:"Adresse ".concat(e.form.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},e.history&&r.a.createElement("i",{className:"ri-arrow-go-back-line go-back-my-account ri-lg position-absolute",onClick:function(){return e.history.goBack()}}),t.adminLevel&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-4 mt-2"},"Etat :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),r.a.createElement(he,{errorGrasp:e.errorGrasp,idParams:e.idParams,grasp:e.grasp,titleLabel:"Propri\xe9taire",setGrasp:e.setGrasp,setId:e.setOwner,setErrorGrasp:e.setErrorGrasp,link:"http://localhost:5000/louons/api/v1/user/all"})),r.a.createElement(ne,{label:"Titre de l'adresse :",name:"title",type:"text",containerClass:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto mt-5",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 5 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(ne,{label:"Adresse :",name:"address",type:"text",value:e.address,change:function(t){e.setAddress(t.target.value)},errorcondition:e.errorAddress&&e.isSubmit,errormessage:"Ce champ doit contenir entre 10 et 80 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(ne,{label:"Code postal :",name:"zipcode",type:"number",value:e.zipCode,change:function(t){e.setZipCode(t.target.value)},errorcondition:e.errorZipCode&&e.isSubmit,errormessage:"Ce champ doit contenir entre 4 et 5 caract\xe8res num\xe9riques"}),r.a.createElement(ne,{label:"Ville :",name:"city",type:"text",value:e.city.value,change:function(t){e.setCity({value:t.target.value})},errorcondition:e.city.error&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 50 caract\xe8res, et sans caract\xe8res sp\xe9ciaux ni chiffre"}),r.a.createElement(ne,{label:"Pays :",name:"country",type:"text",value:e.country,change:function(t){e.setCountry(t.target.value)},errorcondition:e.errorCountry&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 20 caract\xe8res, et sans caract\xe8res sp\xe9ciaux ni chiffre"}))};var Ee=function(e){var t=Object(n.useState)("enregistr\xe9e"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(0),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)({isSuccess:!1,isFailed:!1,error:!1,statusMessageForm:"enregistr\xe9e",numberError:0}),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(""),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(!1),A=Object(g.a)(_,2),M=A[0],F=A[1],I=Object(n.useState)(""),Y=Object(g.a)(I,2),U=Y[0],G=Y[1],R=Object(n.useState)(!1),V=Object(g.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(""),Z=Object(g.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(!1),H=Object(g.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)({value:"",error:!1}),te=Object(g.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),ce=Object(g.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(!1),oe=Object(g.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(!1),pe=Object(g.a)(de,2),fe=pe[0],be=pe[1],he=Object(n.useState)(!0),Ee=Object(g.a)(he,2),je=Ee[0],ve=Ee[1],Oe=Object(n.useState)(!0),ye=Object(g.a)(Oe,2),xe=ye[0],Ne=ye[1],Se=Object(n.useState)(!1),we=Object(g.a)(Se,2),Ce=we[0],ke=we[1],De=Object(n.useState)(""),Pe=Object(g.a)(De,2),Te=Pe[0],_e=Pe[1],Ae=Object(n.useState)("POST"),Me=Object(g.a)(Ae,2),Fe=Me[0],Le=Me[1],Ie=Object(n.useState)(Object(z.h)().id),Ye=Object(g.a)(Ie,1)[0],Ue=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/),ze=new RegExp(/^[a-zA-Z\s-\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/),Ge=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(Ge.current=!1,f(0),(!y.error||!o)&&Ce){var t=JSON.stringify({isActive:xe,id_user:w,title:P,address:U,zipcode:$,city:ae.value,country:ie}),a="POST"===Fe?"http://localhost:5000/louons/api/v1/address":"http://localhost:5000/louons/api/v1/address/".concat(Ye);fetch(a,{method:Fe,headers:{"Content-Type":"application/json"},credentials:"include",body:t}).then((function(e){return e.json()})).then((function(t){ke(!1),t.error?(x((function(e){return Object(L.a)({},e,{isFailed:!0})})),setTimeout((function(){!Ge.current&&x((function(e){return Object(L.a)({},e,{isFailed:!1})}))}),800)):(x((function(e){return Object(L.a)({},e,{isSuccess:!0})})),setTimeout((function(){!Ge.current&&x((function(e){return Object(L.a)({},e,{isSuccess:!1})}))}),800),"POST"===Fe&&(T(""),G(""),q(""),ne({value:""}),le(""),_e("")),e.setAddresses&&e.setAddresses((function(e){return Object(L.a)({},e,{isFetched:!1})})))}))}return Ye&&!E&&"add"!==Ye&&(Le("PUT"),i("modifi\xe9e"),fetch("http://localhost:5000/louons/api/v1/address/detail/".concat(Ye),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error&&e.history)return e.history.push("/admin/addresses")}else j(!0),ve(!1),_e("".concat(t.data.id_user.firstName," ").concat(t.data.id_user.lastName)),G(t.data.address),T(t.data.title),q(t.data.zipcode),ne({value:t.data.city}),le(t.data.country),Ne(t.data.isActive),C(t.data.id_user._id)}))),je&&f((function(e){return e+1})),!Ue.test(P)||""===P||P.length<5||P.length>30?(F(!0),f((function(e){return e+1}))):F(!1),!Ue.test(U)||""===U||U.length<10||U.length>80?(W(!0),f((function(e){return e+1}))):W(!1),!ze.test(ae.value)||""===ae.value||ae.value.length<3||ae.value.length>50?(ae.error||ne((function(e){return Object(L.a)({},e,{error:!0})})),f((function(e){return e+1}))):ae.error&&ne((function(e){return Object(L.a)({},e,{error:!1})})),!ze.test(ie)||""===ie||ie.length<3||ie.length>20?(ue(!0),f((function(e){return e+1}))):ue(!1),0===$||""===$||typeof $===String||$>99999||$<0||$.length<4||$.length>5?(X(!0),f((function(e){return e+1}))):X(!1),p>0?(y.error||x((function(e){return Object(L.a)({},e,{error:!0})})),m(!0)):(y.error&&x((function(e){return Object(L.a)({},e,{error:!1})})),m(!1)),function(){Ge.current=!0}}),[Ye,p,Ue,ze,P,U,ae,ie,$,je,E,y,e.history,w,o,xe,Ce,Fe,e]),r.a.createElement(ge,{history:e.history,form:y,titlepage:e.title,errorGrasp:je,isActive:xe,isShow:fe,setIsShow:be,setIsActive:Ne,handleSubmit:function(e){e.preventDefault(),ke(!0)},isSubmit:Ce,idParams:Ye,statusMessageForm:c,grasp:Te,setGrasp:_e,setOwner:C,setErrorGrasp:ve,title:P,setTitle:T,errorTitle:M,address:U,setAddress:G,errorAddress:B,zipCode:$,setZipCode:q,errorZipCode:K,city:ae,setCity:ne,country:ie,setCountry:le,errorCountry:me})};var je=function(e){var t=Object(z.h)().id,a=Object(n.useState)({data:[],isFetched:!1,id:t}),c=Object(g.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){i.isFetched||fetch("http://localhost:5000/louons/api/v1/address/allself",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))})),t!==i.id&&l((function(e){return Object(L.a)({},e,{id:t})}))}),[i,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isMediumWindow:e.isMediumWindow,title:"Mes Adresses"}),i.id?r.a.createElement(Ee,{setAddresses:l,history:e.history}):r.a.createElement(r.a.Fragment,null,i.data.length>0?r.a.createElement(le,{data:i.data,linkdetail:"/my_account/addresses",handleIdParams:function(e){l((function(t){return Object(L.a)({},t,{id:e})}))},linkapi:"http://localhost:5000/louons/api/v1/address",setAddresses:l,datatodisplay:{title:"Titre",address:"Adresse",zipcode:"Code postal",city:"Ville",date_register:"Date d'enregistrement",seemore:"Voir",delete:"Supprimer"}}):r.a.createElement("p",null,"Vous n'avez pas encore d'adresses publi\xe9s"),r.a.createElement(f.b,{to:"addresses/add"},r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4"},"Ajouter une adresse"))))};var ve=function(e){var t=e.datarental,a=t.rentalId,n=t.date_register,c=t.start_date,i=t.end_date,l=t.id_carrier,s=t.id_payment,o=t.id_article,m=t.isActive,u=t.total_price;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"subtitle-profil text-left mb-4 color3c8ce4 mt-5"},"Location N\xb0 ",a),r.a.createElement("i",{className:"ri-arrow-go-back-line go-back-my-account ri-lg position-absolute",onClick:function(){return e.history.goBack()}}),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de commande : ",V()(n).format("DD-MM-YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6"},"Prix total : ",u," \u20ac")),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Article : ",o&&o.title),r.a.createElement("p",{className:"col-12 col-sm-6"},"Etat : ",m?"Active":"Annul\xe9e")),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de d\xe9but : ",V()(c).format("DD-MM-YYYY")),r.a.createElement("p",{className:"col-12 col-sm-6"},"Date de fin : ",V()(i).format("DD-MM-YYYY"))),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-12 col-sm-6"},"Livraison : ",l&&l.title),r.a.createElement("p",{className:"col-12 col-sm-6"},"Paiement : ",s&&s.title)))};var Oe=function(e){var t=Object(z.h)().id,a=Object(n.useState)({data:[],isFetched:!1,id:t,dataRental:{}}),c=Object(g.a)(a,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){i.isFetched||fetch("http://localhost:5000/louons/api/v1/rental/self",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{data:e.data,isFetched:!0})}))})),i.id&&0===Object.keys(i.dataRental).length&&fetch("http://localhost:5000/louons/api/v1/rental/detail/".concat(i.id),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||l((function(t){return Object(L.a)({},t,{dataRental:e.data})}))})),t!==i.id&&l((function(e){return Object(L.a)({},e,{id:t})}))}),[i,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re,{isMediumWindow:e.isMediumWindow,title:"Mes Locations"}),i.data.length>0&&!i.id?r.a.createElement(le,{data:i.data,linkdetail:"/my_account/rentals",handleIdParams:function(e){l((function(t){return Object(L.a)({},t,{id:e})}))},datatodisplay:{rentalId:"N\xb0 de location",id_article:"Article",id_payment:"Paiement",id_carrier:"Livraison",date_register:"Date de commande",total_price:"Prix total",seemore:"Voir"}}):i.id?r.a.createElement(ve,{datarental:i.dataRental,history:e.history}):r.a.createElement("p",null,"Vous n'avez pas encore de location"))};var ye=function(){var e=Object(n.useState)(),t=Object(g.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),l=Object(g.a)(i,2),s=l[0],o=l[1],m=Object(z.g)(),u=Object(n.useRef)(null),d=function(){u.current||(window.innerWidth<768?c(!0):c(!1))};function p(e){o(e),"logout"===e?m.push("/".concat(e)):m.push("/my_account/".concat(e))}return Object(n.useEffect)((function(){return u.current=!1,u.current||d(),"/my_account/rentals"===m.location.pathname?o("rentals"):"/my_account/announces"===m.location.pathname?o("announces"):"/my_account/addresses"===m.location.pathname?o("addresses"):"/my_account"===m.location.pathname&&o(""),function(){u.current=!0}}),[a,m]),window.addEventListener("resize",d),r.a.createElement("div",{className:"col-12 col-lg-10 mx-auto"},r.a.createElement("div",{className:"row mx-auto d-flex justify-content-center"},r.a.createElement("div",{className:"col-12 col-md-4 col-lg-3 text-center"},a?r.a.createElement("select",{className:"custom-select w-75 mx-auto",value:s,onChange:function(e){return p(e.target.value)}},r.a.createElement("option",{value:""},"Informations"),r.a.createElement("option",{value:"announces"},"Mes Annonces"),r.a.createElement("option",{value:"addresses"},"Mes Adresses"),r.a.createElement("option",{value:"rentals"},"Mes locations")):r.a.createElement("ul",{className:"list-unstyled mt-5"},r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return p("")}},"Informations"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return p("announces")}},"Mes Annonces"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return p("addresses")}},"Mes Adresses"),r.a.createElement("li",{className:"p-2 text-center menu-link-account",onClick:function(){return p("rentals")}},"Mes locations"),r.a.createElement("li",{className:"p-2 text-center text-danger menu-link-account",onClick:function(){return p("logout")}},"D\xe9connexion"))),r.a.createElement("div",{className:"col-12 col-md-8 col-lg-9 container-myaccount p-0 position-relative"},r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/my_account"},r.a.createElement(te,{isMediumWindow:a,component:ie,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/my_account/announces"},r.a.createElement(te,{isMediumWindow:a,component:se,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/my_account/addresses/:id?"},r.a.createElement(te,{isMediumWindow:a,component:je,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/my_account/rentals/:id?"},r.a.createElement(te,{isMediumWindow:a,component:Oe,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"}))))))};function xe(e){return r.a.createElement(r.a.Fragment,null,e.errorFile>0&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},e.errorMessage),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},e.label," :"),r.a.createElement("input",{type:"file",name:e.name,reset:e.reset,multiple:e.isMultiple,className:"form-control-file col-9 col-sm-6 col-md-5",onChange:e.setPicture})))}xe.defaultProps={label:"Images",anme:"file"};var Ne=xe;function Se(e){return r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:e.titlepage?"".concat(e.titlepage," utilisateur"):"Inscription",isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Utilisateur enregistr\xe9 avec succ\xe9s",failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},"/inscription"!==e.pathname&&(""!==e.pictureDisplay&&void 0!==e.pictureDisplay?r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(e.pictureDisplay),className:"w-100 rounded-circle",alt:"avatar_image_profil"}))):r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/default-avatar.png",className:"w-100 rounded-circle",alt:"avatar_image_profil"})))),r.a.createElement(Ne,{errorPicture:e.errorPicture,isSubmit:e.isSubmit,reset:e.picture,setPicture:function(t){e.setPicture(t.target.files)},label:"Photo de profil",errorMessage:"Seule une image sous le format png ou jpg/jpeg est accept\xe9",isMultiple:!0}),r.a.createElement("div",{className:"row form-group my-md-3 d-flex justify-content-center align-items-center col-12 mx-auto text-center"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Titre :"),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-5"},r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-2",checked:"mr"===e.gender,id:"mr",key:"mr",onChange:function(){return e.setGender("mr")}})),r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-2",id:"mrs",key:"mrs",checked:"mrs"===e.gender,onChange:function(){return e.setGender("mrs")}})))),r.a.createElement(ne,{label:"Nom :",name:"lastname",type:"text",value:e.lastName,change:function(t){e.handleName(t)},errorcondition:e.errorLastName&&e.isSubmit,errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement(ne,{label:"Pr\xe9nom :",name:"firstname",type:"text",value:e.firstName,change:function(t){e.handleName(t)},errorcondition:e.errorFirstName&&e.isSubmit,errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),e.errorDateBirth&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100 p-2"},"Veuillez s\xe9lectionner une date"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Date de naissance :"),r.a.createElement("input",{type:"date",name:"datebirth",min:"1940-01-01",max:"2010-01-01",value:e.dateBirth&&V()(e.dateBirth).format("YYYY-MM-DD"),className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){""===t.target.value?e.setDateBirth():e.setDateBirth(t.target.value)}})),r.a.createElement(ne,{label:"Email :",name:"email",type:"email",value:e.email,change:function(t){e.setEmail(t.target.value)},errorcondition:e.errorMail&&e.isSubmit,errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ne,{label:"Mot de passe :",name:"password",type:"password",value:e.password,change:function(t){e.setPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorPassword&&e.isSubmit:e.errorPassword,errormessage:" Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ne,{label:"Confirmation :",name:"passwordconf",type:"password",value:e.confirmationPassword,change:function(t){e.setConfirmationPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorConfirmation&&e.isSubmit:e.errorConfirmation,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Inscription \xe0 la newsletter :"),r.a.createElement("div",{className:"col-6 col-md-5"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Oui"),r.a.createElement("input",{type:"radio",name:"issubscribe",checked:e.isSubscribe,id:"subscribe",key:"subscribe",onChange:function(){return e.setIsSubscribe(!0)}}),r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Non"),r.a.createElement("input",{type:"radio",name:"issubscribe",id:"notsubscribe",key:"notsubscribe",checked:!e.isSubscribe,onChange:function(){return e.setIsSubscribe(!1)}}))))}Se.defaultProps={dateBirth:""};var we=Se;var Ce=function(e){var t=Object(n.useState)("POST"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)("mr"),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(""),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(!1),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(""),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(""),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(!1),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(""),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(""),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)(0),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)(!1),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=Object(n.useState)(!1),he=Object(g.a)(be,2),ge=he[0],Ee=he[1],je=Object(n.useState)(!1),ve=Object(g.a)(je,2),Oe=ve[0],ye=ve[1],xe=Object(n.useState)(!1),Ne=Object(g.a)(xe,2),Se=Ne[0],Ce=Ne[1],ke=Object(n.useState)(!1),De=Object(g.a)(ke,2),Pe=De[0],Te=De[1],_e=Object(n.useState)(!1),Ae=Object(g.a)(_e,2),Me=Ae[0],Fe=Ae[1],Le=Object(n.useState)(!1),Ie=Object(g.a)(Le,2),Ye=Ie[0],Ue=Ie[1],ze=Object(n.useState)(!1),Ge=Object(g.a)(ze,2),Re=Ge[0],Ve=Ge[1],Be=Object(n.useState)(Object(z.h)().id),We=Object(g.a)(Be,1)[0],Je=new FormData;return Object(n.useEffect)((function(){ie(!1),We&&"PUT"!==c&&(i("PUT"),fetch("http://localhost:5000/louons/api/v1/user/".concat(We),{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/users")}else m(t.gender.toLowerCase()),j(t.lastName),x(t.firstName),C(t.date_birth),F(t.email),f(t.isSubscribe),B(t.path_picture)}))),me(0);var t=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),a=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),n=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);if(1===Object.keys(Y).length)for(var r=0;r<Y.length;r++)"image/png"!==Y[r].type&&"image/jpeg"!==Y[r].type?($(!0),me((function(e){return e+1}))):($(!1),Je.append("file".concat(r),Y[r]));else Object.keys(Y).length>1&&($(!0),me((function(e){return e+1})));t.test(E)&&""!==E?fe(!1):(fe(!0),me((function(e){return e+1}))),t.test(y)&&""!==y?Ee(!1):(Ee(!0),me((function(e){return e+1}))),w||"POST"!==c?T(!1):(T(!0),me((function(e){return e+1}))),a.test(M)&&""!==M?ye(!1):(ye(!0),me((function(e){return e+1}))),!n.test(H)&&""!==H||""===H&&"POST"===c?(Ce(!0),me((function(e){return e+1}))):Ce(!1),te!==H||""===te&&"POST"===c?(Te(!0),me((function(e){return e+1}))):Te(!1),ie(oe>0)}),[oe,E,y,M,H,te,We,c,Je,w,Y,e.history]),r.a.createElement(we,{isSuccess:Ye,isFailed:Re,handleSubmit:function(t){t.preventDefault(t),Fe(!0),Je.append("gender",o),Je.append("lastName",E),Je.append("firstName",y),Je.append("date_birth",w),Je.append("email",M),Je.append("isSubscribe",p),""!==H&&Je.append("password",H);var a="POST"===c?"http://localhost:5000/louons/api/v1/user":"http://localhost:5000/louons/api/v1/user/".concat(We);ce||fetch(a,{method:c,credentials:"include",body:Je}).then((function(e){return e.json()})).then((function(t){t.error?t.error&&(Ve(!0),setTimeout((function(){Ve(!1)}),1500)):(Ue(!0),setTimeout((function(){Ue(!1)}),1500),"/inscription"===e.location.pathname&&setTimeout((function(){return e.history.push("/login")}),2e3),"POST"===c?(m(""),j(""),x(""),C(""),F(""),K(""),ae(""),U(""),f(!1)):(B(t.picture),K(""),ae("")),Fe(!1))}))},gender:o,lastName:E,firstName:y,dateBirth:w,email:M,password:H,confirmationPassword:te,setDateBirth:C,setEmail:F,setPassword:K,setConfirmationPassword:ae,setGender:m,handleName:function(e){"lastname"===e.target.name?j(e.target.value):x(e.target.value)},errorLastName:pe,errorFirstName:ge,errorMail:Oe,errorPassword:Se,errorConfirmation:Pe,isSubscribe:p,setIsSubscribe:f,titlepage:e.title,isSubmit:Me,method:c,picture:Y,setPicture:U,errorPicture:Z,pictureDisplay:V,setPictureDisplay:B,pathname:e.location.pathname,errorDateBirth:P})};function ke(e){return r.a.createElement(r.a.Fragment,null,e.errorDescription&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},e.errorMessage),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:e.labelClass},e.label),r.a.createElement("textarea",{type:"text",name:"description",rows:"5",value:e.description,className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){e.setDescription(t.target.value)}})))}ke.defaultProps={labelClass:"col-9 col-sm-4 mt-2"};var De=ke;var Pe=function(e){var t=Object(n.useContext)(P).dataUser;return Object(n.useEffect)((function(){t.adminLevel||(e.setErrorGrasp(!1),e.setOwner(t.id))}),[t,e]),r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une annonce"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Article ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},t.adminLevel&&r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),e.pictureDisplay&&e.pictureDisplay.length>0&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},e.pictureDisplay.map((function(e){return r.a.createElement("div",{className:"col-4 col-sm-4 p-2 col-md-3 mx-auto",key:e.title},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(e.path_picture),className:"w-100",alt:""}))}))),e.errorCategory&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Veuillez s\xe9lectionner une cat\xe9gorie"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Cat\xe9gorie :"),r.a.createElement("select",{name:"id_category",id:"category",className:"form-control col-9 col-sm-6 col-md-5",value:e.idCategory,onChange:function(t){return e.setIdCategory(t.target.value)}},r.a.createElement("option",{value:""},"--Veuillez choisir une cat\xe9gorie--"),e.category.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))),t.adminLevel&&r.a.createElement(he,{errorGrasp:e.errorGrasp,idParams:e.idParams,labelClass:"col-9 col-sm-4 mt-2",grasp:e.grasp,titleLabel:"Propri\xe9taire",setGrasp:e.setGrasp,setId:e.setOwner,setErrorGrasp:e.setErrorGrasp,link:"http://localhost:5000/louons/api/v1/user/all"}),r.a.createElement(ne,{label:"Titre :",name:"title",labelClass:"col-9 col-sm-4 mt-2",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res"}),r.a.createElement(De,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 250 caract\xe8res",label:"Description :"}),e.errorPrice&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center mx-auto"},"Veuillez saisir un prix valide compris entre 0 et 2000"),r.a.createElement(ne,{label:"Tarif \u20ac/jr :",name:"price",labelClass:"col-9 col-sm-4 mt-2",type:"number",value:e.price,change:function(t){e.setPrice(t.target.value)}}),r.a.createElement(Ne,{errorFile:e.errorFile,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"L'article doit contenir 3 images sous le format png ou jpg/jpeg",isMultiple:!0}))};var Te=function(e){var t=Object(n.useState)("POST"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(!1),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)([]),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(""),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(0),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(""),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(""),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(""),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(""),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)(0),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)([]),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=Object(n.useState)(""),he=Object(g.a)(be,2),ge=he[0],Ee=he[1],je=Object(n.useState)(!1),ve=Object(g.a)(je,2),Oe=ve[0],ye=ve[1],xe=Object(n.useState)(!1),Ne=Object(g.a)(xe,2),Se=Ne[0],we=Ne[1],Ce=Object(n.useState)(!1),ke=Object(g.a)(Ce,2),De=ke[0],Te=ke[1],_e=Object(n.useState)(!1),Ae=Object(g.a)(_e,2),Me=Ae[0],Fe=Ae[1],Le=Object(n.useState)(!1),Ie=Object(g.a)(Le,2),Ye=Ie[0],Ue=Ie[1],ze=Object(n.useState)(!1),Ge=Object(g.a)(ze,2),Re=Ge[0],Ve=Ge[1],Be=Object(n.useState)(!0),We=Object(g.a)(Be,2),Je=We[0],Ze=We[1],$e=Object(n.useState)("enregistr\xe9"),qe=Object(g.a)($e,2),Qe=qe[0],He=qe[1],Ke=new FormData,Xe=Object(n.useState)(Object(z.h)().id),et=Object(g.a)(Xe,1)[0];return Object(n.useEffect)((function(){if(U(0),et&&!p&&(i("PUT"),He("modifi\xe9"),fetch("http://localhost:5000/louons/api/v1/article/detail/".concat(et),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/articles")}else f(!0),F(t.data.id_category._id),me(t.data.price),K(t.data.title),ae(t.data.description),B("".concat(t.data.id_user.lastName," ").concat(t.data.id_user.firstName)),fe(t.data.pictures),C(t.data.isActive),Ze(!1)}))),("POST"===c&&!o&&!et||"PUT"===c&&p&&!o)&&fetch("http://localhost:5000/louons/api/v1/category/all/activecategory",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(T(e.data),m(!0))})),H.length<3||H.length>30?(Te(!0),U((function(e){return e+1}))):Te(!1),3===Object.keys(ge).length){for(var t=0,a=0;a<ge.length;a++)"image/png"!==ge[a].type&&"image/jpeg"!==ge[a].type?(t++,U((function(e){return e+1}))):Ke.append("file".concat(a),ge[a]);Ve(t>0)}else"POST"!==c||et||(Ve(!0),U((function(e){return e+1})));Je&&U((function(e){return e+1})),""===M?(we(!0),U((function(e){return e+1}))):we(!1),0===oe||""===oe||typeof oe===String||oe>2e3||oe<0?(Fe(!0),U((function(e){return e+1}))):Fe(!1),te.length<10||te.length>150?(Ue(!0),U((function(e){return e+1}))):Ue(!1),ye(Y>0)}),[H,te,M,Y,o,oe,V,ce,Je,ge,Ke,et,p,Re,c,e.history]),r.a.createElement(Pe,{titlepage:e.title||"Proposer",isSuccess:E,isFailed:y,isActive:w,setIsActive:C,grasp:V,setGrasp:B,owner:Z,setOwner:$,title:H,setTitle:K,description:te,setDescription:ae,errorDescription:Ye,idCategory:M,setIdCategory:F,price:oe,category:P,setPrice:me,handleSubmit:function(e){e.preventDefault();var t="POST"===c?"http://localhost:5000/louons/api/v1/article":"http://localhost:5000/louons/api/v1/article/".concat(et);ie(!0),Ke.append("title",H),Ke.append("description",te),Ke.append("price",oe),Ke.append("isActive",w),"POST"===c&&Ke.append("id_user",Z),Ke.append("id_category",M),Oe||fetch(t,{method:c,credentials:"include",body:Ke}).then((function(e){return e.json()})).then((function(e){e.error?(x(!0),setTimeout((function(){return x(!1)}),2e3),'"id_user" is not allowed to be empty'===e.message&&Ze(!0)):(j(!0),setTimeout((function(){j(!1)}),2e3),"POST"===c?(B(""),K(""),ae(""),me(0),$(""),Ee(""),F(""),ie(!1)):e.pictures&&fe(e.pictures))}))},errorTitle:De,errorCategory:Se,errorFile:Re,errorGrasp:Je,setErrorGrasp:Ze,errorPrice:Me,setPicture:Ee,isSubmit:ce,pictureDisplay:pe,idParams:et,statusMessageForm:Qe})};a(50);var _e=function(){var e=Object(n.useContext)(P).setLinkAuth;return Object(n.useEffect)((function(){e("http://localhost:5000/louons/api/v1/authenticationuser")}),[e]),r.a.createElement(p,null,r.a.createElement(A,null),r.a.createElement("main",{className:"row widthmain mx-auto"},r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/"},r.a.createElement(U,null)),r.a.createElement(z.b,{exact:!0,path:"/announces",render:function(){return r.a.createElement(Z,null)}}),r.a.createElement(z.b,{exact:!0,path:"/announce/:id",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(z.b,{exact:!0,path:"/categories/:title",render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(z.b,{path:"/my_account"},r.a.createElement(te,{component:ye,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/post_announce"},r.a.createElement(te,{component:Te,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/inscription",render:function(e){return r.a.createElement(Ce,e)}}),r.a.createElement(z.b,{exact:!0,path:"/order"},r.a.createElement(te,{component:Q,pageifnotauth:"/login",linkAuth:"http://localhost:5000/louons/api/v1/authenticationuser"})),r.a.createElement(z.b,{exact:!0,path:"/logout",render:function(e){return r.a.createElement(K,Object.assign({},e,{redirect:"/"}))}}),r.a.createElement(z.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(H,Object.assign({linkapi:"http://localhost:5000/louons/api/v1/authenticationuser",redirect:"/my_account"},e))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))),r.a.createElement("div",{className:"fill"}),r.a.createElement(F,null))};var Ae=function(){var e=Object(n.useContext)(P).dataUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"titlepage"},"Bienvenue sur le panel de louons.fr"," ","".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("div",{className:"text-center"},r.a.createElement("img",{src:"/assets/img/welcome.jpg",className:"imagehome",alt:"welcome_panel"})))};var Me=function(e){var t=Object(n.useState)(e.isActive),a=Object(g.a)(t,2),c=a[0],i=a[1];return r.a.createElement(fe.a,{checked:c,onlabel:e.onlabel,offlabel:e.offlabel,size:"xs",width:"70",onChange:function(){e.change(),i(!c)}})},Fe=r.a.createContext();function Le(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),c=a[0],i=a[1];return r.a.createElement(Fe.Provider,{value:{isToggle:c,setToggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!c;i(e)}}},e.children)}var Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).getList=function(){fetch(a.props.linkapi,{credentials:"include"}).then((function(e){return e.json()})).then((function(e){a._isMounted&&(e.error?a.setState({isLoading:!1}):a.setState({listOfData:e.data,adminLevel:e.adminLevel,isLoading:!1}))}))},a.handleRequestFetch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a.setState({isLoadingUpdate:!0});var r=a.props.linkputapi||a.props.linkapi;fetch("".concat(r,"/").concat(e),{method:t,credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(e){e.error?"Not authorized admin level"===e.message&&(a.setState({isLoadingUpdate:!1,errorMessageAdminLevel:!0}),setTimeout((function(){a.setState({errorMessageAdminLevel:!1})}),1500)):a.setState({isLoadingUpdate:!1}),"DELETE"===t&&a.getList()}))},a.state={isLoading:!1,isLoadingUpdate:!1,errorMessageAdminLevel:!1,listOfTh:e.th,listOfData:[],adminLevel:""},a._isMounted=!1,a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setState({isLoading:!0}),this.getList(),this.context&&this.context.setToggle(!1)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.listOfData,n=t.listOfTh,c=t.isLoading,i=t.isLoadingUpdate,l=t.adminLevel,s=t.errorMessageAdminLevel;return c?r.a.createElement("p",{className:"bg-success text-white p-2"},"Loading...."):r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("p",{className:"bg-danger text-white p-2"},"Vous n'avez pas les droits n\xe9cessaires pour effectuer cette action...."),r.a.createElement("h4",{className:"titlepage"},this.props.titlepage),i&&r.a.createElement("p",{className:"bg-success text-white p-2"},"Loading...."),r.a.createElement("div",{className:"text-right p-3"},this.props.titlebutton&&this.props.linkbutton?r.a.createElement(f.b,{to:"".concat(this.props.link,"/add")},r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4"},this.props.titlebutton)):r.a.createElement("button",{className:"btn text-white bgcolor3c8ce4",onClick:function(){return e.context.setToggle(!e.context.isToggle)}},this.props.titlebutton)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,n.map((function(e,t){return e.delete&&"superadmin"===l?r.a.createElement("th",{className:"text-center",key:t},Object.values(e)):!!e.delete||r.a.createElement("th",{className:"text-center",key:t},Object.values(e))})))),r.a.createElement("tbody",null,a.map((function(t,a){return r.a.createElement("tr",{key:a},n.map((function(n){return Object.keys(n).map((function(n){return"seeMore"===n?r.a.createElement("td",{className:"text-center",key:"seemore".concat(a)},r.a.createElement(f.b,{key:"link".concat(a),to:"".concat(e.props.link,"/").concat(t._id)},"Voir")):"delete"===n&&"superadmin"===l?r.a.createElement("td",{className:"text-center",key:"delete".concat(a)},r.a.createElement("i",{className:"ri-delete-bin-6-fill ri-xl",onClick:function(){return e.handleRequestFetch(t._id,"DELETE")}})):"category"===n?r.a.createElement("td",{className:"text-center",key:"category".concat(a)},t.id_category.title):"price"===n?r.a.createElement("td",{className:"text-center",key:"price".concat(a)},"".concat(t.price," \u20ac")):"article"===n?r.a.createElement("td",{className:"text-center",key:"article".concat(a)},t.id_article.title):"user"===n?r.a.createElement("td",{className:"text-center",key:"user".concat(a)},"".concat(t.id_user.lastName," ").concat(t.id_user.firstName)):"address"===n?r.a.createElement("td",{className:"text-center",key:"user".concat(a)},"".concat(t.address," ").concat(t.zipcode," ").concat(t.city)):Object.keys(t).map((function(c){return n!==c||r.a.createElement("td",{key:a,className:"text-center"},"isSubscribe"===n?t[c]?"Oui":"Non":"isActive"===n?r.a.createElement(Me,{onlabel:"Actif",offlabel:"Inactif",isActive:t.isActive,id:t._id,change:function(){e.handleRequestFetch(t._id,"PUT",JSON.stringify({isActive:!t.isActive}))},handleIsActive:e.handleRequestFetch}):"isTop"===n?r.a.createElement(Me,{onlabel:"Top",offlabel:"Non",isActive:t.isTop,id:t._id,change:function(){e.handleRequestFetch(t._id,"PUT",JSON.stringify({isTop:!t.isTop}))},handleIsActive:e.handleRequestFetch}):"description"===n?"".concat(t.description.slice(0,30),"..."):"date_register"===n||"start_date"===n||"end_date"===n?V()(t[c]).format("DD/MM/YYYY"):t[c])}))}))})))}))))))}}]),t}(n.Component);Ie.contextType=Fe;var Ye=Ie;var Ue=function(){return r.a.createElement(Ye,{titlepage:"Liste des utilisateurs",linkapi:"http://localhost:5000/louons/api/v1/user/all",linkputapi:"http://localhost:5000/louons/api/v1/user",th:[{clientId:"ID"},{gender:"Titre"},{lastName:"Nom"},{firstName:"Pr\xe9nom"},{date_register:"Date d'inscription"},{isActive:"Activer"},{isSubscribe:"Newsletter"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un utilisateur",link:"users",linkbutton:!0})};var ze=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/users"},r.a.createElement(Ue,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/users/add",render:function(e){return r.a.createElement(Ce,Object.assign({},e,{title:"Ajouter un"}))}}),r.a.createElement(z.b,{exact:!0,path:"/admin/users/:id",render:function(e){return r.a.createElement(Ce,Object.assign({},e,{title:"Modifier un"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var Ge=function(e){var t=e.isToggle?"d-block":"d-none",a=Object(n.useContext)(Fe);return r.a.createElement("div",{className:"".concat(t," addpopupcontainer bgcolor9cd1ff")},r.a.createElement("div",{className:"d-flex justify-content-end p-2"},r.a.createElement("i",{className:"ri-close-circle-line ri-2x",onClick:function(){return a.setToggle(!a.isToggle)}})),e.render)};var Re=function(e){var t=Object(n.useContext)(Fe);return e.redirect&&window.location.reload(!1),r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:t.isToggle?"Ajouter une cat\xe9gorie":"Modifier une cat\xe9gorie",isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Article ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},!t.isToggle&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Active :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.handleFetchPut("isActive")}})),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Date de cr\xe9ation :"),r.a.createElement("p",{className:"m-0"},V()(e.dateRegister).format("DD-MM-YYYY")))),r.a.createElement(ne,{label:"Titre :",name:"title",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ ne peut pas contenir de chiffre ou \xeatre vide"}),r.a.createElement(ne,{label:"Lien :",value:e.link,name:"link",type:"text",change:function(t){e.setLink(t.target.value)},errorcondition:e.errorLink&&e.isSubmit,errormessage:"Ce champ ne peut pas contenir d'espace ou de chiffre ou \xeatre vide"}),e.errorDescription&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Ce champ doit contenir entre 10 et 150 caract\xe8res"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Description :"),r.a.createElement("textarea",{type:"text",name:"description",value:e.description,className:"form-control col-9 col-sm-6",onChange:function(t){e.setDescription(t.target.value)}})))};var Ve=function(e){var t=Object(n.useState)("GET"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(""),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)("enregistr\xe9"),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(!1),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(!1),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(!1),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(0),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(!1),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)(!1),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)(!1),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=Object(z.h)().id,he=new RegExp(/[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),ge=new RegExp(/^[a-zA-Z-]+$/),Ee=Object(n.useContext)(Fe);Object(n.useEffect)((function(){i("PUT"),K(0),"GET"===c&&be&&(j("modifi\xe9"),fetch("http://localhost:5000/louons/api/v1/category/detail/".concat(be),{method:c,credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/categories")}else x(t.data.title),T(t.data.link),U(t.data.description),m(t.data.isActive),f(t.data.date_register)}))),he.test(y)&&""!==y?C(!1):(C(!0),K((function(e){return e+1}))),ge.test(P)&&""!==P?F(!1):(F(!0),K((function(e){return e+1}))),""===Y||Y.length<10||Y.length>150?(B(!0),K((function(e){return e+1}))):B(!1),$(H>0)}),[be,y,P,Y,c,he,ge,H,e.history]);var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";fe(!0);var t="isActive"===e?JSON.stringify({isActive:!o}):JSON.stringify({title:y,description:Y,link:P});!Z||"isActive"===e&&be?fetch("http://localhost:5000/louons/api/v1/category/".concat(be),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:t}).then((function(e){return e.json()})).then((function(t){t.error?(ie(!0),setTimeout((function(){ie(!1)}),1500)):(ae(!0),setTimeout((function(){ae(!1)}),1500),"isActive"===e&&m(!o),fe(!1))})):"isActive"!==e||be||m(!o)},ve=function(){fe(!0);var e=JSON.stringify({title:y,description:Y,link:P,isActive:o});Z||fetch("http://localhost:5000/louons/api/v1/category",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:e}).then((function(e){return e.json()})).then((function(e){e.error?(ie(!0),setTimeout((function(){ie(!1)}),1500)):(ae(!0),setTimeout((function(){ae(!1)}),1500),x(""),T(""),U(""),Ee.setToggle(!1),me(!0),fe(!1))}))};return r.a.createElement(Re,{description:Y,setDescription:U,title:y,setTitle:x,handleSubmit:function(e){e.preventDefault(),Ee.isToggle?ve():je()},handleFetchPut:je,link:P,setLink:T,isActive:o,setIsActive:m,dateRegister:p,idParams:be,isSuccess:te,isFailed:ce,errorTitle:w,errorLink:M,errorDescription:V,redirect:oe,isSubmit:pe,statusMessageForm:E})};var Be=function(){var e=Object(n.useContext)(Fe);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{isToggle:e.isToggle,render:r.a.createElement(Ve,{title:"Ajouter"})}),r.a.createElement(Ye,{titlepage:"Liste des cat\xe9gories",linkapi:"http://localhost:5000/louons/api/v1/category/all",linkputapi:"http://localhost:5000/louons/api/v1/category",th:[{categoryId:"ID"},{title:"Titre"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une cat\xe9gorie",link:"categories"}))};var We=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/categories"},r.a.createElement(Be,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/categories/:id",render:function(e){return r.a.createElement(Ve,e)}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var Je=function(){return r.a.createElement(Ye,{titlepage:"Liste des Articles",linkapi:"http://localhost:5000/louons/api/v1/article",th:[{articleId:"ID"},{title:"Titre"},{description:"Description"},{category:"Cat\xe9gorie"},{price:"Prix"},{isActive:"Etat"},{isTop:"Au top"},{seeMore:"Voir"},{date_register:"Date d'ajout"},{delete:"Supprimer"}],titlebutton:"Ajouter un article",link:"articles",linkbutton:!0})};var Ze=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/articles"},r.a.createElement(Je,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/articles/add"},r.a.createElement(Te,{title:"Ajouter"})),r.a.createElement(z.b,{exact:!0,path:"/admin/articles/:id",render:function(e){return r.a.createElement(Te,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var $e=function(){return r.a.createElement(Ye,{titlepage:"Liste des utilisateurs",linkapi:"http://localhost:5000/louons/api/v1/rental",th:[{rentalId:"ID"},{article:"Article"},{user:"Locataire"},{start_date:"Date de d\xe9but"},{end_date:"Date de fin"},{seeMore:"Voir"}],titlebutton:"Ajouter une location",link:"rentals",linkbutton:!0})};var qe=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){e.idArticle||i("")}),[e.idArticle]),r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," location"),isFailed:e.isFailed,class:"row m-0 mx-auto col-12 col-xl-10 text-center py-md-2",isSuccess:e.isSuccess,successMessage:"Location ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},e.idParams&&r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement(he,{errorGrasp:e.errorGraspArticle&&e.isSubmit,idParams:e.idParams,grasp:e.graspArticle,titleLabel:"Article",divclass:"col-12 col-sm-8 col-lg-6 mx-auto",setGrasp:e.setGraspArticle,setId:e.setIdArticle,setErrorGrasp:e.setErrorGraspArticle,setSpec:e.reset,link:"http://localhost:5000/louons/api/v1/article"}),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Prix /jr :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0 text-danger"},"".concat(e.pricePerDay," \u20ac"))),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0 "},"Prix Total :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0 text-danger font-weight-bold"},"".concat(e.totalPrice," \u20ac")))),e.idParams?r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Date de d\xe9but :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0"},V()(e.dateStart).format("DD-MM-YYYY"))),r.a.createElement("div",{className:"row m-0 col-6 col-lg-3 mx-auto p-0"},r.a.createElement("label",{className:"col-9 col-sm-6 mx-auto p-0"},"Date de fin :"),r.a.createElement("p",{className:"col-9 col-sm-6 mx-auto p-0"},V()(e.dateEnd).format("DD-MM-YYYY")))):r.a.createElement(ne,{label:"Nombre de jour de location :",name:"numberday",type:"number",value:e.numberListDate,change:function(t){e.setNumberListDate(t.target.value),0!==parseInt(t.target.value)&&""!==t.target.value||e.reset()},errorcondition:e.errorNumberListDate&&e.isSubmit,errormessage:"Le nombre de jour doit \xeatre sup\xe9rieur \xe0 0",inputClass:"form-control col-9 col-sm-3 col-md-1",labelClass:"col-9 col-sm-7"}),!e.errorNumberListDate&&!e.errorGraspArticle&&e.errorDate&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100 p-2"},"Veuillez s\xe9lectionner une date"),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},r.a.createElement("ul",{className:"list-unstyled mx-auto"},e.listDate.length>0&&e.listDate.map((function(t,a){return r.a.createElement(B,{key:a,index:a,className:c===a?"bg-secondary text-white":"",setCurrLi:function(){return i(a)},dateStart:t.dateStart,dateEnd:t.dateEnd,setDateStart:function(){return e.setDateStart(V()(t.dateStart).format("YYYY-MM-DD"))},setDateEnd:function(){return e.setDateEnd(V()(t.dateEnd).format("YYYY-MM-DD"))}})})))),r.a.createElement("div",{className:"row m-0 d-flex align-items-center w-100 mx-auto"},e.errorSameUser&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Erreur le propri\xe9taire de l'article ne peut pas \xeatre le locataire"),r.a.createElement("div",{className:"row m-0 col-12 col-md-6 align-items-center"},r.a.createElement("label",{className:"mx-auto col-9 col-sm-6"},"Propri\xe9taire :"),r.a.createElement("p",{className:"mx-auto col-9 col-sm-6 col-md-5 m-0"},e.owner)),r.a.createElement(he,{errorGrasp:e.errorGraspTenant&&e.isSubmit,idParams:e.idParams,grasp:e.graspTenant,titleLabel:"Locataire",divclass:"col-12 col-md-6",setGrasp:e.setGraspTenant,setId:e.setIdTenant,setErrorGrasp:e.setErrorGraspTenant,link:"http://localhost:5000/louons/api/v1/user/all"})),e.errorDelivery&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Veuillez s\xe9lectionner un moyen de transport"),r.a.createElement("div",{className:"row m-0 form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Transport :"),r.a.createElement("select",{name:"id_delivery",id:"delivery",className:"p-1 col-9 col-sm-6 col-md-5",value:e.idDelivery,onChange:function(t){return e.setIdDelivery(t.target.value)}},r.a.createElement("option",{value:""},"--Transport--"),e.deliveries.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))),e.errorPayment&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center w-100"},"Veuillez s\xe9lectionner un paiement"),r.a.createElement("div",{className:"row m-0 form-group my-3 d-flex justify-content-center align-items-center w-100 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Paiement :"),r.a.createElement("select",{name:"id_payment",id:"payment",className:"p-1 col-9 col-sm-6 col-md-5",value:e.idPayment,onChange:function(t){return e.setIdPayment(t.target.value)}},r.a.createElement("option",{value:""},"--Paiement--"),e.payments.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.title)})))))};var Qe=function(e){var t=Object(n.useState)("POST"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)([]),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(0),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)("enregistr\xe9"),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(""),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(""),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(""),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(""),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(0),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(0),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)([]),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)([]),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=Object(n.useState)(""),he=Object(g.a)(be,2),ge=he[0],Ee=he[1],je=Object(n.useState)(""),ve=Object(g.a)(je,2),Oe=ve[0],ye=ve[1],xe=Object(n.useState)(""),Ne=Object(g.a)(xe,2),Se=Ne[0],we=Ne[1],Ce=Object(n.useState)(""),ke=Object(g.a)(Ce,2),De=ke[0],Pe=ke[1],Te=Object(n.useState)(""),_e=Object(g.a)(Te,2),Ae=_e[0],Me=_e[1],Fe=Object(n.useState)(!1),Le=Object(g.a)(Fe,2),Ie=Le[0],Ye=Le[1],Ue=Object(n.useState)(!1),ze=Object(g.a)(Ue,2),Ge=ze[0],Re=ze[1],Ve=Object(n.useState)(!1),Be=Object(g.a)(Ve,2),We=Be[0],Je=Be[1],Ze=Object(n.useState)(!1),$e=Object(g.a)(Ze,2),Qe=$e[0],He=$e[1],Ke=Object(n.useState)(!1),Xe=Object(g.a)(Ke,2),et=Xe[0],tt=Xe[1],at=Object(n.useState)(!1),nt=Object(g.a)(at,2),rt=nt[0],ct=nt[1],it=Object(n.useState)(!1),lt=Object(g.a)(it,2),st=lt[0],ot=lt[1],mt=Object(n.useState)(!1),ut=Object(g.a)(mt,2),dt=ut[0],pt=ut[1],ft=Object(n.useState)(!1),bt=Object(g.a)(ft,2),ht=bt[0],gt=bt[1],Et=Object(n.useState)(!1),jt=Object(g.a)(Et,2),vt=jt[0],Ot=jt[1],yt=Object(n.useState)(0),xt=Object(g.a)(yt,2),Nt=xt[0],St=xt[1],wt=Object(n.useState)(!1),Ct=Object(g.a)(wt,2),kt=Ct[0],Dt=Ct[1],Pt=Object(n.useState)(!1),Tt=Object(g.a)(Pt,2),_t=Tt[0],At=Tt[1],Mt=Object(n.useState)(!1),Ft=Object(g.a)(Mt,2),Lt=Ft[0],It=Ft[1],Yt=Object(z.h)().id;return Object(n.useEffect)((function(){Nt>0&&St(0),"POST"===c&&Yt&&(i("PUT"),T("modifi\xe9")),Yt||Ot(!0),ge&&vt&&fetch("http://localhost:5000/louons/api/v1/article/detail/".concat(ge),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(ae(e.data.price),$(e.data.id_user._id),K("".concat(e.data.id_user.lastName," ").concat(e.data.id_user.firstName)))})),ge&&w>0&&"POST"===c&&vt&&fetch("http://localhost:5000/louons/api/v1/rental/date/".concat(ge,"/").concat(w),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||x(e.data)})).catch((function(e){return console.log(e)})),!kt&&vt&&fetch("http://localhost:5000/louons/api/v1/carrier/all/activecarrier",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(me(e.data),Dt(!0))})),!_t&&vt&&fetch("http://localhost:5000/louons/api/v1/payment/all/activepayment",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||(fe(e.data),At(!0))})),Yt&&!Lt&&(i("PUT"),fetch("http://localhost:5000/louons/api/v1/rental/detail/".concat(Yt),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/rentals")}else It(!0),Ee(t.data.id_article._id),B(t.data.id_user._id),U("".concat(t.data.id_user.clientId," ").concat(t.data.id_user.lastName," ").concat(t.data.id_user.firstName)),ae(t.data.id_article.price),ie(t.data.total_price),ye(t.data.id_carrier._id),we(t.data.id_payment._id),F(t.data.id_article.title),m(t.data.isActive),Pe(t.data.start_date),Me(t.data.end_date),Ot(!0)}))),""===M&&K(""),Z===V&&""!==Z?(Je(!0),St((function(e){return e+1}))):Je(!1),""===Oe?(ct(!0),St((function(e){return e+1}))):ct(!1),""===Se?(ot(!0),St((function(e){return e+1}))):ot(!1),""===M||""===ge?(He(!0),St((function(e){return e+1}))):He(!1),""===Y||""===V?(tt(!0),St((function(e){return e+1}))):tt(!1),""!==De&&""!==Ae||"POST"!==c?Ye(!1):(Ye(!0),St((function(e){return e+1}))),(0===w||""===w||typeof w===String||w<0)&&!Yt?(x([]),ie(0),gt(!0),St((function(e){return e+1}))):w&&M?(ie(te*w),gt(!1)):gt(!1),pt(Nt>0)}),[ge,vt,kt,_t,Oe,w,Z,V,Se,De,Ae,Nt,Y,M,Yt,c,Lt,te,e.history]),r.a.createElement(qe,{titlepage:e.title,isFailed:E,isSuccess:p,statusMessageForm:P,errorGraspArticle:Qe,errorGraspTenant:et,errorDelivery:rt,errorPayment:st,idParams:Yt,graspArticle:M,graspTenant:Y,setGraspArticle:F,setGraspTenant:U,setIdArticle:Ee,setIdTenant:B,setErrorGraspArticle:He,setErrorGraspTenant:tt,totalPrice:ce,owner:H,deliveries:oe,payments:pe,idDelivery:Oe,idPayment:Se,setIdDelivery:ye,setIdPayment:we,isSubmit:Ge,handleSubmit:function(e){e.preventDefault(),Re(!0);var t="POST"===c?"http://localhost:5000/louons/api/v1/rental":"http://localhost:5000/louons/api/v1/rental/".concat(Yt),a="PUT"===c?JSON.stringify({id_payment:Se,id_carrier:Oe,total_price:ce,isActive:o}):JSON.stringify({id_payment:Se,id_carrier:Oe,id_article:ge,id_user:V,total_price:ce,start_date:De,end_date:Ae});dt||fetch(t,{method:c,credentials:"include",headers:{"Content-Type":"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){e.error?(j(!0),setTimeout((function(){j(!1)}),1500)):(f(!0),setTimeout((function(){f(!1)}),1500),"POST"===c&&(x([]),Ee(""),Re(!1),F(""),U(""),B(""),$(""),K(""),ye(""),we(""),Pe(""),Me(""),ae(0),ie(0),C(0)))}))},errorSameUser:We,setDateStart:Pe,setDateEnd:Me,listDate:y,reset:function(){Me(""),Pe(""),x([])},setNumberListDate:C,numberListDate:w,errorNumberListDate:ht,errorDate:Ie,pricePerDay:te,isActive:o,setIsActive:m,dateStart:De,dateEnd:Ae})};var He=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/rentals"},r.a.createElement($e,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/rentals/add"},r.a.createElement(Qe,{title:"Cr\xe9er une"})),r.a.createElement(z.b,{exact:!0,path:"/admin/rentals/:id",render:function(e){return r.a.createElement(Qe,Object.assign({},e,{title:"Modifier une"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var Ke=function(){return r.a.createElement(Ye,{titlepage:"Liste des adresses",linkapi:"http://localhost:5000/louons/api/v1/address",th:[{addressId:"ID"},{title:"Titre de l'adresse"},{user:"Utilisateur"},{address:"Adresse"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une adresse",link:"addresses",linkbutton:!0})};var Xe=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/addresses"},r.a.createElement(Ke,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/addresses/add",render:function(e){return r.a.createElement(Ee,Object.assign({},e,{title:"Ajouter"}))}}),r.a.createElement(z.b,{exact:!0,path:"/admin/addresses/:id",render:function(e){return r.a.createElement(Ee,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var et=function(){return r.a.createElement(Ye,{titlepage:"Liste des paiements",linkapi:"http://localhost:5000/louons/api/v1/payment/all",linkputapi:"http://localhost:5000/louons/api/v1/payment",th:[{paymentId:"ID"},{title:"Titre"},{description:"Description"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un paiement",link:"payments",linkbutton:!0})};var tt=function(e){return r.a.createElement(de,{successMessage:"Paiement ".concat(e.statusMessageForm," avec succ\xe9s"),handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une paiement"),isFailed:e.isFailed,isSuccess:e.isSuccess,failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),""!==e.pictureDisplay&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-6 col-sm-4 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(e.pictureDisplay),className:"w-100",alt:""}))),r.a.createElement(ne,{label:"Titre :",name:"title",type:"text",labelClass:"col-9 col-sm-4 mt-2",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(De,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 200 caract\xe8res",label:"Description :"}),r.a.createElement(Ne,{errorFile:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"Un paiement doit contenir au moins une image sous le format png ou jpg/jpeg",isMultiple:!1}))};var at=function(e){var t=Object(n.useState)("enregistr\xe9"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(!1),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(""),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(""),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(""),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(0),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(!1),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)(!1),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)("POST"),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=new FormData,he=Object(n.useState)(Object(z.h)().id),ge=Object(g.a)(he,1)[0],Ee=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6]*$/);return Object(n.useEffect)((function(){if(K(0),ge&&!E&&(fe("PUT"),i("modifi\xe9"),fetch("http://localhost:5000/louons/api/v1/payment/detail/".concat(ge),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/payments")}else j(!0),T(t.data.description),x(t.data.title),ie(t.data.isActive),$(t.data.path_picture)}))),!Ee.test(y)||""===y||y.length<3||y.length>30?(C(!0),K((function(e){return e+1}))):C(!1),!Ee.test(P)||""===P||P.length<10||P.length>200?(F(!0),K((function(e){return e+1}))):F(!1),1===Object.keys(Y).length)for(var t=0;t<Y.length;t++)"image/png"!==Y[t].type&&"image/jpeg"!==Y[t].type?(B(!0),K((function(e){return e+1}))):(B(!1),be.append("file".concat(t),Y[t]));else"POST"!==pe||ge||(B(!0),K((function(e){return e+1})));ae(H>0)}),[ge,H,Ee,y,P,E,be,pe,Y,e.history]),r.a.createElement(tt,{titlepage:e.title,isFailed:p,isSuccess:o,statusMessageForm:c,handleSubmit:function(e){e.preventDefault(),me(!0),be.append("title",y),be.append("description",P),be.append("isActive",ce);var t="POST"===pe?"http://localhost:5000/louons/api/v1/payment":"http://localhost:5000/louons/api/v1/payment/".concat(ge);te||fetch(t,{method:pe,credentials:"include",body:be}).then((function(e){return e.json()})).then((function(e){e.error?(f(!0),setTimeout((function(){f(!1)}),1500)):(m(!0),setTimeout((function(){m(!1)}),1500),U(""),"POST"===pe?(x(""),T(""),me(!1),ie(!1)):e.picture&&$(e.picture))}))},isActive:ce,setIsActive:ie,title:y,setTitle:x,errorTitle:w,isSubmit:oe,errorDescription:M,description:P,setDescription:T,errorPicture:V,picture:Y,setPicture:U,pictureDisplay:Z})};var nt=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/payments"},r.a.createElement(et,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/payments/add"},r.a.createElement(at,{title:"Ajouter"})),r.a.createElement(z.b,{exact:!0,path:"/admin/payments/:id",render:function(e){return r.a.createElement(at,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var rt=function(){return r.a.createElement(Ye,{titlepage:"Liste des livraisons",linkapi:"http://localhost:5000/louons/api/v1/carrier/all",linkputapi:"http://localhost:5000/louons/api/v1/carrier",th:[{carrierId:"ID"},{title:"Nom"},{description:"Description"},{delay_delivery:"D\xe9lai de livraison"},{price:"Prix"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter une livraison",link:"deliveries",linkbutton:!0})};var ct=function(e){return r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," une livraison"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Livraison ".concat(e.statusMessageForm," avec succ\xe9s"),failMessage:"Erreur de duplication ou champs vide, veuillez v\xe9rifier votre formulaire"},r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-12 col-sm-4 mt-2"},"Etat :"),r.a.createElement(fe.a,{checked:e.isActive,onlabel:"Actif",offlabel:"Inactif",size:"xs",width:"70",onChange:function(){e.setIsActive(!e.isActive)}})),""!==e.pictureDisplay&&r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-6 col-sm-4 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(e.pictureDisplay),className:"w-100",alt:""}))),r.a.createElement(ne,{label:"Titre :",name:"title",type:"text",value:e.title,change:function(t){e.setTitle(t.target.value)},errorcondition:e.errorTitle&&e.isSubmit,errormessage:"Ce champ doit contenir entre 3 et 30 caract\xe8res, et sans caract\xe8res sp\xe9ciaux"}),r.a.createElement(De,{errorDescription:e.errorDescription,isSubmit:e.isSubmit,labelClass:"col-9 col-sm-6 mt-2",description:e.description,setDescription:e.setDescription,errorMessage:"Ce champ doit contenir entre 10 et 200 caract\xe8res",label:"Description :"}),r.a.createElement(ne,{label:"Prix :",name:"price",type:"number",value:e.price,change:function(t){e.setPrice(t.target.value)},errorcondition:e.errorPrice&&e.isSubmit,errormessage:"Le prix doit \xeatre sup\xe9rieur \xe0 0 et ne peut pas exc\xe9der 500\u20ac"}),r.a.createElement(ne,{label:"D\xe9lai de livraison :",name:"delay",type:"number",value:e.delay,change:function(t){e.setDelay(t.target.value)},errorcondition:e.errorDelay&&e.isSubmit,errormessage:"Le d\xe9lai de livraison doit \xeatre compris entre 0 et 10"}),r.a.createElement(Ne,{errorFile:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},errorMessage:"Une livraison doit contenir au moins une image sous le format png ou jpg/jpeg",isMultiple:!1}))};var it=function(e){var t=Object(n.useState)("enregistr\xe9"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(!1),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(!1),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),D=Object(g.a)(k,2),P=D[0],T=D[1],_=Object(n.useState)(!1),A=Object(g.a)(_,2),M=A[0],F=A[1],L=Object(n.useState)(0),I=Object(g.a)(L,2),Y=I[0],U=I[1],G=Object(n.useState)(!1),R=Object(g.a)(G,2),V=R[0],B=R[1],W=Object(n.useState)(0),J=Object(g.a)(W,2),Z=J[0],$=J[1],q=Object(n.useState)(!1),Q=Object(g.a)(q,2),H=Q[0],K=Q[1],X=Object(n.useState)(""),ee=Object(g.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(g.a)(ne,2),ce=re[0],ie=re[1],le=Object(n.useState)(""),se=Object(g.a)(le,2),oe=se[0],me=se[1],ue=Object(n.useState)(0),de=Object(g.a)(ue,2),pe=de[0],fe=de[1],be=Object(n.useState)(!1),he=Object(g.a)(be,2),ge=he[0],Ee=he[1],je=Object(n.useState)(!1),ve=Object(g.a)(je,2),Oe=ve[0],ye=ve[1],xe=Object(n.useState)(!1),Ne=Object(g.a)(xe,2),Se=Ne[0],we=Ne[1],Ce=Object(n.useState)("POST"),ke=Object(g.a)(Ce,2),De=ke[0],Pe=ke[1],Te=new FormData,_e=Object(n.useState)(Object(z.h)().id),Ae=Object(g.a)(_e,1)[0],Me=new RegExp(/^[\w\d\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6/-_]*$/);return Object(n.useEffect)((function(){if(fe(0),Ae&&!E&&(Pe("PUT"),i("modifi\xe9"),fetch("http://localhost:5000/louons/api/v1/carrier/detail/".concat(Ae),{credentials:"include"}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/deliveries")}else j(!0),T(t.data.description),x(t.data.title),U(t.data.price),$(t.data.delay_delivery),ye(t.data.isActive),me(t.data.path_picture)}))),!Me.test(y)||""===y||y.length<3||y.length>30?(C(!0),fe((function(e){return e+1}))):C(!1),!Me.test(P)||""===P||P.length<10||P.length>200?(F(!0),fe((function(e){return e+1}))):F(!1),""===Y||typeof Y===String||Y>500||Y<0?(B(!0),fe((function(e){return e+1}))):B(!1),0===Z||""===Z||typeof Z===String||Z>10||Z<0?(K(!0),fe((function(e){return e+1}))):K(!1),1===Object.keys(te).length)for(var t=0;t<te.length;t++)"image/png"!==te[t].type&&"image/jpeg"!==te[t].type?(ie(!0),fe((function(e){return e+1}))):(ie(!1),Te.append("file".concat(t),te[t]));else"POST"!==De||Ae||(ie(!0),fe((function(e){return e+1})));Ee(pe>0)}),[Ae,pe,Me,y,P,E,Te,De,te,Z,Y,e.history]),r.a.createElement(ct,{titlepage:e.title,isFailed:p,isSuccess:o,statusMessageForm:c,handleSubmit:function(e){e.preventDefault(),we(!0),Te.append("title",y),Te.append("description",P),Te.append("price",Y),Te.append("delay_delivery",Z),Te.append("isActive",Oe);var t="POST"===De?"http://localhost:5000/louons/api/v1/carrier":"http://localhost:5000/louons/api/v1/carrier/".concat(Ae);ge||fetch(t,{method:De,credentials:"include",body:Te}).then((function(e){return e.json()})).then((function(e){e.error?(f(!0),setTimeout((function(){f(!1)}),1500)):(m(!0),setTimeout((function(){m(!1)}),1500),ae(""),"POST"===De?(x(""),T(""),U(0),$(0),we(!1),ye(!1)):e.picture&&me(e.picture))}))},isActive:Oe,setIsActive:ye,title:y,setTitle:x,errorTitle:w,isSubmit:Se,errorDescription:M,description:P,setDescription:T,errorPicture:ce,picture:te,setPicture:ae,pictureDisplay:oe,price:Y,setPrice:U,errorPrice:V,delay:Z,setDelay:$,errorDelay:H})};var lt=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/deliveries"},r.a.createElement(rt,null)),r.a.createElement(z.b,{exact:!0,path:"/admin/deliveries/add"},r.a.createElement(it,{title:"Ajouter"})),r.a.createElement(z.b,{exact:!0,path:"/admin/deliveries/:id",render:function(e){return r.a.createElement(it,Object.assign({},e,{title:"Modifier"}))}}),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var st=function(){return r.a.createElement(Ye,{titlepage:"Liste des Administrateurs",linkapi:"http://localhost:5000/louons/api/v1/admin",th:[{adminId:"ID"},{lastName:"Nom"},{firstName:"Pr\xe9nom"},{adminLevel:"Role"},{isActive:"Activer"},{seeMore:"Voir"},{delete:"Supprimer"}],titlebutton:"Ajouter un Admin",link:"admins",linkbutton:!0})};var ot=function(e){var t=e.component,a=Object(X.a)(e,["component"]),c=Object(n.useContext)(P).dataUser;return r.a.createElement(z.b,Object.assign({},a,{render:function(e){return"superadmin"===c.adminLevel?r.a.createElement(t,e):r.a.createElement("p",{className:"bg-danger text-white p-2"},"Non Autoris\xe9")}}))};function mt(e){return r.a.createElement(de,{handleSubmit:e.handleSubmit,titlepage:"".concat(e.titlepage," admin"),isFailed:e.isFailed,isSuccess:e.isSuccess,successMessage:"Utilisateur enregistr\xe9 avec succ\xe9s",failMessage:"Erreur de duplication utilisateur ou champs vide, veuillez v\xe9rifier votre formulaire"},""!==e.pictureDisplay&&void 0!==e.pictureDisplay?r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/".concat(e.pictureDisplay),className:"w-100 rounded-circle",alt:"avatar_image_profil"}))):r.a.createElement("div",{className:"col-12 m-0 p-0 row d-flex justify-content-between"},r.a.createElement("div",{className:"col-4 col-sm-2 p-2 mx-auto",key:e.pictureDisplay},r.a.createElement("img",{src:"http://localhost:5000/uploads/img/default-avatar.png",className:"w-100 rounded-circle",alt:"avatar_image_profil"}))),r.a.createElement(Ne,{errorPicture:e.errorPicture,isSubmit:e.isSubmit,setPicture:function(t){return e.setPicture(t.target.files)},label:"Photo de profil",errorMessage:"Seule une image sous le format png ou jpg/jpeg est accept\xe9",isMultiple:!0}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"Titre :"),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-5"},r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mr",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",checked:"mr"===e.gender,id:"mr",key:"mr",onChange:function(){return e.setGender("mr")}})),r.a.createElement("label",{className:"col-6 col-sm-5 mt-2"},"Mrs",r.a.createElement("input",{type:"radio",name:"gender",className:"mx-1",id:"mrs",key:"mrs",checked:"mrs"===e.gender,onChange:function(){return e.setGender("mrs")}})))),"/admin/my_profil"!==e.location&&r.a.createElement(r.a.Fragment,null,e.errorAdminLevel&&e.isSubmit&&r.a.createElement("span",{className:"text-danger errormessage text-center"},"Veuillez s\xe9lectionner un r\xf4le"),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center w-100"},r.a.createElement("label",{className:"col-9 col-sm-4 mt-2"},"R\xf4le :"),r.a.createElement("select",{name:"adminlevel",id:"adminlevel",className:"p-1 col-9 col-sm-6 col-md-5",value:e.adminLevel,onChange:function(t){e.setAdminLevel(t.target.value)}},r.a.createElement("option",{value:""},"--R\xf4le admin--"),r.a.createElement("option",{value:"superadmin"},"superadmin"),r.a.createElement("option",{value:"admin"},"admin")))),r.a.createElement(ne,{label:"Nom :",name:"lastname",type:"text",value:e.lastName,change:function(t){e.handleName(t)},errorcondition:e.errorLastName&&e.isSubmit,errormessage:"Le nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement(ne,{label:"Pr\xe9nom :",name:"firstname",type:"text",value:e.firstName,change:function(t){e.handleName(t)},errorcondition:e.errorFirstName&&e.isSubmit,errormessage:"Le pr\xe9nom ne peut pas contenir de chiffre ou de caract\xe8res sp\xe9ciaux"}),r.a.createElement("div",{className:"row form-group my-3 d-flex justify-content-center align-items-center col-12 mx-auto"},r.a.createElement("label",{className:"col-9 col-sm-6 mt-2"},"Date de naissance :"),r.a.createElement("input",{type:"date",name:"datebirth",min:"1940-01-01",max:"2010-01-01",value:e.dateBirth&&V()(e.dateBirth).format("YYYY-MM-DD"),className:"form-control col-9 col-sm-6 col-md-5",onChange:function(t){""===t.target.value?e.setDateBirth():e.setDateBirth(t.target.value)}})),r.a.createElement(ne,{label:"Email :",name:"email",type:"email",value:e.email,change:function(t){e.setEmail(t.target.value)},errorcondition:e.errorMail&&e.isSubmit,errormessage:"L'email doit \xeatre au format johndoe@louons.fr"}),r.a.createElement(ne,{label:"Mot de passe :",name:"password",type:"password",value:e.password,change:function(t){e.setPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorPassword&&e.isSubmit:e.errorPassword,errormessage:"Le mot de passe doit contenir au moins 8 charact\xe8res, une majuscule\r un chiffre et un caract\xe8re sp\xe9cial"}),r.a.createElement(ne,{label:"Confirmation :",name:"passwordconf",type:"password",value:e.confirmationPassword,change:function(t){e.setConfirmationPassword(t.target.value)},errorcondition:"PUT"===e.method?e.errorConfirmation&&e.isSubmit:e.errorConfirmation,errormessage:"Le mot de passe de confirmation doit \xeatre identique"}))}mt.defaultProps={dateBirth:""};var ut=mt;var dt=function(e){var t=Object(n.useState)("POST"),a=Object(g.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),s=Object(g.a)(l,2),o=s[0],m=s[1],u=Object(n.useState)("mr"),d=Object(g.a)(u,2),p=d[0],f=d[1],b=Object(n.useState)(""),h=Object(g.a)(b,2),E=h[0],j=h[1],v=Object(n.useState)(""),O=Object(g.a)(v,2),y=O[0],x=O[1],N=Object(n.useState)(),S=Object(g.a)(N,2),w=S[0],C=S[1],k=Object(n.useState)(""),D=Object(g.a)(k,2),T=D[0],_=D[1],A=Object(n.useState)(""),M=Object(g.a)(A,2),F=M[0],L=M[1],I=Object(n.useState)(""),Y=Object(g.a)(I,2),U=Y[0],G=Y[1],R=Object(n.useState)(""),V=Object(g.a)(R,2),B=V[0],W=V[1],J=Object(n.useState)(""),Z=Object(g.a)(J,2),$=Z[0],q=Z[1],Q=Object(n.useState)(!1),H=Object(g.a)(Q,2),K=H[0],X=H[1],ee=Object(n.useState)(0),te=Object(g.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),ce=Object(g.a)(re,2),ie=ce[0],le=ce[1],se=Object(n.useState)(!1),oe=Object(g.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(!1),pe=Object(g.a)(de,2),fe=pe[0],be=pe[1],he=Object(n.useState)(!1),ge=Object(g.a)(he,2),Ee=ge[0],je=ge[1],ve=Object(n.useState)(!1),Oe=Object(g.a)(ve,2),ye=Oe[0],xe=Oe[1],Ne=Object(n.useState)(!1),Se=Object(g.a)(Ne,2),we=Se[0],Ce=Se[1],ke=Object(n.useState)(!1),De=Object(g.a)(ke,2),Pe=De[0],Te=De[1],_e=Object(n.useState)(!1),Ae=Object(g.a)(_e,2),Me=Ae[0],Fe=Ae[1],Le=Object(n.useState)(!1),Ie=Object(g.a)(Le,2),Ye=Ie[0],Ue=Ie[1],ze=Object(n.useState)(!1),Ge=Object(g.a)(ze,2),Re=Ge[0],Ve=Ge[1],Be=Object(n.useContext)(P).dataUser,We=Object(z.h)().id||Be._id,Je=new FormData;return Object(n.useEffect)((function(){if(X(!1),We&&"PUT"!==c){var t="/admin/my_profil"===e.location.pathname?"http://localhost:5000/louons/api/v1/admin/me":"http://localhost:5000/louons/api/v1/admin/".concat(We);i("PUT"),fetch(t,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(t.error){if(t.error)return e.history.push("/admin/admins")}else f(t.gender.toLowerCase()),G(t.adminLevel),j(t.lastName),x(t.firstName),_(t.email),C(t.dateBirth),q(t.path_picture)}))}ne(0);var a=new RegExp(/^[a-zA-Z\s\xe9\xf9\xe0\xfc\xe4\xee\xe7\xef\xe8\xea\xf4\xf6-]+$/),n=new RegExp(/^\w*([.|-]){0,1}\w*([.|-]){0,1}\w*[@][a-z]*[.]\w{2,5}/),r=new RegExp(/((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[#$%^&*()+=!?\-';,./{}|:<>?~]).{8,20})/);if(a.test(E)&&""!==E?le(!1):(le(!0),ne((function(e){return e+1}))),a.test(y)&&""!==y?ue(!1):(ue(!0),ne((function(e){return e+1}))),n.test(T)&&""!==T?be(!1):(be(!0),ne((function(e){return e+1}))),!r.test(F)&&""!==F||""===F&&"POST"===c?(je(!0),ne((function(e){return e+1}))):je(!1),B!==F||""===B&&"POST"===c?(xe(!0),ne((function(e){return e+1}))):xe(!1),"superadmin"!==U&&"admin"!==U?(Ce(!0),ne((function(e){return e+1}))):Ce(!1),1===Object.keys(o).length)for(var l=0;l<o.length;l++)"image/png"!==o[l].type&&"image/jpeg"!==o[l].type?(Te(!0),ne((function(e){return e+1}))):(Te(!1),Je.append("file".concat(l),o[l]));else Object.keys(o).length>1&&(Te(!0),ne((function(e){return e+1})));X(ae>0)}),[ae,E,y,T,F,B,We,c,U,we,Je,o,$,e]),r.a.createElement(ut,{isSuccess:Ye,isFailed:Re,handleSubmit:function(e){e.preventDefault(e),Fe(!0),Je.append("gender",p),Je.append("lastName",E),Je.append("firstName",y),Je.append("date_birth",w),Je.append("adminLevel",U),Je.append("email",T),""!==F&&Je.append("password",F);var t="POST"===c?"http://localhost:5000/louons/api/v1/admin":"http://localhost:5000/louons/api/v1/admin/".concat(We);K||fetch(t,{method:c,credentials:"include",body:Je}).then((function(e){return e.json()})).then((function(e){e.error?e.error&&(Ve(!0),setTimeout((function(){Ve(!1)}),1500)):(Ue(!0),setTimeout((function(){Ue(!1)}),1500),"POST"===c?(j(""),x(""),C(""),_(""),L(""),W(""),G("")):(console.log(e),q(e.picture),L(""),W("")),Fe(!1))}))},gender:p,lastName:E,firstName:y,dateBirth:w,email:T,password:F,confirmationPassword:B,setDateBirth:C,setEmail:_,setPassword:L,setConfirmationPassword:W,setGender:f,handleName:function(e){"lastname"===e.target.name?j(e.target.value):x(e.target.value)},errorLastName:ie,errorFirstName:me,errorMail:fe,errorPassword:Ee,errorConfirmation:ye,titlepage:e.title,isSubmit:Me,method:c,adminLevel:U,errorAdminLevel:we,setAdminLevel:G,setPicture:m,errorPicture:Pe,pictureDisplay:$,setPictureDisplay:q,location:e.location.pathname})};var pt=function(){return r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin/admins"},r.a.createElement(ot,{component:st})),r.a.createElement(z.b,{exact:!0,path:"/admin/admins/add"},r.a.createElement(ot,{title:"Ajouter un",component:dt})),r.a.createElement(z.b,{exact:!0,path:"/admin/admins/:id"},r.a.createElement(ot,{title:"Modifier un",component:dt})),r.a.createElement(z.b,null,r.a.createElement(G,null)))};var ft=function(){var e=Object(n.useContext)(P).dataUser;return r.a.createElement("div",{className:"col-6 col-md-3 d-flex align-items-center justify-content-center"},r.a.createElement(f.b,{className:"text-decoration-none",to:"/admin/my_profile"},(e.adminLevel,r.a.createElement("i",{className:"ri-shield-user-line mx-1 mx-sm-2 icon-font22 color3c8ce4"}))),r.a.createElement("i",{className:"ri-mail-fill mx-1 mx-sm-2 icon-font22 color3c8ce4"}),r.a.createElement(f.b,{className:"text-decoration-none",to:"/adminlogout"},r.a.createElement("i",{className:"ri-logout-circle-r-line mx-1 mx-sm-2 icon-font22 text-danger"})),r.a.createElement(C,null))};var bt=function(){return r.a.createElement("header",{className:"row adminheader d-flex justify-content-around align-items-center"},r.a.createElement("div",{className:"d-none d-lg-flex col-md-4 col-lg-2"}),r.a.createElement("div",{className:"d-none d-lg-flex col-md-3 col-xl-2 align-items-center"},r.a.createElement(O,null)),r.a.createElement(b,{specificclassname:"col-6 col-md-4 col-xl-5 text-center d-flex justify-content-center align-items-center p-3 logo"}),r.a.createElement(ft,null))};var ht=function(){var e=Object(n.useState)([{link:"",title:"Accueil"},{link:"users",title:"Utilisateurs"},{link:"categories",title:"Cat\xe9gories"},{link:"articles",title:"Article"},{link:"rentals",title:"Location"},{link:"addresses",title:"Adresse"},{link:"payments",title:"Paiement"},{link:"deliveries",title:"Livraison"},{link:"admins",title:"Administrateurs"},{link:"adminlogout",title:"Deconnexion"}]),t=Object(g.a)(e,1)[0],a=Object(n.useContext)(y),c=a.isToggle,i=a.setToggle,l=c&&"d-flex",s=t.map((function(e,t){return r.a.createElement(f.b,{key:t,className:"text-decoration-none",to:"Deconnexion"===e.title?"/".concat(e.link):"/admin/".concat(e.link)},r.a.createElement("li",{key:t,className:"py-2 text-white text-center border-bottom listmenuadmin",onClick:function(){return i(!1)}},e.title))}));return r.a.createElement(j.a,{classNames:"menuadmin",timeout:600,in:c},r.a.createElement("div",{className:"".concat(l," menuadmincontainer d-lg-flex col-6 col-md-4 col-lg-2 bgcolor9cd1ff")},r.a.createElement("nav",{className:"navadmin bg d-flex w-100"},r.a.createElement("ul",{className:"list-unstyled w-100 d-flex flex-column justify-content-center justify-content-lg-start"},s))))};var gt=function(){return r.a.createElement("footer",{className:"row footeradmin p-2 bgcolor3c8ce4 d-flex justify-content-center align-items-center"},r.a.createElement("p",{className:"text-white text-center mb-0"},"@copyright - louons.fr - Tous droits r\xe9serv\xe9"))};var Et=function(e){var t=Object(n.useContext)(P).dataUser;return r.a.createElement(dt,Object.assign({},e,{id:t._id,title:"Mon profil"}))};a(51),a(52);var jt=function(){return r.a.createElement(x,null,r.a.createElement(Le,null,r.a.createElement(bt,null),r.a.createElement("main",{className:"row fill"},r.a.createElement(ht,null),r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/admin"},r.a.createElement(te,{component:Ae,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/users"},r.a.createElement(te,{component:ze,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/categories"},r.a.createElement(te,{component:We,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/articles"},r.a.createElement(te,{component:Ze,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/rentals"},r.a.createElement(te,{component:He,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/addresses"},r.a.createElement(te,{component:Xe,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/payments"},r.a.createElement(te,{component:nt,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/deliveries"},r.a.createElement(te,{component:lt,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/admins"},r.a.createElement(te,{component:pt,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/admin/my_profile"},r.a.createElement(te,{component:Et,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,null,r.a.createElement(G,null))))),r.a.createElement(gt,null)))};var vt=function(){return r.a.createElement(f.a,null,r.a.createElement(T,null,r.a.createElement(z.d,null,r.a.createElement(z.b,{exact:!0,path:"/adminlogin",render:function(e){return r.a.createElement(H,Object.assign({linkapi:"http://localhost:5000/louons/api/v1/authenticationadmin",redirect:"/admin"},e))}}),r.a.createElement(z.b,{exact:!0,path:"/adminlogout",render:function(e){return r.a.createElement(K,Object.assign({},e,{redirect:"/adminlogin"}))}}),r.a.createElement(z.b,{path:"/admin"},r.a.createElement(te,{component:jt,pageifnotauth:"/adminlogin"})),r.a.createElement(z.b,{path:"/"},r.a.createElement(_e,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.2c74f349.chunk.js.map